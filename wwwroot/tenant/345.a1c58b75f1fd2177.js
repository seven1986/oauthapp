"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[345],{8878:(N,A,p)=>{p.d(A,{W:()=>m});var n=p(4522),d=p(8260),T=p(3668);let m=(()=>{class c{constructor(e){this.http=e}PropertyTemplateMarket(e){let u=new n.LE;return u=u.set("channelCode",e),this.http.get(`${d.N.apiServer}/api/PropertyTemplates/Market?${u.toString()}`)}PropertyTemplates(e){let u=new n.LE;return u=u.set("channelCode",e),this.http.get(`${d.N.apiServer}/api/PropertyTemplates?${u.toString()}`)}PropertyTemplatePost(e){return this.http.post(`${d.N.apiServer}/api/PropertyTemplates`,e)}PropertyTemplate(e){return this.http.get(`${d.N.apiServer}/api/PropertyTemplates/${e}`)}PropertyTemplatePut(e,u){return this.http.put(`${d.N.apiServer}/api/PropertyTemplates/${e}`,u)}PropertyTemplateDelete(e){return this.http.delete(`${d.N.apiServer}/api/PropertyTemplates/${e}`)}}return c.\u0275fac=function(e){return new(e||c)(T.LFG(n.eN))},c.\u0275prov=T.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},4954:(N,A,p)=>{p.d(A,{R:()=>m});var n=p(4522),d=p(8260),T=p(3668);let m=(()=>{class c{constructor(e){this.http=e}TenantBlobs(e,u,h){let _=new n.LE;return _=_.set("channelCode",e),_=_.set("channelAppId",u),_=_.set("tag",h),this.http.get(`${d.N.apiServer}/api/TenantBlobs?${_.toString()}`)}TenantBlobPost(e){return this.http.post(`${d.N.apiServer}/api/TenantBlobs`,e)}TenantBlob(e){return this.http.get(`${d.N.apiServer}/api/TenantBlobs/${e}`)}TenantBlobPut(e,u){return this.http.put(`${d.N.apiServer}/api/TenantBlobs/${e}`,u)}TenantBlobDelete(e){return this.http.delete(`${d.N.apiServer}/api/TenantBlobs/${e}`)}TenantBlobUpload(e,u,h){let _=new n.LE;return _=_.set("channelCode",e),_=_.set("channelAppId",u),this.http.post(`${d.N.apiServer}/api/TenantBlobs/Upload?${_.toString()}`,h)}}return c.\u0275fac=function(e){return new(e||c)(T.LFG(n.eN))},c.\u0275prov=T.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},8468:(N,A,p)=>{p.d(A,{i:()=>d});var n=p(3668);let d=(()=>{class T{constructor(){}ngOnInit(){}}return T.\u0275fac=function(c){return new(c||T)},T.\u0275cmp=n.Xpm({type:T,selectors:[["app-skeleton-table"]],decls:103,vars:0,consts:[[1,"col-12"],[1,"card"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[1,"row","align-items-center"],[1,"col-auto"],[1,"skeleton-avatar"],[1,"col-7"],[1,"skeleton-line"],[1,"col-2","ms-auto","text-end"]],template:function(c,g){1&c&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"ul",2),n.TgZ(3,"li",3),n.TgZ(4,"div",4),n.TgZ(5,"div",5),n._UZ(6,"div",6),n.qZA(),n.TgZ(7,"div",7),n._UZ(8,"div",8),n._UZ(9,"div",8),n.qZA(),n.TgZ(10,"div",9),n._UZ(11,"div",8),n._UZ(12,"div",8),n.qZA(),n.qZA(),n.qZA(),n.TgZ(13,"li",3),n.TgZ(14,"div",4),n.TgZ(15,"div",5),n._UZ(16,"div",6),n.qZA(),n.TgZ(17,"div",7),n._UZ(18,"div",8),n._UZ(19,"div",8),n.qZA(),n.TgZ(20,"div",9),n._UZ(21,"div",8),n._UZ(22,"div",8),n.qZA(),n.qZA(),n.qZA(),n.TgZ(23,"li",3),n.TgZ(24,"div",4),n.TgZ(25,"div",5),n._UZ(26,"div",6),n.qZA(),n.TgZ(27,"div",7),n._UZ(28,"div",8),n._UZ(29,"div",8),n.qZA(),n.TgZ(30,"div",9),n._UZ(31,"div",8),n._UZ(32,"div",8),n.qZA(),n.qZA(),n.qZA(),n.TgZ(33,"li",3),n.TgZ(34,"div",4),n.TgZ(35,"div",5),n._UZ(36,"div",6),n.qZA(),n.TgZ(37,"div",7),n._UZ(38,"div",8),n._UZ(39,"div",8),n.qZA(),n.TgZ(40,"div",9),n._UZ(41,"div",8),n._UZ(42,"div",8),n.qZA(),n.qZA(),n.qZA(),n.TgZ(43,"li",3),n.TgZ(44,"div",4),n.TgZ(45,"div",5),n._UZ(46,"div",6),n.qZA(),n.TgZ(47,"div",7),n._UZ(48,"div",8),n._UZ(49,"div",8),n.qZA(),n.TgZ(50,"div",9),n._UZ(51,"div",8),n._UZ(52,"div",8),n.qZA(),n.qZA(),n.qZA(),n.TgZ(53,"li",3),n.TgZ(54,"div",4),n.TgZ(55,"div",5),n._UZ(56,"div",6),n.qZA(),n.TgZ(57,"div",7),n._UZ(58,"div",8),n._UZ(59,"div",8),n.qZA(),n.TgZ(60,"div",9),n._UZ(61,"div",8),n._UZ(62,"div",8),n.qZA(),n.qZA(),n.qZA(),n.TgZ(63,"li",3),n.TgZ(64,"div",4),n.TgZ(65,"div",5),n._UZ(66,"div",6),n.qZA(),n.TgZ(67,"div",7),n._UZ(68,"div",8),n._UZ(69,"div",8),n.qZA(),n.TgZ(70,"div",9),n._UZ(71,"div",8),n._UZ(72,"div",8),n.qZA(),n.qZA(),n.qZA(),n.TgZ(73,"li",3),n.TgZ(74,"div",4),n.TgZ(75,"div",5),n._UZ(76,"div",6),n.qZA(),n.TgZ(77,"div",7),n._UZ(78,"div",8),n._UZ(79,"div",8),n.qZA(),n.TgZ(80,"div",9),n._UZ(81,"div",8),n._UZ(82,"div",8),n.qZA(),n.qZA(),n.qZA(),n.TgZ(83,"li",3),n.TgZ(84,"div",4),n.TgZ(85,"div",5),n._UZ(86,"div",6),n.qZA(),n.TgZ(87,"div",7),n._UZ(88,"div",8),n._UZ(89,"div",8),n.qZA(),n.TgZ(90,"div",9),n._UZ(91,"div",8),n._UZ(92,"div",8),n.qZA(),n.qZA(),n.qZA(),n.TgZ(93,"li",3),n.TgZ(94,"div",4),n.TgZ(95,"div",5),n._UZ(96,"div",6),n.qZA(),n.TgZ(97,"div",7),n._UZ(98,"div",8),n._UZ(99,"div",8),n.qZA(),n.TgZ(100,"div",9),n._UZ(101,"div",8),n._UZ(102,"div",8),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA())},styles:[""]}),T})()},5345:(N,A,p)=>{p.r(A),p.d(A,{HttpLoaderFactory:()=>P,TenantsModule:()=>ve});var n=p(6019),d=p(3009),T=p(8239),m=p(8100),c=p(7262),g=p(6588),e=p(3668),u=p(7320),h=p(1427),_=p(9133),f=p(7732),Z=p(8260),E=p(4522);let M=(()=>{class o{constructor(t){this.http=t}TenantProperties(){return this.http.get(`${Z.N.apiServer}/api/TenantProperties`)}TenantPropertyPost(t){return this.http.post(`${Z.N.apiServer}/api/TenantProperties`,t)}TenantProperty(t){return this.http.get(`${Z.N.apiServer}/api/TenantProperties/${t}`)}TenantPropertyPut(t,i){return this.http.put(`${Z.N.apiServer}/api/TenantProperties/${t}`,i)}TenantPropertyDelete(t){return this.http.delete(`${Z.N.apiServer}/api/TenantProperties/${t}`)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(E.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var y=p(8878),U=p(4954),O=p(2595),$=p(8468),q=p(9286);function F(o,a){if(1&o&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t)}}function D(o,a){1&o&&e._UZ(0,"app-skeleton-table")}function w(o,a){if(1&o&&(e.TgZ(0,"b",16),e._uU(1,"?"),e.qZA()),2&o){const t=e.oxw().$implicit;e.s9C("title",t.description)}}function J(o,a){if(1&o&&(e.TgZ(0,"option",19),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij("",t.name," ")}}function R(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"select",17),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().$implicit.input.value=r}),e.YNc(1,J,2,2,"option",18),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.Q6J("ngModel",t.input.value),e.xp6(1),e.Q6J("ngForOf",t.selectItems)}}function L(o,a){if(1&o&&(e.TgZ(0,"option",19),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij("",t.name," ")}}function I(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"select",17),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().$implicit.input.value=r}),e.YNc(1,L,2,2,"option",18),e.qZA()}if(2&o){const t=e.oxw().$implicit,i=e.oxw(2);e.Q6J("ngModel",t.input.value),e.xp6(1),e.Q6J("ngForOf",i.blobServers)}}function z(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"small"),e._uU(2),e.qZA(),e.TgZ(3,"div",20),e.TgZ(4,"label",21),e.TgZ(5,"input",22),e.NdJ("change",function(r){e.CHM(t);const s=e.oxw().$implicit;return e.oxw(2).UploadPropertyImage(r,s)}),e.qZA(),e._uU(6," \u4e0a\u4f20 "),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.input.value)}}function B(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"input",23),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().$implicit.input.value=r}),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.s9C("type",t.valueType),e.Q6J("ngModel",t.input.value)}}function k(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.YNc(3,w,2,1,"b",10),e._UZ(4,"br"),e.TgZ(5,"code"),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"td"),e.TgZ(8,"div",11),e.YNc(9,R,2,2,"select",12),e.YNc(10,I,2,2,"select",12),e.YNc(11,z,7,1,"div",13),e.YNc(12,B,1,2,"input",14),e.qZA(),e.qZA(),e.TgZ(13,"td"),e.TgZ(14,"a",15),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(2).updateProperty(s)}),e._uU(15,"\u66f4\u65b0"),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(2),e.hij(" ",t.name," "),e.xp6(1),e.Q6J("ngIf",t.description),e.xp6(3),e.Oqu(t.value),e.xp6(2),e.Q6J("ngSwitch",t.valueType),e.xp6(1),e.Q6J("ngSwitchCase","select"),e.xp6(1),e.Q6J("ngSwitchCase","tenantserver"),e.xp6(1),e.Q6J("ngSwitchCase","blob")}}function Y(o,a){1&o&&(e.TgZ(0,"div",24),e._UZ(1,"img",25),e.qZA())}const Q=function(o){return{tag:o}};function G(o,a){if(1&o&&(e.TgZ(0,"div",7),e.TgZ(1,"table",8),e.TgZ(2,"thead"),e.TgZ(3,"tr"),e.TgZ(4,"th"),e._uU(5,"\u53ef\u9009\u914d\u7f6e"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"\u8bbe\u7f6e"),e.qZA(),e._UZ(8,"th"),e.qZA(),e.qZA(),e.TgZ(9,"tbody"),e.YNc(10,k,16,7,"tr",4),e.ALo(11,"propertyFilter"),e.qZA(),e.qZA(),e.YNc(12,Y,2,0,"div",9),e.qZA()),2&o){const t=e.oxw();e.xp6(10),e.Q6J("ngForOf",e.xi3(11,2,t.temps,e.VKq(5,Q,t.selectedTag))),e.xp6(2),e.Q6J("ngIf",t.temps.length<1)}}let X=(()=>{class o{constructor(t,i,r,s){this.propServ=t,this.proptempServ=i,this.blobServ=r,this.tenantServerServ=s,this.apiUrl=`${Z.N.apiServer}/api`,this.onemit=new e.vpe,this.data=[],this.temps=[],this.tags=[],this.blobServers=[]}ngOnChanges(){this.getData()}getData(){this.loading=!0;var t=this.propServ.TenantProperties(),i=this.proptempServ.PropertyTemplates(this.bizCode),r=this.tenantServerServ.TenantServerMarket("blob");(0,m.D)([t,i,r]).subscribe(s=>{this.loading=!1,this.data=s[0].data,this.temps=s[1].data,this.blobServers=s[2].data.map(l=>({id:l.id,name:l.serverName})),this.tags=[...new Set(this.temps.map(l=>l.tag))],this.temps.forEach(l=>{l.selectItems=[];var S=this.data.filter(C=>C.name==l.value)[0];l.input=S||{},"select"==l.valueType&&(l.selectItems=JSON.parse(l.valueDefaultItems))})})}updateProperty(t){this.onemit.emit(t)}UploadPropertyImage(t,i){var r=new FormData;r.append("file",t.currentTarget.files[0]),this.blobServ.TenantBlobUpload(this.bizCode,this.item.id,r).subscribe(s=>{200==s.code?i.input.value=s.data:g.F.fire({icon:"error",titleText:s.err})})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(M),e.Y36(y.W),e.Y36(U.R),e.Y36(O.j))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-tenant-property-editor"]],inputs:{item:"item",bizCode:"bizCode"},outputs:{onemit:"onemit"},features:[e.TTD],decls:10,vars:4,consts:[[1,"my-2","d-flex","flex-columns","gap-2"],["type","button","matRipple","",1,"btn","btn-indigo",3,"click"],["type","text","list","tempTags","matRipple","","placeholder","\u641c\u7d22...",1,"form-control",3,"ngModel","ngModelChange"],["id","tempTags"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","table-responsive mb-0 border-top",4,"ngIf"],[1,"table-responsive","mb-0","border-top"],[1,"table","card-table","table-vcenter","text-nowrap","datatable","border"],["class","mt-5 pt-5 text-center",4,"ngIf"],[3,"title",4,"ngIf"],[3,"ngSwitch"],["class","form-select",3,"ngModel","ngModelChange",4,"ngSwitchCase"],[4,"ngSwitchCase"],["class","form-control",3,"type","ngModel","ngModelChange",4,"ngSwitchDefault"],["href","javascript:void(0)","matRipple","",1,"btn","btn-white","mx-2",3,"click"],[3,"title"],[1,"form-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mt-1"],[1,"btn","btn-link","btn-sm"],["type","file",1,"d-none",3,"change"],[1,"form-control",3,"type","ngModel","ngModelChange"],[1,"mt-5","pt-5","text-center"],["src","./assets/nodata.png"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div"),e.TgZ(2,"button",1),e.NdJ("click",function(){return i.getData()}),e._uU(3,"\u5237\u65b0"),e.qZA(),e.qZA(),e.TgZ(4,"div"),e.TgZ(5,"input",2),e.NdJ("ngModelChange",function(s){return i.selectedTag=s}),e.qZA(),e.TgZ(6,"datalist",3),e.YNc(7,F,2,1,"option",4),e.qZA(),e.qZA(),e.qZA(),e.YNc(8,D,1,0,"app-skeleton-table",5),e.YNc(9,G,13,7,"div",6)),2&t&&(e.xp6(5),e.Q6J("ngModel",i.selectedTag),e.xp6(2),e.Q6J("ngForOf",i.tags),e.xp6(1),e.Q6J("ngIf",i.loading),e.xp6(1),e.Q6J("ngIf",!i.loading))},directives:[f.wG,_.Fj,_.JJ,_.On,n.sg,n.O5,_.YN,_.Kr,$.i,n.RF,n.n9,n.ED,_.EJ],pipes:[q.K],styles:[""]}),o})(),j=(()=>{class o{constructor(t){this.serv=t,this.onemit=new e.vpe,this.data=[]}close(){this.onemit.emit("Propertires")}onEditorEmit(t){console.log(t),t.input.id?this.serv.TenantPropertyPut(t.input.id,t.input).subscribe(i=>{g.F.fire({icon:"success",titleText:"\u8bbe\u7f6e\u6210\u529f\uff01"})}):this.serv.TenantPropertyPost({tenantID:this.item.id,name:t.value,value:t.input.value}).subscribe(i=>{g.F.fire({icon:"success",titleText:"\u8bbe\u7f6e\u6210\u529f\uff01"})})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(M))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-tenant-properties"]],inputs:{item:"item"},outputs:{onemit:"onemit"},decls:8,vars:3,consts:[[1,"position-fixed","slidePannel","shadow","border","border-right-0","bg-white"],[1,"app-setting-main"],[1,"modal-header"],[1,"mb-0"],["type","button","matRipple","",1,"btn-close",3,"click"],[1,"modal-body"],[3,"item","bizCode","onemit"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h2",3),e._uU(4),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return i.close()}),e.qZA(),e.qZA(),e.TgZ(6,"div",5),e.TgZ(7,"app-tenant-property-editor",6),e.NdJ("onemit",function(s){return i.onEditorEmit(s)}),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Oqu(i.item.name),e.xp6(3),e.Q6J("item",i.item)("bizCode","tenant"))},directives:[f.wG,X],styles:[""]}),o})(),H=(()=>{class o{constructor(t){this.serv=t,this.onemit=new e.vpe}ngOnChanges(){}close(){this.onemit.emit("Setting")}updateTenant(){return(0,T.Z)(function*(){yield g.R.fire({icon:"question",titleText:"\u662f\u5426\u786e\u8ba4\uff1f",showCancelButton:!0})})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.J))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-tenant-setting"]],inputs:{item:"item"},outputs:{onemit:"onemit"},features:[e.TTD],decls:21,vars:3,consts:[[1,"position-fixed","slidePannel","shadow","border","border-right-0","bg-white"],[1,"app-setting-main"],[1,"modal-header"],[1,"mb-0"],["type","button","matRipple","",1,"btn-close",3,"click"],[1,"modal-body"],[1,"m-2"],[1,"mb-3"],[1,"form-label"],["type","text","readonly","",1,"form-control",3,"value"],["rows","5",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-indigo",3,"click"],["type","button","matRipple","",1,"btn","btn-white","mx-2",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h2",3),e._uU(4),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return i.close()}),e.qZA(),e.qZA(),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"label",8),e._uU(10,"\u540d\u79f0"),e.qZA(),e._UZ(11,"input",9),e.qZA(),e.TgZ(12,"div",7),e.TgZ(13,"label",8),e._uU(14,"\u63cf\u8ff0"),e.qZA(),e.TgZ(15,"textarea",10),e.NdJ("ngModelChange",function(s){return i.item.description=s}),e.qZA(),e.qZA(),e.TgZ(16,"div",7),e.TgZ(17,"button",11),e.NdJ("click",function(){return i.updateTenant()}),e._uU(18,"\u66f4\u65b0"),e.qZA(),e.TgZ(19,"button",12),e.NdJ("click",function(){return i.close()}),e._uU(20,"\u5173\u95ed"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Oqu(i.item.name),e.xp6(7),e.s9C("value",i.item.name),e.xp6(4),e.Q6J("ngModel",i.item.description))},directives:[f.wG,_.Fj,_.JJ,_.On],styles:[""]}),o})();var K=p(8789);function V(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"app-tenant-properties",19),e.NdJ("onemit",function(r){return e.CHM(t),e.oxw().onPannelEmit(r)}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("item",t.selectedTenant)}}function W(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"app-tenant-setting",19),e.NdJ("onemit",function(r){return e.CHM(t),e.oxw().onPannelEmit(r)}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("item",t.selectedTenant)}}function ee(o,a){1&o&&e._UZ(0,"option",20),2&o&&e.s9C("value",a.$implicit.name)}function te(o,a){1&o&&e._UZ(0,"app-skeleton-cards3")}const ne=function(){return["/servers/properties"]};function oe(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",3),e.TgZ(1,"div",23),e.TgZ(2,"div",24),e.TgZ(3,"span",25),e._uU(4),e.qZA(),e.TgZ(5,"div",26),e.TgZ(6,"button",27),e._uU(7,"\u64cd\u4f5c"),e.qZA(),e.TgZ(8,"div",28),e.TgZ(9,"a",29),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(2).showPannel("Propertires",s)}),e.SDv(10,30),e.qZA(),e.TgZ(11,"a",31),e.SDv(12,32),e.qZA(),e.TgZ(13,"a",29),e.NdJ("click",function(){return e.CHM(t),e.oxw(2)._checkVersion()}),e.SDv(14,33),e.qZA(),e.qZA(),e.qZA(),e._UZ(15,"div"),e.qZA(),e.TgZ(16,"div",34),e.TgZ(17,"div",35),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(2).showPannel("Setting",s)}),e.TgZ(18,"div",34),e.TgZ(19,"p",36),e.TgZ(20,"span",7),e.SDv(21,37),e.qZA(),e._uU(22,"\uff1a "),e.TgZ(23,"strong"),e._uU(24),e.qZA(),e._uU(25),e._UZ(26,"small"),e.qZA(),e.TgZ(27,"div",38),e._UZ(28,"div",39),e.qZA(),e.TgZ(29,"p",36),e.TgZ(30,"span",7),e.SDv(31,40),e.qZA(),e._uU(32,"\uff1a "),e.TgZ(33,"strong"),e._uU(34),e.qZA(),e._uU(35),e.qZA(),e.TgZ(36,"div",38),e._UZ(37,"div",41),e.qZA(),e.TgZ(38,"p",36),e.TgZ(39,"span",7),e.SDv(40,42),e.qZA(),e._uU(41," \uff1a"),e.TgZ(42,"strong"),e._uU(43),e.qZA(),e._uU(44),e.qZA(),e.TgZ(45,"div",38),e._UZ(46,"div",43),e.qZA(),e.TgZ(47,"p",36),e.TgZ(48,"span",7),e.SDv(49,44),e.qZA(),e._uU(50," \uff1a"),e.TgZ(51,"strong"),e._uU(52),e.qZA(),e._uU(53),e.qZA(),e.TgZ(54,"div",38),e._UZ(55,"div",39),e.qZA(),e.qZA(),e.qZA(),e._UZ(56,"div",45),e.qZA(),e.TgZ(57,"div",46),e.TgZ(58,"small"),e._uU(59),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(4),e.Oqu(t.name),e.xp6(7),e.Q6J("routerLink",e.DdM(23,ne)),e.xp6(13),e.hij("",(t.report.appServer.size/1024/1024).toFixed(2)," MB "),e.xp6(1),e.hij(" / ",t.appServerMaxSize/1024," MB "),e.xp6(3),e.Jzz("width: ",t.report.appServer.size/1024/t.appServerMaxSize*100,"%"),e.xp6(6),e.hij("",(t.report.database.size/1024/1024).toFixed(2)," MB "),e.xp6(1),e.hij(" / ",t.databaseMaxSize/1024," MB"),e.xp6(2),e.Jzz("width: ",t.report.databaseSize/1024/t.databaseMaxSize*100,"%"),e.xp6(6),e.hij("",(t.report.blobServer.size/1024/1024).toFixed(2)," MB "),e.xp6(1),e.hij(" / ",t.blobServerMaxSize/1024," MB "),e.xp6(2),e.Jzz("width: ",t.report.blobServer.size/1024/t.blobServerMaxSize*100,"%"),e.xp6(6),e.hij("",(t.report.releaseServer.size/1024/1024).toFixed(2)," MB "),e.xp6(1),e.hij(" / ",t.releaseServerMaxSize/1024," MB "),e.xp6(2),e.Jzz("width: ",t.report.releaseServer.size/1024/t.releaseServerMaxSize*100,"%"),e.xp6(4),e.Oqu(t.lastUpdate)}}const ie=function(o){return{name:o}};function re(o,a){if(1&o&&(e.TgZ(0,"div",21),e.YNc(1,oe,60,24,"div",22),e.ALo(2,"propertyFilter"),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.xi3(2,1,t.data,e.VKq(4,ie,t.nameFilter)))}}const ae=function(){return["/"]};let se=(()=>{class o{constructor(t,i){this.serv=t,this.translate=i,this.Pannels={Claims:!1,Hosts:!1,Propertires:!1,Setting:!1},this.data=[],this.loading=!0}ngOnInit(){this.getData()}getData(){this.loading=!0,this.serv.Tenants().subscribe(t=>{this.loading=!1,t.data.forEach(i=>{i.report={appServer:{},database:{},blobServer:{size:0},releaseServer:{size:0}},this.serv.Tenant(i.id).subscribe(r=>{r.data.blobServer.size=parseFloat(r.data.blobServer.size),r.data.releaseServer.size=parseFloat(r.data.releaseServer.size),i.report=r.data})}),this.data=t.data})}showPannel(t,i){Object.keys(this.Pannels).forEach(r=>{this.Pannels[r]=!1}),this.Pannels[t]=!0,this.selectedTenant=i}onPannelEmit(t){this.Pannels[t]=!1}_checkVersion(){var t=this;(0,m.D)([this.serv.TenantCheckVersion("app",!0),this.serv.TenantCheckVersion("api",!0)]).subscribe(function(){var i=(0,T.Z)(function*(r){if(r[0].data.newVersions.length>0||r[1].data.newVersions.length>0){if(!(yield g.R.fire({icon:"question",titleText:t.translate.instant("\u53d1\u73b0\u65b0\u7248\u672c\uff0c\u662f\u5426\u5347\u7ea7?"),showCancelButton:!0})).isConfirmed)return;var l=[];r[0].data.newVersions.length>0&&l.push(t.serv.TenantCheckVersion("app",!1)),r[1].data.newVersions.length>0&&l.push(t.serv.TenantCheckVersion("api",!1)),(0,m.D)(l).subscribe(S=>{g.F.fire({icon:"success",titleText:t.translate.instant("\u5347\u7ea7\u6210\u529f\uff0c\u8bf7\u5237\u65b0\u9875\u9762")})})}else g.F.fire({icon:"success",titleText:t.translate.instant("\u5df2\u7ecf\u662f\u6700\u65b0\u7248\u672c")})});return function(r){return i.apply(this,arguments)}}())}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.J),e.Y36(h.sK))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-tenants"]],decls:22,vars:9,consts:function(){let a,t,i,r,s,l,S,C,b,x;return a=$localize`:@@站点:站点`,t=$localize`:@@条数据:条数据`,i=$localize`:@@返回:返回`,r=$localize`:@@站点配置:站点配置`,s=$localize`:@@系统配置管理:系统配置管理`,l=$localize`:@@版本更新:版本更新`,S=$localize`:@@站点空间:站点空间`,C=$localize`:@@数 据 库:数 据 库`,b=$localize`:@@文件存储:文件存储`,x=$localize`:@@应用备份:应用备份`,[[3,"item","onemit",4,"ngIf"],[1,"page-header","mt-0","mb-3"],[1,"row","align-items-center"],[1,"col"],["translate","",1,"page-title"],a,[1,"text-muted","mt-1"],["translate",""],t,[1,"col-auto","ms-auto","d-print-none"],[1,"d-flex"],[1,"me-3","d-none","d-md-block"],["list","datalistOptions",1,"form-control",3,"ngModel","ngModelChange"],["id","datalistOptions"],[3,"value",4,"ngFor","ngForOf"],["matRipple","","translate","",1,"btn","btn-white","mx-2",3,"routerLink"],i,[4,"ngIf","ngIfElse"],["templateName",""],[3,"item","onemit"],[3,"value"],[1,"row","row-cols-1","row-cols-lg-4","row-cols-md-4","row-cols-sm-1","g-3","user-select-none"],["class","col",4,"ngFor","ngForOf"],[1,"card"],[1,"card-header","d-flex"],[1,"w-100"],[1,"btn-group","text-secondary"],["type","button","data-bs-toggle","dropdown","aria-haspopup","true","matRipple","","translate","",1,"btn","btn-white","dropdown-toggle"],[1,"dropdown-menu","dropdown-menu-right","dropdown-menu-lg-left"],["href","javascript:void(0)","matRipple","","translate","",1,"dropdown-item",3,"click"],r,["translate","",1,"dropdown-item",3,"routerLink"],s,l,[1,"card-body"],["matRipple","",1,"card-body",3,"click"],[1,"mb-3"],S,[1,"progress","border","mb-3"],["role","progressbar",1,"progress-bar","bg-orange"],C,["role","progressbar",1,"progress-bar","bg-lime"],b,["role","progressbar",1,"progress-bar","bg-indigo"],x,[1,"d-flex","align-items-center","justify-content-center"],[1,"card-footer"]]},template:function(t,i){if(1&t&&(e.YNc(0,V,1,1,"app-tenant-properties",0),e.YNc(1,W,1,1,"app-tenant-setting",0),e.TgZ(2,"div",1),e.TgZ(3,"div",2),e.TgZ(4,"div",3),e.TgZ(5,"h2",4),e.SDv(6,5),e.qZA(),e.TgZ(7,"div",6),e._uU(8),e.TgZ(9,"span",7),e.SDv(10,8),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",9),e.TgZ(12,"div",10),e.TgZ(13,"div",11),e.TgZ(14,"input",12),e.NdJ("ngModelChange",function(s){return i.nameFilter=s}),e.qZA(),e.TgZ(15,"datalist",13),e.YNc(16,ee,1,1,"option",14),e.qZA(),e.qZA(),e.TgZ(17,"a",15),e.SDv(18,16),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(19,te,1,0,"app-skeleton-cards3",17),e.YNc(20,re,3,6,"ng-template",null,18,e.W1O)),2&t){const r=e.MAs(21);e.Q6J("ngIf",i.Pannels.Propertires),e.xp6(1),e.Q6J("ngIf",i.Pannels.Setting),e.xp6(7),e.Oqu(i.data.length),e.xp6(6),e.Q6J("ngModel",i.nameFilter),e.xp6(2),e.Q6J("ngForOf",i.data),e.xp6(1),e.Q6J("routerLink",e.DdM(8,ae)),e.xp6(2),e.Q6J("ngIf",i.loading)("ngIfElse",r)}},directives:[n.O5,h.Pi,_.Fj,_.JJ,_.On,n.sg,d.yS,f.wG,j,H,_.YN,_.Kr,K.O],pipes:[q.K],styles:["[_nghost-%COMP%]{display:block!important}"],data:{animation:[c.q]}}),o})(),pe=(()=>{class o{constructor(t){this.http=t}AuthSchemes(){return this.http.get(`${Z.N.apiServer}/api/AuthSchemes`)}AuthSchemePost(t){return this.http.post(`${Z.N.apiServer}/api/AuthSchemes`,t)}AuthScheme(t){return this.http.get(`${Z.N.apiServer}/api/AuthSchemes/${t}`)}AuthSchemePut(t,i){return this.http.put(`${Z.N.apiServer}/api/AuthSchemes/${t}`,i)}AuthSchemeDelete(t){return this.http.delete(`${Z.N.apiServer}/api/AuthSchemes/${t}`)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(E.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function _e(o,a){if(1&o&&(e.TgZ(0,"li"),e.TgZ(1,"a",1),e._uU(2),e.qZA(),e.qZA()),2&o){const t=a.$implicit;e.xp6(2),e.Oqu(t.displayName)}}let le=(()=>{class o{constructor(t){this.serv=t,this.data=[]}ngOnInit(){this.getData()}getData(){this.serv.AuthSchemes().subscribe(t=>{console.log(t),this.data=t.data})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(pe))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-authschemes"]],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],["matRipple",""]],template:function(t,i){1&t&&(e.TgZ(0,"ul"),e.YNc(1,_e,3,1,"li",0),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",i.data))},directives:[n.sg,f.wG],styles:["[_nghost-%COMP%]{display:block!important}"],data:{animation:[c.q]}}),o})();var de=p(3687);const ce=function(){return["/tenants"]},ue=function(){return["/"]},Te=[{path:"",component:se,data:{title:"tenants",state:"tenants"}},{path:"add",component:(()=>{class o{constructor(t,i,r){this.serv=t,this.route=i,this.globalServ=r,this.item={}}ngOnInit(){}addTenant(t){return(0,T.Z)(function*(){yield g.R.fire({icon:"question",titleText:"\u662f\u5426\u786e\u8ba4\u63d0\u4ea4?",showCancelButton:!0})})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.J),e.Y36(d.F0),e.Y36(de.U))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-tenant-add"]],decls:29,vars:7,consts:[[1,"page-header","mt-0","mb-3"],[1,"row","align-items-center"],[1,"col"],[1,"page-title"],[1,"col-auto","ms-auto","d-print-none"],["matRipple","",1,"btn","btn-white",3,"routerLink"],[1,"row"],[1,"col-md-6","col-12"],[1,"card"],[1,"card-body"],[1,"mb-3"],[1,"form-label"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["rows","5",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-indigo",3,"click"],["matRipple","",1,"btn","btn-white","mx-2",3,"routerLink"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h2",3),e._uU(4,"\u65b0\u5efa\u7ec4\u7ec7"),e.qZA(),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"a",5),e._uU(7,"\u8fd4\u56de"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",6),e.TgZ(9,"div",7),e.TgZ(10,"div",8),e.TgZ(11,"div",9),e.TgZ(12,"div",10),e.TgZ(13,"label",11),e._uU(14,"\u540d\u79f0"),e.qZA(),e.TgZ(15,"input",12),e.NdJ("ngModelChange",function(s){return i.item.name=s}),e.qZA(),e.qZA(),e.TgZ(16,"div",10),e.TgZ(17,"label",11),e._uU(18,"ownerHost"),e.qZA(),e.TgZ(19,"input",12),e.NdJ("ngModelChange",function(s){return i.item.ownerHost=s}),e.qZA(),e.qZA(),e.TgZ(20,"div",10),e.TgZ(21,"label",11),e._uU(22,"\u63cf\u8ff0"),e.qZA(),e.TgZ(23,"textarea",13),e.NdJ("ngModelChange",function(s){return i.item.description=s}),e.qZA(),e.qZA(),e.TgZ(24,"div"),e.TgZ(25,"button",14),e.NdJ("click",function(s){return i.addTenant(s)}),e._uU(26,"\u521b\u5efa"),e.qZA(),e.TgZ(27,"a",15),e._uU(28,"\u8fd4\u56de"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(6),e.Q6J("routerLink",e.DdM(5,ce)),e.xp6(9),e.Q6J("ngModel",i.item.name),e.xp6(4),e.Q6J("ngModel",i.item.ownerHost),e.xp6(4),e.Q6J("ngModel",i.item.description),e.xp6(4),e.Q6J("routerLink",e.DdM(6,ue)))},directives:[d.yS,f.wG,_.Fj,_.JJ,_.On],styles:[""],data:{animation:[c.q]}}),o})(),data:{title:"tenant-add",state:"tenant-add"}},{path:"authschemes",component:le,data:{title:"tenant-authschemes",state:"tenant-authschemes"}}];let ge=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[d.Bz.forChild(Te)],d.Bz]}),o})();var Ze=p(1382),me=p(7623);function P(o){return new me.w(o,Z.N.i18n_asset_prefix)}let ve=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[Ze.m,n.ez,_.u5,ge,h.aw.forChild({loader:{provide:h.Zw,useFactory:P,deps:[E.eN]},isolate:!1,extend:!0})]]}),o})()}}]);