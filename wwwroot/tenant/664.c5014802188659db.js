"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[664],{1664:(Fe,h,a)=>{a.r(h),a.d(h,{ApiModule:()=>we,HttpLoaderFactory:()=>F});var E=a(6019),S=a(3009),N=a(8239),g=a(6588),e=a(3668),Z=a(4849),C=a(1427),r=a(9133),T=a(7732),X=a(8100),M=a(4522),A=a(8260);let f=(()=>{class o{constructor(t){this.http=t}CodeGenMarket(t,n,_){let i=new M.LE;return i=i.set("tag",t),i=i.set("skip",n),i=i.set("take",_),this.http.get(`${A.N.apiServer}/api/CodeGenerators/Market?${i.toString()}`)}CodeGens(t,n){let _=new M.LE;return _=_.set("skip",t),_=_.set("take",n),this.http.get(`${A.N.apiServer}/api/CodeGenerators?${_.toString()}`)}CodeGenPost(t){return this.http.post(`${A.N.apiServer}/api/CodeGenerators`,t)}CodeGen(t){return this.http.get(`${A.N.apiServer}/api/CodeGenerators/${t}`)}CodeGenPut(t,n){return this.http.put(`${A.N.apiServer}/api/CodeGenerators/${t}`,n)}CodeGenDelete(t){return this.http.delete(`${A.N.apiServer}/api/CodeGenerators/${t}`)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(M.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),Q=(()=>{class o{constructor(t){this.http=t}ApiCodeGens(t,n,_){let i=new M.LE;return i=i.set("apiId",t),i=i.set("skip",n),i=i.set("take",_),this.http.get(`${A.N.apiServer}/api/ApiCodeGenerators?${i.toString()}`)}ApiCodeGenPost(t){return this.http.post(`${A.N.apiServer}/api/ApiCodeGenerators`,t)}ApiCodeGen(t){return this.http.get(`${A.N.apiServer}/api/ApiCodeGenerators/${t}`)}ApiCodeGenDelete(t){return this.http.delete(`${A.N.apiServer}/api/ApiCodeGenerators/${t}`)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(M.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var B=a(8468);function z(o,s){if(1&o&&(e.TgZ(0,"option",17),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.s9C("value",t.id),e.xp6(1),e.AsE("",t.name," - ",t.version,"")}}function Y(o,s){1&o&&e._UZ(0,"app-skeleton-table")}function H(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",20),e._uU(1),e._UZ(2,"img",21),e._uU(3),e.TgZ(4,"small"),e._uU(5),e.qZA(),e.TgZ(6,"button",22),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw(2).deleteApiGenerator(i.id)}),e.SDv(7,23),e.qZA(),e.qZA()}if(2&o){const t=s.$implicit;e.xp6(1),e.hij(" ",t.id," - "),e.xp6(1),e.Q6J("src",t.logoUri,e.LSH),e.xp6(1),e.lnq(" ",t.name," - ",t.version," ",t.createDate," "),e.xp6(2),e.Oqu(t.summary)}}function j(o,s){if(1&o&&(e.TgZ(0,"div",18),e.YNc(1,H,8,6,"div",19),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.data)}}let K=(()=>{class o{constructor(t,n){this.codegen=t,this.apiCodeGen=n,this.onemit=new e.vpe,this.codeGens={skip:0,take:9999,data:[],total:0},this.selectedAction={}}ngOnChanges(){this.getData()}getData(){this.loading=!0;var t=this.codegen.CodeGenMarket("",this.codeGens.skip,this.codeGens.take),n=this.codegen.CodeGens(this.codeGens.skip,this.codeGens.take),_=this.apiCodeGen.ApiCodeGens(this.item.id,this.codeGens.skip,this.codeGens.take);(0,X.D)([t,_,n]).subscribe(i=>{this.loading=!1;var l=i[0].data.data.concat(i[2].data.data),c=[...new Set(l.map(d=>d.id))];this.codeGens.data=c.map(d=>l.filter(p=>p.id==d)[0]),this.data=i[1].data.data.map(d=>{var p=i[0].data.data.filter(u=>u.id==d.codeGeneratorID)[0];return p?{id:d.id,name:p.name,version:p.version,logoUri:p.logoUri,summary:p.summary}:d})})}close(){this.onemit.emit("Generators")}AddApiGenerator(){this.apiCodeGen.ApiCodeGenPost({apiID:this.item.id,codeGeneratorID:this.selectedCodeGenID}).subscribe(t=>{this.getData()})}deleteApiGenerator(t){this.apiCodeGen.ApiCodeGenDelete(t).subscribe(n=>{this.getData()})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f),e.Y36(Q))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-apis-codegenerators"]],inputs:{item:"item"},outputs:{onemit:"onemit"},features:[e.TTD],decls:18,vars:5,consts:function(){let s,t;return s=$localize`:@@添加:添加`,t=$localize`:@@删除:删除`,[[1,"position-fixed","slidePannel","shadow","border","border-right-0","bg-white"],[1,"app-setting-main"],[1,"modal-header"],[1,"mb-0"],["type","button","matRipple","",1,"btn-close",3,"click"],[1,"modal-body"],[1,"page-header"],[1,"row","align-items-center"],[1,"col-auto"],[1,"btn-group"],[1,"form-select","mx-2",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","button","translate","",1,"btn","btn-white",3,"click"],s,[1,"mt-2"],[4,"ngIf"],["class","table-responsive m-0 border border-bottom-0",4,"ngIf"],[3,"value"],[1,"table-responsive","m-0","border","border-bottom-0"],["class","p-2 border-bottom",4,"ngFor","ngForOf"],[1,"p-2","border-bottom"],["onerror","this.src='./assets/codegen_default.png'",1,"avatar","avatar-sm",3,"src"],["type","button","matRipple","","translate","",1,"btn","btn-light","mx-2",3,"click"],t]},template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h2",3),e._uU(4),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return n.close()}),e.qZA(),e.qZA(),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"div",8),e.TgZ(10,"div",9),e.TgZ(11,"select",10),e.NdJ("ngModelChange",function(i){return n.selectedCodeGenID=i}),e.YNc(12,z,2,3,"option",11),e.qZA(),e.TgZ(13,"button",12),e.NdJ("click",function(){return n.AddApiGenerator()}),e.SDv(14,13),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",14),e.YNc(16,Y,1,0,"app-skeleton-table",15),e.YNc(17,j,2,1,"div",16),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Oqu(n.item.name),e.xp6(7),e.Q6J("ngModel",n.selectedCodeGenID),e.xp6(1),e.Q6J("ngForOf",n.codeGens.data),e.xp6(4),e.Q6J("ngIf",n.loading),e.xp6(1),e.Q6J("ngIf",!n.loading))},directives:[T.wG,r.EJ,r.JJ,r.On,E.sg,C.Pi,E.O5,r.YN,r.Kr,B.i],styles:[""]}),o})();var P=a(4954);const O=function(o){return{"text-decoration-underline":o}};let D=(()=>{class o{constructor(){}ngOnInit(){}togglePannel(t){this.onemit.emit("toggle:"+t)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-apis-menus"]],inputs:{onemit:"onemit",pannelName:"pannelName"},decls:7,vars:9,consts:function(){let s,t,n;return s=$localize`:@@基本信息:基本信息`,t=$localize`:@@模板配置:模板配置`,n=$localize`:@@文件管理:文件管理`,[[1,"nav","nav-pills","nav-fill","flex-column","flex-sm-row","border-bottom"],["matRipple","","href","javascript:void(0)","translate","",1,"btn","btn-link","flex-fill","text-dark",3,"ngClass","click"],s,t,n]},template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"a",1),e.NdJ("click",function(){return n.togglePannel("Setting")}),e.SDv(2,2),e.qZA(),e.TgZ(3,"a",1),e.NdJ("click",function(){return n.togglePannel("Property")}),e.SDv(4,3),e.qZA(),e.TgZ(5,"a",1),e.NdJ("click",function(){return n.togglePannel("Blob")}),e.SDv(6,4),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngClass",e.VKq(3,O,"Setting"==n.pannelName)),e.xp6(2),e.Q6J("ngClass",e.VKq(5,O,"Property"==n.pannelName)),e.xp6(2),e.Q6J("ngClass",e.VKq(7,O,"Blob"==n.pannelName)))},directives:[T.wG,C.Pi,E.mk],styles:[""]}),o})(),V=(()=>{class o{constructor(t,n){this.serv=t,this.blobServ=n,this.onemit=new e.vpe}ngOnChanges(){}close(){this.onemit.emit("Setting")}updateApi(){var t=this;return(0,N.Z)(function*(){!(yield g.R.fire({icon:"question",titleText:"\u662f\u5426\u786e\u8ba4\uff1f",showCancelButton:!0})).isConfirmed||t.serv.ApiPut(t.item.id,t.item).subscribe(_=>{g.F.fire({icon:"success",titleText:"\u66f4\u65b0\u6210\u529f"})})})()}UploadLogoUri(t){var n=new FormData;n.append("file",t.currentTarget.files[0]),this.blobServ.TenantBlobUpload("api",this.item.id,n).subscribe(_=>{200==_.code?this.item.logoUri=_.data:g.F.fire({icon:"error",titleText:_.err})})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Z.Q),e.Y36(P.R))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-apis-setting"]],inputs:{item:"item"},outputs:{onemit:"onemit"},features:[e.TTD],decls:49,vars:11,consts:function(){let s,t,n,_,i,l,c,d;return s=$localize`:@@图标:图标`,t=$localize`:@@名称:名称`,n=$localize`:@@网站地址:网站地址`,_=$localize`:@@标签:标签`,i=$localize`:@@简介:简介`,l=$localize`:@@描述:描述`,c=$localize`:@@显示:显示`,d=$localize`:@@更新:更新`,[[1,"position-fixed","slidePannel","shadow","border","border-right-0","bg-white"],[1,"app-setting-main"],[1,"modal-header"],[1,"mb-0"],["type","button","matRipple","",1,"btn-close",3,"click"],[3,"pannelName","onemit"],[1,"modal-body","pt-2"],[1,"m-2"],[1,"mb-3"],[1,"form-label"],["translate","",1,"form-label"],s,["width","32px","onclick","document.getElementById('uploadLogoUri').click()",3,"src"],["type","file","id","uploadLogoUri",1,"d-none",3,"change"],t,["type","text",1,"form-control",3,"ngModel","ngModelChange"],n,_,i,l,["rows","5",1,"form-control",3,"ngModel","ngModelChange"],c,[1,"form-check","form-switch"],["type","checkbox","role","switch",1,"form-check-input",3,"ngModel","ngModelChange"],["type","button","translate","",1,"btn","btn-indigo",3,"click"],d,["type","button","matRipple","","translate","",1,"btn","btn-white","mx-2",3,"click"]]},template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h2",3),e._uU(4),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return n.close()}),e.qZA(),e.qZA(),e._UZ(6,"app-apis-menus",5),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"div",8),e.TgZ(10,"label",9),e._uU(11,"ApiKey"),e.qZA(),e.TgZ(12,"code"),e._uU(13),e.qZA(),e.qZA(),e.TgZ(14,"div",8),e.TgZ(15,"label",10),e.SDv(16,11),e.qZA(),e._UZ(17,"img",12),e.TgZ(18,"input",13),e.NdJ("change",function(i){return n.UploadLogoUri(i)}),e.qZA(),e.qZA(),e.TgZ(19,"div",8),e.TgZ(20,"label",10),e.SDv(21,14),e.qZA(),e.TgZ(22,"input",15),e.NdJ("ngModelChange",function(i){return n.item.name=i}),e.qZA(),e.qZA(),e.TgZ(23,"div",8),e.TgZ(24,"label",10),e.SDv(25,16),e.qZA(),e.TgZ(26,"input",15),e.NdJ("ngModelChange",function(i){return n.item.webSite=i}),e.qZA(),e.qZA(),e.TgZ(27,"div",8),e.TgZ(28,"label",10),e.SDv(29,17),e.qZA(),e.TgZ(30,"input",15),e.NdJ("ngModelChange",function(i){return n.item.tags=i}),e.qZA(),e.qZA(),e.TgZ(31,"div",8),e.TgZ(32,"label",10),e.SDv(33,18),e.qZA(),e.TgZ(34,"input",15),e.NdJ("ngModelChange",function(i){return n.item.summary=i}),e.qZA(),e.qZA(),e.TgZ(35,"div",8),e.TgZ(36,"label",10),e.SDv(37,19),e.qZA(),e.TgZ(38,"textarea",20),e.NdJ("ngModelChange",function(i){return n.item.description=i}),e.qZA(),e.qZA(),e.TgZ(39,"div",8),e.TgZ(40,"label",10),e.SDv(41,21),e.qZA(),e.TgZ(42,"div",22),e.TgZ(43,"input",23),e.NdJ("ngModelChange",function(i){return n.item.show=i}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(44,"div",8),e.TgZ(45,"button",24),e.NdJ("click",function(){return n.updateApi()}),e.SDv(46,25),e.qZA(),e.TgZ(47,"button",26),e.NdJ("click",function(){return n.close()}),e._uU(48,"\u5173\u95ed"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Oqu(n.item.name),e.xp6(2),e.Q6J("pannelName","Setting")("onemit",n.onemit),e.xp6(7),e.Oqu(n.item.apiKey),e.xp6(4),e.s9C("src",n.item.logoUri,e.LSH),e.xp6(5),e.Q6J("ngModel",n.item.name),e.xp6(4),e.Q6J("ngModel",n.item.webSite),e.xp6(4),e.Q6J("ngModel",n.item.tags),e.xp6(4),e.Q6J("ngModel",n.item.summary),e.xp6(4),e.Q6J("ngModel",n.item.description),e.xp6(5),e.Q6J("ngModel",n.item.show))},directives:[T.wG,D,C.Pi,r.Fj,r.JJ,r.On,r.Wl],styles:[""]}),o})();var v=a(4602),b=a(2476);let W=(()=>{class o{constructor(t){this.serv=t,this.onemit=new e.vpe,this.data=[]}close(){this.onemit.emit("Property")}onEditorEmit(t){t.input.id?this.serv.PropertySettingPut(t.input.id,t.input).subscribe(n=>{g.F.fire({icon:"success",titleText:"\u8bbe\u7f6e\u6210\u529f\uff01"})}):this.serv.PropertySettingPost({channelCode:"api",channelAppId:this.item.id,name:t.value,value:t.input.value}).subscribe(n=>{g.F.fire({icon:"success",titleText:"\u8bbe\u7f6e\u6210\u529f\uff01"})})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(v.I))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-apis-property"]],inputs:{item:"item"},outputs:{onemit:"onemit"},decls:9,vars:5,consts:[[1,"position-fixed","slidePannel","shadow","border","border-right-0","bg-white"],[1,"app-setting-main"],[1,"modal-header"],[1,"mb-0"],["type","button","matRipple","",1,"btn-close",3,"click"],[3,"pannelName","onemit"],[1,"modal-body","pt-2"],[3,"item","bizCode","onemit"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h2",3),e._uU(4),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return n.close()}),e.qZA(),e.qZA(),e._UZ(6,"app-apis-menus",5),e.TgZ(7,"div",6),e.TgZ(8,"app-property-editor",7),e.NdJ("onemit",function(i){return n.onEditorEmit(i)}),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Oqu(n.item.name),e.xp6(2),e.Q6J("pannelName","Property")("onemit",n.onemit),e.xp6(2),e.Q6J("item",n.item)("bizCode","api"))},directives:[T.wG,D,b.X],styles:[""]}),o})();var R=a(1802);let ee=(()=>{class o{constructor(){this.onemit=new e.vpe}close(){this.onemit.emit("Blob")}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-apis-blobs"]],inputs:{item:"item"},outputs:{onemit:"onemit"},decls:9,vars:5,consts:[[1,"position-fixed","slidePannel","shadow","border","border-right-0","bg-white"],[1,"app-setting-main"],[1,"modal-header"],[1,"mb-0"],["type","button","matRipple","",1,"btn-close",3,"click"],[3,"pannelName","onemit"],[1,"modal-body","pt-2"],[3,"item","bizCode"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h2",3),e._uU(4),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return n.close()}),e.qZA(),e.qZA(),e._UZ(6,"app-apis-menus",5),e.TgZ(7,"div",6),e._UZ(8,"app-blob-editor",7),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Oqu(n.item.name),e.xp6(2),e.Q6J("pannelName","Blob")("onemit",n.onemit),e.xp6(2),e.Q6J("item",n.item)("bizCode","api"))},directives:[T.wG,D,R.B],styles:[""]}),o})();var L=a(8789),q=a(4506),y=a(9286);function te(o,s){1&o&&e._UZ(0,"option",19),2&o&&e.s9C("value",s.$implicit.name)}function ne(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"app-apis-codegenerators",20),e.NdJ("onemit",function(_){return e.CHM(t),e.oxw().onPannelEmit(_)}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("item",t.selectedCodeGen)}}function oe(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"app-apis-setting",20),e.NdJ("onemit",function(_){return e.CHM(t),e.oxw().onPannelEmit(_)}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("item",t.selectedCodeGen)}}function _e(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"app-apis-property",20),e.NdJ("onemit",function(_){return e.CHM(t),e.oxw().onPannelEmit(_)}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("item",t.selectedCodeGen)}}function ie(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"app-apis-blobs",20),e.NdJ("onemit",function(_){return e.CHM(t),e.oxw().onPannelEmit(_)}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("item",t.selectedCodeGen)}}function se(o,s){1&o&&e._UZ(0,"app-skeleton-cards3")}function re(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",2),e.TgZ(1,"div",24),e.TgZ(2,"div",25),e.TgZ(3,"span",26),e._uU(4),e.qZA(),e.TgZ(5,"div",27),e.TgZ(6,"button",28),e._UZ(7,"i",29),e.TgZ(8,"font",6),e.SDv(9,30),e.qZA(),e.qZA(),e.TgZ(10,"div",31),e.TgZ(11,"a",32),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw(2).delApi(i.id)}),e.SDv(12,33),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",34),e.TgZ(14,"div",35),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw(2).showPannel("Setting",i)}),e.TgZ(15,"a",36),e._UZ(16,"img",37),e.qZA(),e.qZA(),e.TgZ(17,"div",38),e.TgZ(18,"h4"),e._uU(19),e.qZA(),e.qZA(),e.TgZ(20,"div",39),e.TgZ(21,"div",40),e.TgZ(22,"div",41),e.TgZ(23,"button",42),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw(2).showPannel("Generators",i)}),e.SDv(24,43),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=s.$implicit;e.xp6(4),e.Oqu(t.name),e.xp6(12),e.Q6J("src",t.logoUri,e.LSH),e.xp6(3),e.hij("ApiKey\uff1a",t.apiKey,"")}}const le=function(o){return{name:o}};function ae(o,s){if(1&o&&(e.TgZ(0,"div",21),e.YNc(1,re,25,3,"div",22),e.ALo(2,"propertyFilter"),e.qZA(),e._UZ(3,"app-nodata",23)),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.xi3(2,3,t.data.data,e.VKq(6,le,t.nameFilter))),e.xp6(2),e.Q6J("show",t.data.data.length<1)("className","pt-5")}}function de(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",44),e.TgZ(1,"div",45),e.TgZ(2,"button",42),e.NdJ("click",function(){return e.CHM(t),e.oxw().loadMore()}),e.SDv(3,46),e.qZA(),e.qZA(),e.qZA()}}const pe=function(){return["/apis/add"]};let ge=(()=>{class o{constructor(t,n){this.serv=t,this.translate=n,this.Pannels={Generators:!1,Setting:!1,Property:!1,Blob:!1},this.data={skip:0,take:9999,data:[],total:0},this.loading=!1}onPannelEmit(t){"getData"==t?this.getData():t.indexOf("toggle:")>-1?(Object.keys(this.Pannels).forEach(n=>{this.Pannels[n]=!1}),this.Pannels[t.split(":")[1]]=!0):this.Pannels[t]=!1}showPannel(t,n){Object.keys(this.Pannels).forEach(_=>{this.Pannels[_]=!1}),this.Pannels[t]=!0,this.selectedCodeGen=n}ngOnInit(){this.getData()}getData(){this.loading=!0,this.serv.Apis(this.data.skip,this.data.take).subscribe(t=>{this.loading=!1,this.data.total=t.data.total,this.data.data=this.data.data.concat(t.data.data)})}delApi(t){var n=this;return(0,N.Z)(function*(){!(yield g.R.fire({icon:"warning",titleText:n.translate.instant("\u662f\u5426\u786e\u8ba4\u5220\u9664?"),showCancelButton:!0})).isConfirmed||n.serv.ApiDelete(t).subscribe(i=>{n.getData()})})()}loadMore(){this.data.skip+=this.data.take,this.getData()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Z.Q),e.Y36(C.sK))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-codegen"]],decls:25,vars:12,consts:function(){let s,t,n,_,i,l;return s=$localize`:@@模板:模板`,t=$localize`:@@条数据:条数据`,n=$localize`:@@管理:管理`,_=$localize`:@@删除:删除`,i=$localize`:@@生成器: 生成器 `,l=$localize`:@@加载更多...:加载更多...`,[[1,"page-header","mt-0","mb-3"],[1,"row","align-items-center"],[1,"col"],["translate","",1,"page-title"],s,[1,"text-muted","mt-1"],["translate",""],t,[1,"col-auto","ms-auto","d-print-none"],[1,"d-flex"],[1,"me-3","d-none","d-md-block"],["list","datalistOptions",1,"form-control",3,"ngModel","ngModelChange"],["id","datalistOptions"],[3,"value",4,"ngFor","ngForOf"],["matRipple","","translate","",1,"btn","btn-white",3,"routerLink"],[3,"item","onemit",4,"ngIf"],[4,"ngIf","ngIfElse"],["templateName",""],["class","d-grid",4,"ngIf"],[3,"value"],[3,"item","onemit"],[1,"row","row-cols-1","row-cols-lg-3","row-cols-md-2","row-cols-sm-1","g-4"],["class","col",4,"ngFor","ngForOf"],[3,"show","className"],[1,"card","shadow"],[1,"card-header","d-flex"],[1,"w-100"],[1,"btn-group"],["type","button","data-bs-toggle","dropdown","aria-haspopup","true","aria-expanded","false","matRipple","",1,"btn","btn-white","dropdown-toggle"],[1,"fa","fa-mixcloud"],n,[1,"dropdown-menu","dropdown-menu-right","dropdown-menu-lg-left"],["href","javascript:void(0)","translate","","matRipple","",1,"dropdown-item","text-danger",3,"click"],_,[1,"card-body","text-center"],["matRipple","",1,"my-2",3,"click"],["href","javascript:void(0);"],["width","128px",3,"src"],[1,"my-3","d-grid","overflow-hidden"],[1,"d-flex","flex-row","align-items-center","align-self-center","align-content-center","flex-wrap"],[1,"flex-fill"],[1,"d-grid","mx-1"],["type","button","matRipple","","translate","",1,"btn","btn-white",3,"click"],i,[1,"d-grid"],[1,"text-center","mt-5"],l]},template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h2",3),e.SDv(4,4),e.qZA(),e.TgZ(5,"div",5),e._uU(6),e.TgZ(7,"span",6),e.SDv(8,7),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",8),e.TgZ(10,"div",9),e.TgZ(11,"div",10),e.TgZ(12,"input",11),e.NdJ("ngModelChange",function(i){return n.nameFilter=i}),e.qZA(),e.TgZ(13,"datalist",12),e.YNc(14,te,1,1,"option",13),e.qZA(),e.qZA(),e.TgZ(15,"a",14),e._uU(16,"\u521b\u5efa"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(17,ne,1,1,"app-apis-codegenerators",15),e.YNc(18,oe,1,1,"app-apis-setting",15),e.YNc(19,_e,1,1,"app-apis-property",15),e.YNc(20,ie,1,1,"app-apis-blobs",15),e.YNc(21,se,1,0,"app-skeleton-cards3",16),e.YNc(22,ae,4,8,"ng-template",null,17,e.W1O),e.YNc(24,de,4,0,"div",18)),2&t){const _=e.MAs(23);e.xp6(6),e.Oqu(n.data.total),e.xp6(6),e.Q6J("ngModel",n.nameFilter),e.xp6(2),e.Q6J("ngForOf",n.data.data),e.xp6(1),e.Q6J("routerLink",e.DdM(11,pe)),e.xp6(2),e.Q6J("ngIf",n.Pannels.Generators),e.xp6(1),e.Q6J("ngIf",n.Pannels.Setting),e.xp6(1),e.Q6J("ngIf",n.Pannels.Property),e.xp6(1),e.Q6J("ngIf",n.Pannels.Blob),e.xp6(1),e.Q6J("ngIf",n.loading)("ngIfElse",_),e.xp6(3),e.Q6J("ngIf",n.data.data.length<n.data.total)}},directives:[C.Pi,r.Fj,r.JJ,r.On,E.sg,S.yS,T.wG,E.O5,r.YN,r.Kr,K,V,W,ee,L.O,q.H],pipes:[y.K],styles:[""]}),o})(),ce=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-apis-subscribers"]],decls:2,vars:0,template:function(t,n){1&t&&(e.TgZ(0,"p"),e._uU(1,"codegen-subscribers works!"),e.qZA())},styles:[""]}),o})();const I=function(o){return{"text-decoration-underline":o}};let G=(()=>{class o{constructor(){}ngOnInit(){}togglePannel(t){this.onemit.emit("toggle:"+t)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-codegen-menus"]],inputs:{onemit:"onemit",pannelName:"pannelName"},decls:7,vars:9,consts:function(){let s,t,n;return s=$localize`:@@基本信息:基本信息`,t=$localize`:@@生成器配置:生成器配置`,n=$localize`:@@文件管理:文件管理`,[[1,"nav","nav-pills","nav-fill","flex-column","flex-sm-row","border-bottom"],["matRipple","","href","javascript:void(0)","translate","",1,"btn","btn-link","flex-fill","text-dark",3,"ngClass","click"],s,t,n]},template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"a",1),e.NdJ("click",function(){return n.togglePannel("Setting")}),e.SDv(2,2),e.qZA(),e.TgZ(3,"a",1),e.NdJ("click",function(){return n.togglePannel("Property")}),e.SDv(4,3),e.qZA(),e.TgZ(5,"a",1),e.NdJ("click",function(){return n.togglePannel("Blob")}),e.SDv(6,4),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngClass",e.VKq(3,I,"Setting"==n.pannelName)),e.xp6(2),e.Q6J("ngClass",e.VKq(5,I,"Property"==n.pannelName)),e.xp6(2),e.Q6J("ngClass",e.VKq(7,I,"Blob"==n.pannelName)))},directives:[T.wG,C.Pi,E.mk],styles:[""]}),o})();function ue(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",9),e.TgZ(1,"label",10),e.SDv(2,33),e.qZA(),e._UZ(3,"img",34),e.TgZ(4,"input",35),e.NdJ("change",function(_){return e.CHM(t),e.oxw().UploadLogoUri(_)}),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(3),e.s9C("src",t.item.logoUri,e.LSH)}}let Ae=(()=>{class o{constructor(t,n){this.serv=t,this.blobServ=n,this.onemit=new e.vpe}ngOnChanges(){}close(){this.onemit.emit("Setting")}showCodeEditor(){this.onemit.emit("CodeEditor"),this.onemit.emit("Setting")}updateCodeGen(){var t=this;return(0,N.Z)(function*(){!(yield g.R.fire({icon:"question",titleText:"\u662f\u5426\u786e\u8ba4\u63d0\u4ea4\uff1f",showCancelButton:!0})).isConfirmed||(t.item.id<1?t.serv.CodeGenPost(t.item).subscribe(_=>{t.close(),t.onemit.emit("getData")}):t.serv.CodeGenPut(t.item.id,t.item).subscribe(_=>{g.F.fire({icon:"success",titleText:"\u66f4\u65b0\u6210\u529f\uff01"})}))})()}UploadLogoUri(t){var n=new FormData;n.append("file",t.currentTarget.files[0]),this.blobServ.TenantBlobUpload("codegen",this.item.id,n).subscribe(_=>{200==_.code?this.item.logoUri=_.data:g.F.fire({icon:"error",titleText:_.err})})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f),e.Y36(P.R))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-codegen-setting"]],inputs:{item:"item"},outputs:{onemit:"onemit"},features:[e.TTD],decls:55,vars:12,consts:function(){let s,t,n,_,i,l,c,d,p,u,J,k;return s=$localize`:@@名称:名称`,t=$localize`:@@标签:标签`,n=$localize`:@@版本:版本`,_=$localize`:@@简介:简介`,i=$localize`:@@描述:描述`,l=$localize`:@@代码:代码`,c=$localize`:@@编辑器:编辑器`,d=$localize`:@@共享:共享`,p=$localize`:@@启用:启用`,u=$localize`:@@更新:更新`,J=$localize`:@@关闭:关闭`,k=$localize`:@@图标:图标`,[[1,"position-fixed","slidePannel","shadow","border","border-right-0","bg-white"],[1,"app-setting-main"],[1,"modal-header"],[1,"mb-0"],["type","button","matRipple","",1,"btn-close",3,"click"],[3,"pannelName","onemit"],[1,"modal-body","pt-2"],[1,"m-2"],["class","mb-3",4,"ngIf"],[1,"mb-3"],["translate","",1,"form-label"],s,["type","text",1,"form-control",3,"ngModel","ngModelChange"],t,n,_,i,["rows","5",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-label"],["translate",""],l,["href","javascript:void(0)","matRipple","",3,"click"],["width","16","height","16"],[0,"xlink","href","./assets/icons/tabler-sprite.svg#tabler-pencil"],c,d,[1,"form-check","form-switch"],["type","checkbox","role","switch",1,"form-check-input",3,"ngModel","ngModelChange"],p,["type","button","translate","",1,"btn","btn-indigo",3,"click"],u,["type","button","matRipple","","translate","",1,"btn","btn-white","mx-2",3,"click"],J,k,["width","32px","onclick","document.getElementById('uploadLogoUri').click()",1,"avatar",3,"src"],["type","file","id","uploadLogoUri",1,"d-none",3,"change"]]},template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h2",3),e._uU(4),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return n.close()}),e.qZA(),e.qZA(),e._UZ(6,"app-codegen-menus",5),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.YNc(9,ue,5,1,"div",8),e.TgZ(10,"div",9),e.TgZ(11,"label",10),e.SDv(12,11),e.qZA(),e.TgZ(13,"input",12),e.NdJ("ngModelChange",function(i){return n.item.name=i}),e.qZA(),e.qZA(),e.TgZ(14,"div",9),e.TgZ(15,"label",10),e.SDv(16,13),e.qZA(),e.TgZ(17,"input",12),e.NdJ("ngModelChange",function(i){return n.item.tag=i}),e.qZA(),e.qZA(),e.TgZ(18,"div",9),e.TgZ(19,"label",10),e.SDv(20,14),e.qZA(),e.TgZ(21,"input",12),e.NdJ("ngModelChange",function(i){return n.item.version=i}),e.qZA(),e.qZA(),e.TgZ(22,"div",9),e.TgZ(23,"label",10),e.SDv(24,15),e.qZA(),e.TgZ(25,"input",12),e.NdJ("ngModelChange",function(i){return n.item.summary=i}),e.qZA(),e.qZA(),e.TgZ(26,"div",9),e.TgZ(27,"label",10),e.SDv(28,16),e.qZA(),e.TgZ(29,"textarea",17),e.NdJ("ngModelChange",function(i){return n.item.description=i}),e.qZA(),e.qZA(),e.TgZ(30,"div",9),e.TgZ(31,"label",18),e.TgZ(32,"span",19),e.SDv(33,20),e.qZA(),e.TgZ(34,"a",21),e.NdJ("click",function(){return n.showCodeEditor()}),e.O4$(),e.TgZ(35,"svg",22),e._UZ(36,"use",23),e.qZA(),e.kcU(),e.TgZ(37,"span",19),e.SDv(38,24),e.qZA(),e.qZA(),e.qZA(),e.TgZ(39,"textarea",17),e.NdJ("ngModelChange",function(i){return n.item.sourceCode=i}),e.qZA(),e.qZA(),e.TgZ(40,"div",9),e.TgZ(41,"label",10),e.SDv(42,25),e.qZA(),e.TgZ(43,"div",26),e.TgZ(44,"input",27),e.NdJ("ngModelChange",function(i){return n.item.share=i}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(45,"div",9),e.TgZ(46,"label",10),e.SDv(47,28),e.qZA(),e.TgZ(48,"div",26),e.TgZ(49,"input",27),e.NdJ("ngModelChange",function(i){return n.item.show=i}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(50,"div",9),e.TgZ(51,"button",29),e.NdJ("click",function(){return n.updateCodeGen()}),e.SDv(52,30),e.qZA(),e.TgZ(53,"button",31),e.NdJ("click",function(){return n.close()}),e.SDv(54,32),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Oqu(n.item.name),e.xp6(2),e.Q6J("pannelName","Setting")("onemit",n.onemit),e.xp6(3),e.Q6J("ngIf",n.item.id>0),e.xp6(4),e.Q6J("ngModel",n.item.name),e.xp6(4),e.Q6J("ngModel",n.item.tag),e.xp6(4),e.Q6J("ngModel",n.item.version),e.xp6(4),e.Q6J("ngModel",n.item.summary),e.xp6(4),e.Q6J("ngModel",n.item.description),e.xp6(10),e.Q6J("ngModel",n.item.sourceCode),e.xp6(5),e.Q6J("ngModel",n.item.share),e.xp6(5),e.Q6J("ngModel",n.item.show))},directives:[T.wG,G,E.O5,C.Pi,r.Fj,r.JJ,r.On,r.Wl],styles:[""]}),o})(),Ee=(()=>{class o{constructor(t){this.serv=t,this.onemit=new e.vpe,this.data=[]}close(){this.onemit.emit("Property")}onEditorEmit(t){console.log(t),t.input.id?this.serv.PropertySettingPut(t.input.id,t.input).subscribe(n=>{g.F.fire({icon:"success",titleText:"\u8bbe\u7f6e\u6210\u529f\uff01"})}):this.serv.PropertySettingPost({channelCode:"codegen",channelAppId:this.item.id,name:t.value,value:t.input.value}).subscribe(n=>{g.F.fire({icon:"success",titleText:"\u8bbe\u7f6e\u6210\u529f\uff01"})})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(v.I))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-codegen-property"]],inputs:{item:"item"},outputs:{onemit:"onemit"},decls:9,vars:5,consts:[[1,"position-fixed","slidePannel","shadow","border","border-right-0","bg-white"],[1,"app-setting-main"],[1,"modal-header"],[1,"mb-0"],["type","button","matRipple","",1,"btn-close",3,"click"],[3,"pannelName","onemit"],[1,"modal-body","pt-2"],[3,"item","bizCode","onemit"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h2",3),e._uU(4),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return n.close()}),e.qZA(),e.qZA(),e._UZ(6,"app-codegen-menus",5),e.TgZ(7,"div",6),e.TgZ(8,"app-property-editor",7),e.NdJ("onemit",function(i){return n.onEditorEmit(i)}),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Oqu(n.item.name),e.xp6(2),e.Q6J("pannelName","Property")("onemit",n.onemit),e.xp6(2),e.Q6J("item",n.item)("bizCode","codegen"))},directives:[T.wG,G,b.X],styles:[""]}),o})(),Ce=(()=>{class o{constructor(){this.onemit=new e.vpe}close(){this.onemit.emit("Blob")}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-codegen-blobs"]],inputs:{item:"item"},outputs:{onemit:"onemit"},decls:9,vars:5,consts:[[1,"position-fixed","slidePannel","shadow","border","border-right-0","bg-white"],[1,"app-setting-main"],[1,"modal-header"],[1,"mb-0"],["type","button","matRipple","",1,"btn-close",3,"click"],[3,"pannelName","onemit"],[1,"modal-body","pt-2"],[3,"item","bizCode"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h2",3),e._uU(4),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return n.close()}),e.qZA(),e.qZA(),e._UZ(6,"app-codegen-menus",5),e.TgZ(7,"div",6),e._UZ(8,"app-blob-editor",7),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Oqu(n.item.name),e.xp6(2),e.Q6J("pannelName","Blob")("onemit",n.onemit),e.xp6(2),e.Q6J("item",n.item)("bizCode","codegen"))},directives:[T.wG,G,R.B],styles:[""]}),o})();function Te(o,s){1&o&&e._UZ(0,"option",33),2&o&&e.s9C("value",s.$implicit.name)}function me(o,s){1&o&&e._UZ(0,"app-skeleton-cards3")}function Se(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",2),e.TgZ(1,"div",37),e.TgZ(2,"div",38),e.TgZ(3,"span",39),e._uU(4),e.qZA(),e.TgZ(5,"div",40),e.TgZ(6,"button",41),e._UZ(7,"i",42),e.TgZ(8,"font",6),e.SDv(9,43),e.qZA(),e.qZA(),e.TgZ(10,"div",44),e.TgZ(11,"a",45),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw(2).deleteGenerator(i.id)}),e.SDv(12,46),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",47),e.TgZ(14,"div",48),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw(2).showPannel("Setting",i)}),e.TgZ(15,"a",49),e._UZ(16,"img",50),e.qZA(),e.qZA(),e.TgZ(17,"div",51),e.TgZ(18,"h4"),e.TgZ(19,"span",6),e.SDv(20,52),e.qZA(),e._uU(21),e.qZA(),e.qZA(),e.TgZ(22,"div",53),e.TgZ(23,"div",54),e.TgZ(24,"div",55),e.TgZ(25,"button",56),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw(2).showObjectView(i)}),e.SDv(26,57),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=s.$implicit;e.xp6(4),e.Oqu(t.name),e.xp6(12),e.Q6J("src",t.logoUri,e.LSH),e.xp6(5),e.hij("\uff1a",t.version,"")}}const Ne=function(o){return{name:o}};function Me(o,s){if(1&o&&(e.TgZ(0,"div",34),e.YNc(1,Se,27,3,"div",35),e.ALo(2,"propertyFilter"),e.qZA(),e._UZ(3,"app-nodata",36)),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.xi3(2,3,t.data.data,e.VKq(6,Ne,t.nameFilter))),e.xp6(2),e.Q6J("show",t.data.data.length<1)("className","pt-5")}}function Pe(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",58),e.TgZ(1,"div",59),e.TgZ(2,"button",56),e.NdJ("click",function(){return e.CHM(t),e.oxw().loadMore()}),e.SDv(3,60),e.qZA(),e.qZA(),e.qZA()}}function fe(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"app-codegen-setting",61),e.NdJ("onemit",function(_){return e.CHM(t),e.oxw().onPannelEmit(_)}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("item",t.selectedGenerator)}}function Ze(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"app-codegen-property",61),e.NdJ("onemit",function(_){return e.CHM(t),e.oxw().onPannelEmit(_)}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("item",t.selectedGenerator)}}function Oe(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"app-codegen-blobs",61),e.NdJ("onemit",function(_){return e.CHM(t),e.oxw().onPannelEmit(_)}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("item",t.selectedGenerator)}}const De=function(){return["/apis/codegens/add"]};let Ie=(()=>{class o{constructor(t,n,_){this.serv=t,this.tenantBlob=n,this.translate=_,this.Pannels={Property:!1,Setting:!1,Blob:!1},this.nameFilter="",this.selectedGenerator={},this.settingToggle=0,this.loading=!1,this.data={skip:0,take:9999,data:[],total:0}}ngOnInit(){this.getData()}getData(){this.loading=!0,this.serv.CodeGens(this.data.skip,this.data.take).subscribe(t=>{this.loading=!1,this.data.total=t.data.total,this.data.data=this.data.data.concat(t.data.data)})}loadMore(){this.data.skip+=this.data.take,this.getData()}UploadLogoUri(t){var n=new FormData;n.append("file",t.currentTarget.files[0]),this.tenantBlob.TenantBlobUpload("codegen",this.selectedGenerator.id,n).subscribe(_=>{200==_.code?this.selectedGenerator.logoUri=_.data:g.F.fire({icon:"error",titleText:_.err})})}updateGenerator(){var t=this;return(0,N.Z)(function*(){!(yield g.R.fire({icon:"question",title:t.translate.instant("\u662f\u5426\u786e\u8ba4\u63d0\u4ea4\uff1f"),showCancelButton:!0})).isConfirmed||t.serv.CodeGenPut(t.selectedGenerator.id,t.selectedGenerator).subscribe(_=>{g.F.fire({icon:"success",titleText:t.translate.instant("\u66f4\u65b0\u6210\u529f\uff01")})})})()}deleteGenerator(t){var n=this;return(0,N.Z)(function*(){!(yield g.R.fire({icon:"question",title:n.translate.instant("\u662f\u5426\u786e\u8ba4\u5220\u9664\uff1f"),showCancelButton:!0})).isConfirmed||n.serv.CodeGenDelete(t).subscribe(i=>{n.getData()})})()}showObjectView(t){$("#ObjectViewModal").modal("show"),this.selectedGenerator=t,this.setEditorValue(this.selectedGenerator.sourceCode||"")}showSettingView(t){$("#SettingViewModal").modal("show"),this.selectedGenerator=t}setEditorValue(t=""){var n=this;null==this.CodeMirrorEditor&&(this.CodeMirrorEditor=CodeMirror.fromTextArea(document.getElementById("code"),{mode:"javascript",lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,continueComments:"Enter",extraKeys:{},foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]}),this.CodeMirrorEditor.on("change",function(_,i){try{n.selectedGenerator.sourceCode=n.CodeMirrorEditor.getValue()||""}catch(l){}n.CodeMirrorEditor.setSize("auto","595px")})),this.CodeMirrorEditor.setValue(t)}showPannel(t,n){Object.keys(this.Pannels).forEach(_=>{this.Pannels[_]=!1}),this.Pannels[t]=!0,this.selectedGenerator=n}onPannelEmit(t){"getData"==t?this.getData():"CodeEditor"==t?this.showObjectView(this.selectedGenerator):t.indexOf("toggle:")>-1?(Object.keys(this.Pannels).forEach(n=>{this.Pannels[n]=!1}),this.Pannels[t.split(":")[1]]=!0):this.Pannels[t]=!1}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f),e.Y36(P.R),e.Y36(C.sK))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-codegens"]],decls:39,vars:12,consts:function(){let s,t,n,_,i,l,c,d,p;return s=$localize`:@@代码生成器:代码生成器`,t=$localize`:@@条数据:条数据`,n=$localize`:@@新增:新增`,_=$localize`:@@保存:保存`,i=$localize`:@@管理:管理`,l=$localize`:@@删除:删除`,c=$localize`:@@版本:版本`,d=$localize`:@@编辑代码: 编辑代码 `,p=$localize`:@@加载更多...:加载更多...`,[[1,"page-header","mt-0","mb-3"],[1,"row","align-items-center"],[1,"col"],["translate","",1,"page-title"],s,[1,"text-muted","mt-1"],["translate",""],t,[1,"col-auto","ms-auto","d-print-none"],[1,"d-flex"],[1,"me-3","d-none","d-md-block"],["list","datalistOptions",1,"form-control",3,"ngModel","ngModelChange"],["id","datalistOptions"],[3,"value",4,"ngFor","ngForOf"],["matRipple","","translate","",1,"btn","btn-white",3,"routerLink"],n,[4,"ngIf","ngIfElse"],["templateName",""],["class","d-grid",4,"ngIf"],[3,"item","onemit",4,"ngIf"],["tabindex","-1","role","dialog","id","ObjectViewModal",1,"modal"],["role","document",1,"modal-dialog","modal-lg","border","shadow"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title","mb-0"],["type","button","onclick","$('#ObjectViewModal').modal('hide')","matRipple","",1,"btn-close"],[1,"px-3","py-2",2,"font-size","14px"],[1,"mb-3"],["id","code","name","code",2,"min-height","100%"],[1,"modal-footer","border-top","py-2"],["type","button","data-bs-dismiss","modal","translate","",1,"btn","btn-secondary"],["type","button","data-bs-dismiss","modal","translate","",1,"btn","btn-indigo",3,"click"],_,[3,"value"],[1,"row","row-cols-1","row-cols-lg-3","row-cols-md-2","row-cols-sm-1","g-4"],["class","col",4,"ngFor","ngForOf"],[3,"show","className"],[1,"card","shadow"],[1,"card-header","d-flex"],[1,"w-100"],[1,"btn-group"],["type","button","data-bs-toggle","dropdown","aria-haspopup","true","aria-expanded","false","matRipple","",1,"btn","btn-white","dropdown-toggle"],[1,"fa","fa-mixcloud"],i,[1,"dropdown-menu","dropdown-menu-right","dropdown-menu-lg-left"],["href","javascript:void(0)","translate","","matRipple","",1,"dropdown-item","text-danger",3,"click"],l,[1,"card-body","text-center"],["matRipple","",1,"my-2",3,"click"],["href","javascript:void(0);"],["width","128px",3,"src"],[1,"my-3","d-grid","overflow-hidden"],c,[1,"d-flex","flex-row","align-items-center","align-self-center","align-content-center","flex-wrap"],[1,"flex-fill"],[1,"d-grid","mx-1"],["type","button","matRipple","","translate","",1,"btn","btn-white",3,"click"],d,[1,"d-grid"],[1,"text-center","mt-5"],p,[3,"item","onemit"]]},template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h2",3),e.SDv(4,4),e.qZA(),e.TgZ(5,"div",5),e._uU(6),e.TgZ(7,"span",6),e.SDv(8,7),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",8),e.TgZ(10,"div",9),e.TgZ(11,"div",10),e.TgZ(12,"input",11),e.NdJ("ngModelChange",function(i){return n.nameFilter=i}),e.qZA(),e.TgZ(13,"datalist",12),e.YNc(14,Te,1,1,"option",13),e.qZA(),e.qZA(),e.TgZ(15,"a",14),e.SDv(16,15),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(17,me,1,0,"app-skeleton-cards3",16),e.YNc(18,Me,4,8,"ng-template",null,17,e.W1O),e.YNc(20,Pe,4,0,"div",18),e.YNc(21,fe,1,1,"app-codegen-setting",19),e.YNc(22,Ze,1,1,"app-codegen-property",19),e.YNc(23,Oe,1,1,"app-codegen-blobs",19),e.TgZ(24,"div",20),e.TgZ(25,"div",21),e.TgZ(26,"div",22),e.TgZ(27,"div",23),e.TgZ(28,"h3",24),e._uU(29),e.qZA(),e._UZ(30,"button",25),e.qZA(),e.TgZ(31,"div",26),e.TgZ(32,"div",27),e._UZ(33,"textarea",28),e.qZA(),e.qZA(),e.TgZ(34,"div",29),e.TgZ(35,"button",30),e._uU(36,"\u5173\u95ed"),e.qZA(),e.TgZ(37,"button",31),e.NdJ("click",function(){return n.updateGenerator()}),e.SDv(38,32),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){const _=e.MAs(19);e.xp6(6),e.Oqu(n.data.total),e.xp6(6),e.Q6J("ngModel",n.nameFilter),e.xp6(2),e.Q6J("ngForOf",n.data.data),e.xp6(1),e.Q6J("routerLink",e.DdM(11,De)),e.xp6(2),e.Q6J("ngIf",n.loading)("ngIfElse",_),e.xp6(3),e.Q6J("ngIf",n.data.data.length<n.data.total),e.xp6(1),e.Q6J("ngIf",n.Pannels.Setting),e.xp6(1),e.Q6J("ngIf",n.Pannels.Property),e.xp6(1),e.Q6J("ngIf",n.Pannels.Blob),e.xp6(6),e.hij(" ",n.selectedGenerator.name," ")}},directives:[C.Pi,r.Fj,r.JJ,r.On,E.sg,S.yS,T.wG,E.O5,r.YN,r.Kr,L.O,q.H,Ae,Ee,Ce],pipes:[y.K],styles:[""]}),o})();var x=a(3278);function Ge(o,s){1&o&&e._UZ(0,"app-skeleton-card")}const U=function(){return["/apis"]};function he(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",12),e.TgZ(1,"div",13),e.TgZ(2,"form",14,15),e.NdJ("ngSubmit",function(_){return e.CHM(t),e.oxw().onSubmit(_)}),e.TgZ(4,"div",16),e.TgZ(5,"label",17),e.SDv(6,18),e.qZA(),e._UZ(7,"img",19),e.TgZ(8,"input",20),e.NdJ("change",function(_){return e.CHM(t),e.oxw().UploadLogoUri(_)}),e.qZA(),e.qZA(),e.TgZ(9,"div",16),e.TgZ(10,"label",21),e.TgZ(11,"span",22),e.SDv(12,23),e.qZA(),e._uU(13," *"),e.qZA(),e.TgZ(14,"input",24,25),e.NdJ("ngModelChange",function(_){return e.CHM(t),e.oxw().item.name=_}),e.qZA(),e.TgZ(16,"div",26),e.SDv(17,27),e.qZA(),e.qZA(),e.TgZ(18,"div",16),e.TgZ(19,"label",17),e.SDv(20,28),e.qZA(),e.TgZ(21,"input",29),e.NdJ("ngModelChange",function(_){return e.CHM(t),e.oxw().item.webSite=_}),e.qZA(),e.qZA(),e.TgZ(22,"div"),e.TgZ(23,"button",30),e._uU(24," \u521b\u5efa "),e.qZA(),e.TgZ(25,"a",31),e.SDv(26,32),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.MAs(3),n=e.MAs(15),_=e.oxw();e.xp6(7),e.s9C("src",_.item.logoUri,e.LSH),e.xp6(7),e.Q6J("ngModel",_.item.name),e.xp6(2),e.Q6J("hidden",n.valid||n.pristine),e.xp6(5),e.Q6J("ngModel",_.item.webSite),e.xp6(2),e.Q6J("disabled",!t.form.valid||_.loading),e.xp6(2),e.Q6J("routerLink",e.DdM(6,U))}}function be(o,s){1&o&&e._UZ(0,"app-skeleton-card")}function $e(o,s){1&o&&e._UZ(0,"option",37),2&o&&e.s9C("value",s.$implicit)}const w=function(){return["/apis/codegens"]};function Re(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",12),e.TgZ(1,"div",13),e.TgZ(2,"form",14,15),e.NdJ("ngSubmit",function(_){return e.CHM(t),e.oxw().onSubmit(_)}),e.TgZ(4,"div",16),e.TgZ(5,"label",17),e.SDv(6,18),e.qZA(),e._UZ(7,"img",19),e.TgZ(8,"input",20),e.NdJ("change",function(_){return e.CHM(t),e.oxw().UploadLogoUri(_)}),e.qZA(),e.qZA(),e.TgZ(9,"div",16),e.TgZ(10,"label",17),e.SDv(11,21),e.qZA(),e.TgZ(12,"input",22,23),e.NdJ("ngModelChange",function(_){return e.CHM(t),e.oxw().item.name=_}),e.qZA(),e.TgZ(14,"datalist",24),e.YNc(15,$e,1,1,"option",25),e.qZA(),e.TgZ(16,"div",26),e.SDv(17,27),e.qZA(),e.qZA(),e.TgZ(18,"div",16),e.TgZ(19,"label",17),e.SDv(20,28),e.qZA(),e.TgZ(21,"input",29,30),e.NdJ("ngModelChange",function(_){return e.CHM(t),e.oxw().item.version=_}),e.qZA(),e.TgZ(23,"div",26),e.SDv(24,31),e.qZA(),e.qZA(),e.TgZ(25,"div",16),e.TgZ(26,"label",17),e.SDv(27,32),e.qZA(),e.TgZ(28,"textarea",33),e.NdJ("ngModelChange",function(_){return e.CHM(t),e.oxw().item.description=_}),e.qZA(),e.qZA(),e.TgZ(29,"div"),e.TgZ(30,"button",34),e._uU(31,"\u521b\u5efa"),e.qZA(),e.TgZ(32,"a",35),e.SDv(33,36),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.MAs(3),n=e.MAs(13),_=e.MAs(22),i=e.oxw();e.xp6(7),e.s9C("src",i.item.logoUri,e.LSH),e.xp6(5),e.Q6J("ngModel",i.item.name),e.xp6(3),e.Q6J("ngForOf",i.languagues),e.xp6(1),e.Q6J("hidden",n.valid||n.pristine),e.xp6(5),e.Q6J("ngModel",i.item.version),e.xp6(2),e.Q6J("hidden",_.valid||_.pristine),e.xp6(5),e.Q6J("ngModel",i.item.description),e.xp6(2),e.Q6J("disabled",!t.form.valid||i.loading),e.xp6(2),e.Q6J("routerLink",e.DdM(9,w))}}const Le=[{path:"",component:ge,data:{title:"api",state:"api"}},{path:"add",component:(()=>{class o{constructor(t,n,_){this.serv=t,this.blobServ=n,this.router=_,this.item={name:window.crypto.randomUUID().replace(/-/g,""),logoUri:A.N.defaultApiLogo,show:!1},this.loading=!1}ngOnInit(){}onSubmit(t){this.loading=!0,this.item.id?this.serv.ApiPut(this.item.id,this.item).subscribe(n=>{this.loading=!1,200==n.code?this.router.navigateByUrl("/apis"):g.F.fire({icon:"error",titleText:n.err})}):this.serv.ApiPost(this.item).subscribe(n=>{this.loading=!1,200==n.code?this.router.navigateByUrl("/apis"):g.F.fire({icon:"error",titleText:n.err})})}UploadLogoUri(t){var n=this;return(0,N.Z)(function*(){if(n.loading=!0,n.item.id||(yield n.serv.ApiPost(n.item)).subscribe(l=>{200==l.code?n.item.id=l.data.id:(n.loading=!1,g.F.fire({icon:"error",titleText:l.err}))}),n.item.id){var i=new FormData;i.append("file",t.currentTarget.files[0]),n.blobServ.TenantBlobUpload("api",n.item.id,i).subscribe(l=>{n.loading=!1,200==l.code?n.item.logoUri=l.data:g.F.fire({icon:"error",titleText:l.err})})}else n.loading=!1})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Z.Q),e.Y36(P.R),e.Y36(S.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-apis-add"]],decls:12,vars:4,consts:function(){let s,t,n,_,i,l,c;return s=$localize`:@@新建模板:新建模板`,t=$localize`:@@返回:返回`,n=$localize`:@@图标:图标`,_=$localize`:@@名称:名称`,i=$localize`:@@名称必须填写（6-50位）: 名称必须填写（6-50位） `,l=$localize`:@@网站地址:网站地址`,c=$localize`:@@返回:返回`,[[1,"page-header","mt-0","mb-3"],[1,"row","align-items-center"],[1,"col"],["translate","",1,"page-title"],s,[1,"col-auto","ms-auto","d-print-none"],["matRipple","","translate","",1,"btn","btn-white",3,"routerLink"],t,[1,"row"],[1,"col-md-6","col-12"],[4,"ngIf"],["class","card",4,"ngIf"],[1,"card"],[1,"card-body"],[3,"ngSubmit"],["apiForm","ngForm"],[1,"mb-3"],["translate","",1,"form-label"],n,["width","32px","onclick","document.getElementById('uploadLogoUri').click()",3,"src"],["type","file","id","uploadLogoUri",1,"d-none",3,"change"],[1,"form-label"],["translate",""],_,["type","text","name","name","maxlength","50","minlength","6","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","ngModel"],["translate","",1,"alert","alert-danger",3,"hidden"],i,l,["type","url","name","webSite",1,"form-control",3,"ngModel","ngModelChange"],["type","submit","translate","",1,"btn","btn-indigo",3,"disabled"],["matRipple","","translate","",1,"btn","btn-white","mx-2",3,"routerLink"],c]},template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h2",3),e.SDv(4,4),e.qZA(),e.qZA(),e.TgZ(5,"div",5),e.TgZ(6,"a",6),e.SDv(7,7),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",8),e.TgZ(9,"div",9),e.YNc(10,Ge,1,0,"app-skeleton-card",10),e.YNc(11,he,27,7,"div",11),e.qZA(),e.qZA()),2&t&&(e.xp6(6),e.Q6J("routerLink",e.DdM(3,U)),e.xp6(4),e.Q6J("ngIf",n.loading),e.xp6(1),e.Q6J("ngIf",!n.loading))},directives:[C.Pi,S.yS,T.wG,E.O5,x.g,r._Y,r.JL,r.F,r.Fj,r.nD,r.wO,r.Q7,r.JJ,r.On],styles:[""]}),o})(),data:{title:"apis-add",state:"apis-add"}},{path:"codegens",component:Ie,data:{title:"codegens",state:"codegens"}},{path:"codegens/add",component:(()=>{class o{constructor(t,n,_){this.serv=t,this.tenantBlob=n,this.router=_,this.loading=!1,this.languagues=A.N.codegenlanguages,this.item={name:"javascript",logoUri:A.N.defaultCodegenLogo,show:!0,share:!1,version:"1.0.0"}}ngOnInit(){}onSubmit(t){this.loading=!0,this.item.id?this.serv.CodeGenPut(this.item.id,this.item).subscribe(n=>{this.loading=!1,200==n.code?this.router.navigateByUrl("/apis/codegens"):g.F.fire({icon:"error",titleText:n.err})}):this.serv.CodeGenPost(this.item).subscribe(n=>{this.loading=!1,200==n.code?this.router.navigateByUrl("/apis/codegens"):g.F.fire({icon:"error",titleText:n.err})})}UploadLogoUri(t){var n=this;return(0,N.Z)(function*(){if(n.loading=!0,n.item.id||(yield n.serv.CodeGenPost(n.item)).subscribe(l=>{200==l.code?n.item.id=l.data.id:(n.loading=!1,g.F.fire({icon:"error",titleText:l.err}))}),n.item.id){var i=new FormData;i.append("file",t.currentTarget.files[0]),n.tenantBlob.TenantBlobUpload("codegen",n.item.id,i).subscribe(l=>{n.loading=!1,200==l.code?n.item.logoUri=l.data:g.F.fire({icon:"error",titleText:l.err})})}else n.loading=!1})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f),e.Y36(P.R),e.Y36(S.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-codegens-add"]],decls:12,vars:4,consts:function(){let s,t,n,_,i,l,c,d,p;return s=$localize`:@@新建代码生成器:新建代码生成器`,t=$localize`:@@返回:返回`,n=$localize`:@@图标:图标`,_=$localize`:@@名称:名称`,i=$localize`:@@名称必须填写（3-50位）: 名称必须填写（3-50位） `,l=$localize`:@@版本:版本`,c=$localize`:@@版本必须填写（1-20位）: 版本必须填写（1-20位） `,d=$localize`:@@描述:描述`,p=$localize`:@@返回:返回`,[[1,"page-header","mt-0","mb-3"],[1,"row","align-items-center"],[1,"col"],["translate","",1,"page-title"],s,[1,"col-auto","ms-auto","d-print-none"],["matRipple","","translate","",1,"btn","btn-white",3,"routerLink"],t,[1,"row"],[1,"col-md-6","col-12"],[4,"ngIf"],["class","card",4,"ngIf"],[1,"card"],[1,"card-body"],[3,"ngSubmit"],["codegnForm","ngForm"],[1,"mb-3"],["translate","",1,"form-label"],n,["width","32px","onclick","document.getElementById('uploadLogoUri').click()",1,"avatar",3,"src"],["type","file","id","uploadLogoUri",1,"d-none",3,"change"],_,["list","datalistOptions","name","name","required","","minlength","3","maxlength","60",1,"form-control",3,"ngModel","ngModelChange"],["name","ngModel"],["id","datalistOptions"],[3,"value",4,"ngFor","ngForOf"],["translate","",1,"alert","alert-danger",3,"hidden"],i,l,["type","text","name","version","required","","minlength","1","maxlength","20",1,"form-control",3,"ngModel","ngModelChange"],["version","ngModel"],c,d,["rows","5","name","description",1,"form-control",3,"ngModel","ngModelChange"],["type","submit","translate","",1,"btn","btn-indigo",3,"disabled"],["matRipple","","translate","",1,"btn","btn-white","mx-2",3,"routerLink"],p,[3,"value"]]},template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h2",3),e.SDv(4,4),e.qZA(),e.qZA(),e.TgZ(5,"div",5),e.TgZ(6,"a",6),e.SDv(7,7),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",8),e.TgZ(9,"div",9),e.YNc(10,be,1,0,"app-skeleton-card",10),e.YNc(11,Re,34,10,"div",11),e.qZA(),e.qZA()),2&t&&(e.xp6(6),e.Q6J("routerLink",e.DdM(3,w)),e.xp6(4),e.Q6J("ngIf",n.loading),e.xp6(1),e.Q6J("ngIf",!n.loading))},directives:[C.Pi,S.yS,T.wG,E.O5,x.g,r._Y,r.JL,r.F,r.Fj,r.Q7,r.wO,r.nD,r.JJ,r.On,E.sg,r.YN,r.Kr],styles:[""]}),o})(),data:{title:"codegens-add",state:"codegens-add"}},{path:":id/subscribers",component:ce,data:{title:"apis-subscribers",state:"apis-subscribers"}}];let qe=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[S.Bz.forChild(Le)],S.Bz]}),o})();var ye=a(1382),xe=a(7623),Ue=a(2735);function F(o){return new xe.w(o,A.N.i18n_asset_prefix)}let we=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[ye.m,E.ez,r.u5,qe,Ue.ii.forChild(),C.aw.forChild({loader:{provide:C.Zw,useFactory:F,deps:[M.eN]},isolate:!1,extend:!0})]]}),o})()}}]);