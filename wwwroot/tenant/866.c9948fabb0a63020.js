"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[866],{1866:(Gt,X,d)=>{d.r(X),d.d(X,{HttpLoaderFactory:()=>oe,ProjectsModule:()=>wt});var E=d(6019),O=d(3009),I=d(7262),e=d(3668);let ie=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-projects"]],decls:0,vars:0,template:function(t,_){},styles:["[_nghost-%COMP%]{display:block!important}"],data:{animation:[I.q]}}),n})();var Z=d(8239),Q=d(4762),B=d(8100),c=d(6588),w=d(8992),G=d(4602),f=d(8687),z=d(9861),m=d(1427),g=d(9133),S=d(7732);const q=function(n){return{"text-decoration-underline":n}};let N=(()=>{class n{constructor(){}ngOnInit(){}togglePannel(t){this.onemit.emit("toggle:"+t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-app-menus"]],inputs:{onemit:"onemit",pannelName:"pannelName"},decls:9,vars:12,consts:function(){let r,t,_,o;return r=$localize`:@@基本信息:基本信息`,t=$localize`:@@应用配置:应用配置`,_=$localize`:@@文件管理:文件管理`,o=$localize`:@@二维码:二维码`,[[1,"nav","nav-pills","nav-fill","flex-column","flex-sm-row","border-bottom"],["matRipple","","href","javascript:void(0)","translate","",1,"btn","btn-link","flex-fill","text-dark",3,"ngClass","click"],r,t,_,o]},template:function(t,_){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"a",1),e.NdJ("click",function(){return _.togglePannel("Setting")}),e.SDv(2,2),e.qZA(),e.TgZ(3,"a",1),e.NdJ("click",function(){return _.togglePannel("Property")}),e.SDv(4,3),e.qZA(),e.TgZ(5,"a",1),e.NdJ("click",function(){return _.togglePannel("Blobs")}),e.SDv(6,4),e.qZA(),e.TgZ(7,"a",1),e.NdJ("click",function(){return _.togglePannel("Qrcode")}),e.SDv(8,5),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngClass",e.VKq(4,q,"Setting"==_.pannelName)),e.xp6(2),e.Q6J("ngClass",e.VKq(6,q,"Property"==_.pannelName)),e.xp6(2),e.Q6J("ngClass",e.VKq(8,q,"Blobs"==_.pannelName)),e.xp6(2),e.Q6J("ngClass",e.VKq(10,q,"Qrcode"==_.pannelName)))},directives:[S.wG,m.Pi,E.mk],styles:[""]}),n})();var H=d(1802);let re=(()=>{class n{constructor(){this.onemit=new e.vpe}close(){this.onemit.emit("Blobs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-app-blobs"]],inputs:{item:"item"},outputs:{onemit:"onemit"},decls:9,vars:5,consts:[[1,"position-fixed","slidePannel","shadow","border","border-right-0","bg-white"],[1,"app-setting-main"],[1,"modal-header"],[1,"mb-0"],["type","button","matRipple","",1,"btn-close",3,"click"],[3,"pannelName","onemit"],[1,"modal-body","pt-2"],[3,"item","bizCode"]],template:function(t,_){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h2",3),e._uU(4),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return _.close()}),e.qZA(),e.qZA(),e._UZ(6,"app-app-menus",5),e.TgZ(7,"div",6),e._UZ(8,"app-blob-editor",7),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Oqu(_.item.name),e.xp6(2),e.Q6J("pannelName","Blobs")("onemit",_.onemit),e.xp6(2),e.Q6J("item",_.item)("bizCode","app"))},directives:[S.wG,N,H.B],styles:[""]}),n})();var Y=d(2476);let ae=(()=>{class n{constructor(t){this.serv=t,this.onemit=new e.vpe}close(){this.onemit.emit("Property")}onEditorEmit(t){t.input.id?this.serv.PropertySettingPut(t.input.id,t.input).subscribe(_=>{c.F.fire({icon:"success",titleText:"\u8bbe\u7f6e\u6210\u529f\uff01"})}):this.serv.PropertySettingPost({channelCode:"app",channelAppId:this.item.id,name:t.value,value:t.input.value}).subscribe(_=>{c.F.fire({icon:"success",titleText:"\u8bbe\u7f6e\u6210\u529f\uff01"})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(G.I))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-app-property"]],inputs:{item:"item"},outputs:{onemit:"onemit"},decls:9,vars:5,consts:[[1,"position-fixed","slidePannel","shadow","border","border-right-0","bg-white"],[1,"app-setting-main"],[1,"modal-header"],[1,"mb-0"],["type","button","matRipple","",1,"btn-close",3,"click"],[3,"pannelName","onemit"],[1,"modal-body","pt-2"],[3,"item","bizCode","onemit"]],template:function(t,_){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h2",3),e._uU(4),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return _.close()}),e.qZA(),e.qZA(),e._UZ(6,"app-app-menus",5),e.TgZ(7,"div",6),e.TgZ(8,"app-property-editor",7),e.NdJ("onemit",function(i){return _.onEditorEmit(i)}),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Oqu(_.item.name),e.xp6(2),e.Q6J("pannelName","Property")("onemit",_.onemit),e.xp6(2),e.Q6J("item",_.item)("bizCode","app"))},directives:[S.wG,N,Y.X],styles:[""]}),n})(),se=(()=>{class n{constructor(){this.onemit=new e.vpe,this.settings={text:"",width:120,height:120,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H}}ngOnChanges(){this.MakeQRCode("qrcode_site",`${this.item.website}`),this.MakeQRCode("qrcode_wechat",`${location.protocol}//${location.host}/wechat/Authorize?state=${this.item.id}`),this.MakeQRCode("qrcode_openwechat",`${location.protocol}//${location.host}/openwechat/Authorize?state=${this.item.id}`),this.MakeQRCode("qrcode_weibo",`${location.protocol}//${location.host}/weibo/Authorize?state=${this.item.id}`),this.MakeQRCode("qrcode_qq",`${location.protocol}//${location.host}/qq/Authorize?state=${this.item.id}`)}close(){this.onemit.emit("Qrcode")}MakeQRCode(t,_){this.settings.text=_;let o=document.getElementById(t);o.innerHTML="",new QRCode(o,this.settings);let i=o.nextElementSibling;i.setAttribute("href",_),i.innerHTML=_}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-app-qrcode"]],inputs:{item:"item"},outputs:{onemit:"onemit"},features:[e.TTD],decls:73,vars:3,consts:function(){let r,t,_,o,i,a,s,l,u,A;return r=$localize`:@@推广码:推广码`,t=$localize`:@@可通过这个网址直接进入应用: 可通过这个网址直接进入应用 `,_=$localize`:@@微信:微信`,o=$localize`:@@微信进入,可通过URL的:微信进入,可通过URL的`,i=$localize`:@@参数调试用户数据:参数调试用户数据`,a=$localize`:@@微信PC:微信PC`,s=$localize`:@@微博:微博`,l=$localize`:@@微博进入,可通过URL的:微博进入,可通过URL的`,u=$localize`:@@QQ:QQ`,A=$localize`:@@QQ进入,可通过URL的:QQ进入,可通过URL的`,[[1,"position-fixed","slidePannel","shadow","border","border-right-0","bg-white"],[1,"app-setting-main"],[1,"modal-header"],[1,"mb-0"],["type","button","matRipple","",1,"btn-close",3,"click"],[3,"pannelName","onemit"],[1,"modal-body","pt-2"],[1,"p-2"],[1,"card","mb-3"],["translate","",1,"card-header"],r,[1,"card-body"],["translate","",1,"p-2","mb-3"],t,[1,"card-text"],["id","qrcode_site",1,"mb-2"],["target","_blank"],_,[1,"p-2","mb-3"],["translate",""],o,i,["id","qrcode_wechat",1,"mb-2"],a,["id","qrcode_openwechat",1,"mb-2"],s,l,["id","qrcode_weibo",1,"mb-2"],u,A,["id","qrcode_qq",1,"mb-2"],["type","button","matRipple","","translate","",1,"btn","btn-white",3,"click"]]},template:function(t,_){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h2",3),e._uU(4),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return _.close()}),e.qZA(),e.qZA(),e._UZ(6,"app-app-menus",5),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"div",8),e.TgZ(10,"div",9),e.SDv(11,10),e.qZA(),e.TgZ(12,"div",11),e.TgZ(13,"div",12),e.SDv(14,13),e.qZA(),e.TgZ(15,"div",14),e._UZ(16,"div",15),e._UZ(17,"a",16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"div",8),e.TgZ(19,"div",9),e.SDv(20,17),e.qZA(),e.TgZ(21,"div",11),e.TgZ(22,"div",18),e.TgZ(23,"span",19),e.SDv(24,20),e.qZA(),e.TgZ(25,"small"),e._uU(26,"app_wechat"),e.qZA(),e.TgZ(27,"span",19),e.SDv(28,21),e.qZA(),e.qZA(),e._UZ(29,"div",22),e._UZ(30,"a",16),e.qZA(),e.qZA(),e.TgZ(31,"div",8),e.TgZ(32,"div",9),e.SDv(33,23),e.qZA(),e.TgZ(34,"div",11),e.TgZ(35,"div",18),e.TgZ(36,"span",19),e._uU(37,"\u5fae\u4fe1\u8fdb\u5165,\u53ef\u901a\u8fc7URL\u7684"),e.qZA(),e.TgZ(38,"small"),e._uU(39,"app_wechat"),e.qZA(),e.TgZ(40,"span",19),e._uU(41,"\u53c2\u6570\u8c03\u8bd5\u7528\u6237\u6570\u636e"),e.qZA(),e.qZA(),e._UZ(42,"div",24),e._UZ(43,"a",16),e.qZA(),e.qZA(),e.TgZ(44,"div",8),e.TgZ(45,"div",9),e.SDv(46,25),e.qZA(),e.TgZ(47,"div",11),e.TgZ(48,"div",18),e.TgZ(49,"span",19),e.SDv(50,26),e.qZA(),e.TgZ(51,"small"),e._uU(52,"app_weibo"),e.qZA(),e.TgZ(53,"span",19),e._uU(54,"\u53c2\u6570\u8c03\u8bd5\u7528\u6237\u6570\u636e"),e.qZA(),e.qZA(),e._UZ(55,"div",27),e._UZ(56,"a",16),e.qZA(),e.qZA(),e.TgZ(57,"div",8),e.TgZ(58,"div",9),e.SDv(59,28),e.qZA(),e.TgZ(60,"div",11),e.TgZ(61,"div",18),e.TgZ(62,"span",19),e.SDv(63,29),e.qZA(),e.TgZ(64,"small"),e._uU(65,"app_qq"),e.qZA(),e.TgZ(66,"span",19),e._uU(67,"\u53c2\u6570\u8c03\u8bd5\u7528\u6237\u6570\u636e"),e.qZA(),e.qZA(),e._UZ(68,"div",30),e._UZ(69,"a",16),e.qZA(),e.qZA(),e.TgZ(70,"div"),e.TgZ(71,"button",31),e.NdJ("click",function(){return _.close()}),e._uU(72,"\u5173\u95ed"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Oqu(_.item.name),e.xp6(2),e.Q6J("pannelName","QRCode")("onemit",_.onemit))},directives:[S.wG,N,m.Pi],styles:[""]}),n})();var C=d(4522),P=d(8260),k=d(4329),R=d(6917);function F(n){this.message=n}(F.prototype=new Error).name="InvalidCharacterError";var K="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(n){var r=String(n).replace(/=+$/,"");if(r.length%4==1)throw new F("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,_,o=0,i=0,a="";_=r.charAt(i++);~_&&(t=o%4?64*t+_:_,o++%4)?a+=String.fromCharCode(255&t>>(-2*o&6)):0)_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(_);return a};function U(n){this.message=n}(U.prototype=new Error).name="InvalidTokenError";var ce=d(2595),ue=d(8087);let ge=(()=>{class n{constructor(t){this.http=t}AppVersionsList(t){return this.http.get(`${P.N.apiServer}/api/AppVersions/${t}`)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(C.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Te=d(4485),h=d(4506);function Pe(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",27),e.TgZ(1,"span",21),e.SDv(2,28),e.qZA(),e.TgZ(3,"button",29),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).resetAppDirectory()}),e.SDv(4,30),e.qZA(),e.qZA()}}function Ae(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",27),e.TgZ(1,"span",21),e.SDv(2,31),e.qZA(),e._uU(3),e.TgZ(4,"span",21),e.SDv(5,32),e.qZA(),e.TgZ(6,"button",33),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).resetAppDirectory()}),e.SDv(7,34),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(3),e.hij("\uff1a ",null==t.appDirectory?null:t.appDirectory.name,"\uff0c")}}function Ee(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e._UZ(3,"br"),e.TgZ(4,"small"),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"td"),e.TgZ(7,"button",35),e.NdJ("click",function(o){const a=e.CHM(t).$implicit;return e.oxw(2).release(a,o)}),e.SDv(8,36),e.qZA(),e.TgZ(9,"a",37),e.SDv(10,38),e.qZA(),e.TgZ(11,"button",39),e.NdJ("click",function(o){const a=e.CHM(t).$implicit;return e.oxw(2).showAppFiles(a,o)}),e.SDv(12,40),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=r.$implicit,_=e.oxw(2);e.xp6(2),e.hij(" ",t.serverName," "),e.xp6(3),e.Oqu(t.summary),e.xp6(4),e.cQ8("href","",t.webSiteUrl,"/",_.tenant_id,"/",_.item.serverPath,"",e.LSH)}}const Se=function(){return["/servers"]};function me(n,r){if(1&n&&(e.TgZ(0,"div",17),e.YNc(1,Pe,5,0,"div",18),e.YNc(2,Ae,8,1,"div",18),e.TgZ(3,"div",19),e.TgZ(4,"table",20),e.TgZ(5,"thead"),e.TgZ(6,"tr"),e.TgZ(7,"th"),e.TgZ(8,"span",21),e.SDv(9,22),e.qZA(),e.TgZ(10,"a",23),e.SDv(11,24),e.qZA(),e.qZA(),e._UZ(12,"th",25),e.qZA(),e.qZA(),e.TgZ(13,"tbody"),e.YNc(14,Ee,13,5,"tr",26),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.hasStorageKey),e.xp6(1),e.Q6J("ngIf",t.hasStorageKey),e.xp6(8),e.Q6J("routerLink",e.DdM(4,Se)),e.xp6(4),e.Q6J("ngForOf",t.myServers)}}function Ce(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e.TgZ(2,"div",45),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.TgZ(5,"code"),e.TgZ(6,"span",21),e.SDv(7,46),e.qZA(),e._uU(8),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"td"),e._uU(10),e._UZ(11,"br"),e.TgZ(12,"small"),e._uU(13),e.qZA(),e.qZA(),e.TgZ(14,"td"),e.TgZ(15,"button",47),e.NdJ("click",function(o){const a=e.CHM(t).$implicit;return e.oxw(2).rollbackApp(a,o)}),e.SDv(16,48),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=r.$implicit;e.xp6(4),e.Oqu(t.createDate),e.xp6(4),e.hij("\uff1a",t.ver,""),e.xp6(2),e.hij(" ",t.serverName,""),e.xp6(3),e.hij(" ",t.packageBackupUri,"")}}function Me(n,r){if(1&n&&(e.TgZ(0,"div",17),e.TgZ(1,"div",41),e.TgZ(2,"table",20),e.TgZ(3,"thead"),e.TgZ(4,"tr"),e.TgZ(5,"th",21),e.SDv(6,42),e.qZA(),e.TgZ(7,"th",21),e.SDv(8,43),e.qZA(),e._UZ(9,"th"),e.qZA(),e.qZA(),e.TgZ(10,"tbody"),e.YNc(11,Ce,17,4,"tr",26),e.qZA(),e.qZA(),e.qZA(),e._UZ(12,"app-nodata",44),e.qZA()),2&n){const t=e.oxw();e.xp6(11),e.Q6J("ngForOf",t.appVersions),e.xp6(1),e.Q6J("show",t.appVersions.length<1)("className","my-5")}}const V=function(n){return{"text-decoration-underline":n}};let W=(()=>{class n{constructor(t,_,o,i,a){this.tenantServerServ=t,this.serv=_,this.versionServ=o,this.appServ=i,this.cookies=a,this.filetreeEventFlag=!1,this.tabIndex=0,this.onemit=new e.vpe,this.hasStorageKey=!0,this.appVersions=[],this.myServers=[],this.appDirectory={},this.filesToRlease=[],R.setDriver([R.INDEXEDDB]),this.getData();var s=this.cookies.get(P.N.token_cookies_key);if(s){var l=function(n,r){if("string"!=typeof n)throw new U("Invalid token specified");var t=!0===(r=r||{}).header?0:1;try{return JSON.parse(function(n){var r=n.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw"Illegal base64url string!"}try{return decodeURIComponent(K(r).replace(/(.)/g,function(_,o){var i=o.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i}))}catch(t){return K(r)}}(n.split(".")[t]))}catch(_){throw new U("Invalid token specified: "+_.message)}}(s);this.tenant_id=l.tenant_id}}ngOnChanges(){this.appStorageKey=`_app_${this.item.id}`,this.ExistsPath(),this.getVersions()}ExistsPath(){var t=this;return(0,Z.Z)(function*(){var _=yield R.keys();t.hasStorageKey=_.indexOf(t.appStorageKey)>-1,t.appDirectory=yield R.getItem(t.appStorageKey)})()}getVersions(){this.versionServ.AppVersionsList(this.item.id).subscribe(t=>{this.appVersions=t,this.myServers.length>0&&this.appVersions.forEach(_=>{var o=this.myServers.filter(i=>i.id==_.appServerID)[0];o&&(_.serverName=o.serverName,_.serverUrl=o.serverUrl)})})}getData(){(0,B.D)([this.tenantServerServ.TenantServerMarket(""),this.serv.UserAppServers()]).subscribe(t=>{t[1].data.forEach(_=>{var o=t[0].data.filter(i=>i.id==_.appServerID)[0];o&&(_.serverName=o.serverName,_.summary=o.summary,_.webSiteUrl=o.webSiteUrl)}),this.myServers=t[1].data})}close(){this.onemit.emit("Publish")}_checkPermission(t){return(0,Z.Z)(function*(){var _={mode:"readwrite"},o=yield t.queryPermission(_);return"granted"!=o&&(o=yield t.requestPermission(_)),"granted"===o})()}resetAppDirectory(){var t=this;return(0,Z.Z)(function*(){var _=yield window.showDirectoryPicker();null!=_&&_.name&&(yield R.setItem(t.appStorageKey,_))})()}release(t,_){var o=this;return(0,Z.Z)(function*(){if(o.appDirectory=yield R.getItem(o.appStorageKey),null!=o.appDirectory&&(yield o._checkPermission(o.appDirectory))){if((yield c.R.fire({title:"\u662f\u5426\u786e\u8ba4\u53d1\u5e03\u5230",showCancelButton:!0,text:t.name})).isConfirmed){o.filesToRlease=[],yield o.getFiles(o.appDirectory);var a=yield o.zipBlob(o.filesToRlease);null!=a&&o._releaseBlob(a,t.appServerID,_)}}else o.resetAppDirectory()})()}_releaseBlob(t,_,o,i=!1){var a=new C.LE;a=(a=(a=a.set("id",this.item.id)).set("serverID",_)).set("rollback",i);var s=new FormData;s.append("file",t),o.target.classList.add("disabled"),o.target.innerHTML='<span class="spinner-border spinner-border-sm"></span>',this.appServ.AppRelease(this.item.id,_,i,s).subscribe(l=>{o.target.innerHTML="\u53d1\u5e03",o.target.classList.remove("disabled"),200==l.code?c.R.fire({icon:"success",title:"\u53d1\u5e03\u6210\u529f",showConfirmButton:!1,html:`\n          <div class="mb-2">\n            <p>\u7ad9\u70b9\u5730\u5740\uff0c\u8bf7\u590d\u5236\u4fdd\u5b58</p>\n            <input type="text" class="form-control" value="${l.data}" />\n          </div>\n          <a href="${l.data}" target="_blank" class="btn btn-indigo my-2">\u70b9\u51fb\u9884\u89c8</a>\n          `}):c.F.fire({icon:"error",titleText:l.data})})}getFiles(t){var _=this;return(0,Z.Z)(function*(){var o,i;try{for(var s,a=(0,Q.KL)(t.values());!(s=yield a.next()).done;){const l=s.value;if("directory"==l.kind){if(P.N.appReleaseExcludes.indexOf(l.name)>-1)continue;yield _.getFiles(l)}else{const u=yield _.appDirectory.resolve(l);_.filesToRlease.push({path:u.join("/"),handler:l})}}}catch(l){o={error:l}}finally{try{s&&!s.done&&(i=a.return)&&(yield i.call(a))}finally{if(o)throw o.error}}})()}zipBlob(t){return(0,Z.Z)(function*(){for(var _=new k.U5("application/zip"),o=new k._Q(_),i=0;i<t.length;i++){var a=yield t[i].handler.getFile();yield o.add(t[i].path,new k.Nt(a))}yield o.close();var s=yield _.getData();return s.size>P.N.appSizeLimit?(c.F.fire({icon:"error",titleText:`\u6587\u4ef6\u4e0d\u80fd\u5927\u4e8e${(P.N.appSizeLimit/1024/1024).toFixed(2)}MB`}),null):s})()}rollbackApp(t,_){var o=this;return(0,Z.Z)(function*(){var i=o.myServers.filter(u=>u.appServerID==t.appServerID)[0];if((yield c.R.fire({title:"\u7248\u672c\u56de\u6eda",showCancelButton:!0,html:`<div>\n      <p>\u7248\u672c\u53f7\uff1a${t.ver}</p>\n      <p>\u670d\u52a1\u5668\uff1a${i.serverName}</p>\n      <p>\u7f51\u5740\uff1a${i.webSiteUrl}</p>\n      </div>`})).isConfirmed){var s=yield fetch(t.packageBackupUri);s.ok||c.F.fire({icon:"error",titleText:s.statusText});var l=yield s.blob();o._releaseBlob(l,t.appServerID,_,!0)}})()}showAppFiles(t,_){var o=this;return(0,Z.Z)(function*(){o.appServ.AppFiles(o.item.id).subscribe(function(){var i=(0,Z.Z)(function*(a){var s=a.data;s.id=o.item.id,s.text=o.item.name,s.state={opened:!0},$.jstree.destroy(),$("#filetreeModal").modal("show"),window.filetree=$("#filetree").jstree({plugins:["wholerow","types"],types:{".png":{icon:"bi bi-filetype-png"},".gif":{icon:"bi bi-filetype-gif"},".jpg":{icon:"bi bi-filetype-jpg"},".ico":{icon:"bi bi-image"},".html":{icon:"bi bi-filetype-html"},".js":{icon:"bi bi-filetype-js"},".css":{icon:"bi bi-filetype-css"},".exe":{icon:"bi bi-filetype-exe"},".svg":{icon:"bi bi-filetype-svg"},".txt":{icon:"bi bi-filetype-txt"},".xml":{icon:"bi bi-filetype-xml"},".yml":{icon:"bi bi-filetype-yml"},".json":{icon:"bi bi-filetype-json"},".xls":{icon:"bi bi-filetype-xls"},directory:{icon:"bi bi-folder"},default:{icon:"bi bi-file-earmark-code"}},core:{data:s}}),window.filetree.on("changed.jstree",(l,u)=>{"directory"!=u.node.original.type&&window.open(t.webSiteUrl+u.node.original.fullName)}),o.filetreeEventFlag=!0});return function(a){return i.apply(this,arguments)}}())})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(ce.j),e.Y36(ue.i),e.Y36(ge),e.Y36(f.b),e.Y36(Te.N))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-app-publish"]],inputs:{item:"item"},outputs:{onemit:"onemit"},features:[e.TTD],decls:23,vars:10,consts:function(){let r,t,_,o,i,a,s,l,u,A,p,M,v,b,D,L;return r=$localize`:@@发布上线:发布上线`,t=$localize`:@@版本管理:版本管理`,_=$localize`:@@服务器:服务器`,o=$localize`:@@[我的服务器]:[我的服务器]`,i=$localize`:@@请先设置发布文件夹路径。:请先设置发布文件夹路径。`,a=$localize`:@@设置目录:设置目录`,s=$localize`:@@应用文件夹名称:应用文件夹名称`,l=$localize`:@@您还可以:您还可以`,u=$localize`:@@重置路径:重置路径`,A=$localize`:@@发布:发布`,p=$localize`:@@预览:预览`,M=$localize`:@@发布:服务器文件`,v=$localize`:@@时间:时间`,b=$localize`:@@存档:存档`,D=$localize`:@@版本:版本`,L=$localize`:@@回滚:回滚`,[[1,"position-fixed","slidePannel","shadow","border","border-right-0","bg-white"],[1,"app-setting-main"],[1,"modal-header"],[1,"mb-0"],["type","button","matRipple","",1,"btn-close",3,"click"],[1,"nav","nav-pills","nav-fill","flex-column","flex-sm-row","border-bottom"],["matRipple","","href","javascript:void(0)","translate","",1,"btn","btn-link","flex-fill","text-dark",3,"ngClass","click"],r,t,[1,"modal-body","pt-2"],["class","pt-2",4,"ngIf"],["tabindex","-1","id","filetreeModal",1,"modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["id","filetree",1,"py-2"],[1,"pt-2"],["class","alert alert-info py-1 text-muted",4,"ngIf"],[1,"table-responsive","border"],[1,"table","card-table","table-vcenter","text-nowrap","datatable","table-hover"],["translate",""],_,["translate","",1,"mx-2",3,"routerLink"],o,["width","180px"],[4,"ngFor","ngForOf"],[1,"alert","alert-info","py-1","text-muted"],i,["type","button","translate","",1,"btn","btn-link",3,"click"],a,s,l,["type","button","translate","",1,"btn","btn-link","mx-2",3,"click"],u,["type","button","matRipple","","translate","",1,"btn","btn-indigo",3,"click"],A,["matRipple","","target","_blank","translate","",1,"mx-2","btn","btn-white",3,"href"],p,["type","button","matRipple","","translate","",1,"btn","btn-white",3,"click"],M,[1,"table-responsive"],v,b,[3,"show","className"],[1,"d-flex","flex-column","gap-1"],D,["type","button","matRipple","","translate","",1,"btn","btn-light",3,"click"],L]},template:function(t,_){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h1",3),e._uU(4),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return _.close()}),e.qZA(),e.qZA(),e.TgZ(6,"div",5),e.TgZ(7,"a",6),e.NdJ("click",function(){return _.tabIndex=0}),e.SDv(8,7),e.qZA(),e.TgZ(9,"a",6),e.NdJ("click",function(){return _.tabIndex=1}),e.SDv(10,8),e.qZA(),e.qZA(),e.TgZ(11,"div",9),e.YNc(12,me,15,5,"div",10),e.YNc(13,Me,13,3,"div",10),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",11),e.TgZ(15,"div",12),e.TgZ(16,"div",13),e.TgZ(17,"div",2),e.TgZ(18,"h5",14),e._uU(19),e.qZA(),e._UZ(20,"button",15),e.qZA(),e.TgZ(21,"div"),e._UZ(22,"div",16),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Oqu(_.item.name),e.xp6(3),e.Q6J("ngClass",e.VKq(6,V,0==_.tabIndex)),e.xp6(2),e.Q6J("ngClass",e.VKq(8,V,1==_.tabIndex)),e.xp6(3),e.Q6J("ngIf",0==_.tabIndex),e.xp6(1),e.Q6J("ngIf",1==_.tabIndex),e.xp6(6),e.Oqu(_.item.name))},directives:[S.wG,m.Pi,E.mk,E.O5,O.yS,E.sg,h.H],styles:[""]}),n})();var ee=d(4954);function Oe(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",8),e.TgZ(1,"label",11),e.SDv(2,25),e.qZA(),e._UZ(3,"img",26),e.TgZ(4,"input",27),e.NdJ("change",function(o){return e.CHM(t),e.oxw().UploadAppLogo(o)}),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(3),e.s9C("src",t.item.logo,e.LSH)}}let Ze=(()=>{class n{constructor(t,_){this.serv=t,this.blobServ=_,this.onemit=new e.vpe}ngOnChanges(){this.item.logo||(this.item.logo=P.N.defaultAppLogo)}close(){this.onemit.emit("Setting")}updateApp(t){var _=this;return(0,Z.Z)(function*(){!(yield c.R.fire({icon:"question",titleText:"\u662f\u5426\u786e\u8ba4\uff1f",showCancelButton:!0})).isConfirmed||(_.item.id>0?_.serv.AppPut(_.item.id,_.item).subscribe(i=>{c.F.fire({icon:"success",titleText:"\u66f4\u65b0\u6210\u529f"})}):_.serv.AppPost(_.item).subscribe(i=>{c.F.fire({icon:"success",titleText:"\u6dfb\u52a0\u6210\u529f"}),_.close(),_.onemit.emit("getData")}))})()}UploadAppLogo(t){var _=new FormData;_.append("file",t.currentTarget.files[0]),this.blobServ.TenantBlobUpload("tenant",this.item.id,_).subscribe(o=>{200==o.code?this.item.logo=o.data:c.F.fire({icon:"error",titleText:o.err})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(f.b),e.Y36(ee.R))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-app-setting"]],inputs:{item:"item"},outputs:{onemit:"onemit"},features:[e.TTD],decls:46,vars:11,consts:function(){let r,t,_,o,i,a,s;return r=$localize`:@@名称:名称`,t=$localize`:@@站点路径:站点路径`,_=$localize`:@@网站:网站`,o=$localize`:@@描述:描述`,i=$localize`:@@显示:显示`,a=$localize`:@@提交: 提交 `,s=$localize`:@@应用图标:应用图标`,[[1,"position-fixed","slidePannel","shadow","border","border-right-0","bg-white"],[1,"app-setting-main"],[1,"modal-header"],[1,"mb-0"],["type","button","matRipple","",1,"btn-close",3,"click"],[3,"pannelName","onemit"],[1,"modal-body","pt-2"],[1,"p-2"],[1,"mb-3"],[1,"form-label"],["class","mb-3",4,"ngIf"],["translate","",1,"form-label"],r,["type","text",1,"form-control",3,"ngModel","ngModelChange"],t,_,["type","url",1,"form-control",3,"ngModel","ngModelChange"],o,["rows","5",1,"form-control",3,"ngModel","ngModelChange"],i,[1,"form-check","form-switch"],["type","checkbox","role","switch",1,"form-check-input",3,"ngModel","ngModelChange"],["type","button","matRipple","","translate","",1,"btn","btn-indigo",3,"click"],a,["type","button","matRipple","","translate","",1,"btn","btn-white","mx-2",3,"click"],s,["onclick","document.getElementById('uploadAppLogo').click()",1,"avatar",3,"src"],["type","file","id","uploadAppLogo",1,"d-none",3,"change"]]},template:function(t,_){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h2",3),e._uU(4),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return _.close()}),e.qZA(),e.qZA(),e._UZ(6,"app-app-menus",5),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"div",8),e.TgZ(10,"label",9),e._uU(11,"AppID"),e.qZA(),e.TgZ(12,"code"),e._uU(13),e.qZA(),e.qZA(),e.YNc(14,Oe,5,1,"div",10),e.TgZ(15,"div",8),e.TgZ(16,"label",9),e._uU(17,"AppKey"),e.qZA(),e.TgZ(18,"code"),e._uU(19),e.qZA(),e.qZA(),e.TgZ(20,"div",8),e.TgZ(21,"label",11),e.SDv(22,12),e.qZA(),e.TgZ(23,"input",13),e.NdJ("ngModelChange",function(i){return _.item.name=i}),e.qZA(),e.qZA(),e.TgZ(24,"div",8),e.TgZ(25,"label",11),e.SDv(26,14),e.qZA(),e.TgZ(27,"input",13),e.NdJ("ngModelChange",function(i){return _.item.serverPath=i}),e.qZA(),e.qZA(),e.TgZ(28,"div",8),e.TgZ(29,"label",11),e.SDv(30,15),e.qZA(),e.TgZ(31,"input",16),e.NdJ("ngModelChange",function(i){return _.item.website=i}),e.qZA(),e.qZA(),e.TgZ(32,"div",8),e.TgZ(33,"label",11),e.SDv(34,17),e.qZA(),e.TgZ(35,"textarea",18),e.NdJ("ngModelChange",function(i){return _.item.description=i}),e.qZA(),e.qZA(),e.TgZ(36,"div",8),e.TgZ(37,"label",11),e.SDv(38,19),e.qZA(),e.TgZ(39,"div",20),e.TgZ(40,"input",21),e.NdJ("ngModelChange",function(i){return _.item.share=i}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(41,"div"),e.TgZ(42,"button",22),e.NdJ("click",function(i){return _.updateApp(i)}),e.SDv(43,23),e.qZA(),e.TgZ(44,"button",24),e.NdJ("click",function(){return _.close()}),e._uU(45,"\u5173\u95ed"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Oqu(_.item.name),e.xp6(2),e.Q6J("pannelName","Setting")("onemit",_.onemit),e.xp6(7),e.Oqu(_.item.id),e.xp6(1),e.Q6J("ngIf",_.item.id>0),e.xp6(5),e.Oqu(_.item.appKey),e.xp6(4),e.Q6J("ngModel",_.item.name),e.xp6(4),e.Q6J("ngModel",_.item.serverPath),e.xp6(4),e.Q6J("ngModel",_.item.website),e.xp6(4),e.Q6J("ngModel",_.item.description),e.xp6(5),e.Q6J("ngModel",_.item.share))},directives:[S.wG,N,E.O5,m.Pi,g.Fj,g.JJ,g.On,g.Wl],styles:[""]}),n})(),fe=(()=>{class n{constructor(t){this.http=t}Teams(t,_){let o=new C.LE;return o=o.set("channelCode",t),o=o.set("channelAppId",_),this.http.get(`${P.N.apiServer}/api/Teams?${o.toString()}`)}TeamPost(t){return this.http.post(`${P.N.apiServer}/api/Teams`,t)}TeamPut(t,_){return this.http.put(`${P.N.apiServer}/api/Teams/${t}`,_)}TeamDelete(t){return this.http.delete(`${P.N.apiServer}/api/Teams/${t}`)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(C.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var y=d(8468);function Re(n,r){if(1&n&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.xp6(1),e.Oqu(t.nickName)}}function Ne(n,r){1&n&&e._UZ(0,"app-skeleton-table")}function he(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._UZ(2,"img",30),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e.TgZ(12,"button",31),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw(2).delTeamUser(i.id)}),e.SDv(13,32),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=r.$implicit;e.xp6(2),e.Q6J("src",t.avatar,e.LSH),e.xp6(2),e.Oqu(t.nickName),e.xp6(2),e.Oqu(t.role),e.xp6(2),e.Oqu(t.permission),e.xp6(2),e.Oqu(t.lastUpdate)}}function ve(n,r){if(1&n&&(e.TgZ(0,"div",22),e.TgZ(1,"table",23),e.TgZ(2,"thead"),e.TgZ(3,"tr"),e.TgZ(4,"th",0),e.SDv(5,24),e.qZA(),e.TgZ(6,"th",0),e.SDv(7,25),e.qZA(),e.TgZ(8,"th",0),e.SDv(9,26),e.qZA(),e.TgZ(10,"th",0),e.SDv(11,27),e.qZA(),e.TgZ(12,"th",0),e.SDv(13,28),e.qZA(),e._UZ(14,"th"),e.qZA(),e.qZA(),e.TgZ(15,"tbody"),e.YNc(16,he,14,5,"tr",19),e.qZA(),e.qZA(),e._UZ(17,"app-nodata",29),e.qZA()),2&n){const t=e.oxw();e.xp6(16),e.Q6J("ngForOf",t.data),e.xp6(1),e.Q6J("show",t.data.length<1)("className","mt-5 pt-5")}}let te=(()=>{class n{constructor(t){this.serv=t,this.onemit=new e.vpe,this.loading=!1,this.data=[],this.addModel={userID:"",role:"user",permission:"read"}}ngOnChanges(){this.getData()}getData(){this.loading=!0,this.serv.Teams(this.bizCode,this.item.id).subscribe(t=>{this.loading=!1,this.data=t.data})}close(){this.onemit.emit("Blobs")}addTeamUser(){this.serv.TeamPost({channelCode:this.bizCode,channelAppId:this.item.id,role:this.addModel.role,permission:this.addModel.permission,userID:this.addModel.userID}).subscribe(t=>{console.log(t),t?this.getData():c.F.fire({icon:"error",titleText:t.err})})}delTeamUser(t){this.serv.TeamDelete(t).subscribe(_=>{console.log(_),this.getData()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(fe))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-team-editor"]],inputs:{item:"item",bizCode:"bizCode"},outputs:{onemit:"onemit"},features:[e.TTD],decls:32,vars:7,consts:function(){let r,t,_,o,i,a,s,l,u,A;return r=$localize`:@@添加成员:添加成员`,t=$localize`:@@用户:用户`,_=$localize`:@@管理员:管理员`,o=$localize`:@@添加:添加`,i=$localize`:@@用户:用户`,a=$localize`:@@昵称:昵称`,s=$localize`:@@角色:角色`,l=$localize`:@@权限:权限`,u=$localize`:@@加入时间:加入时间`,A=$localize`:@@移除:移除`,[["translate",""],r,[1,"my-2","d-flex","flex-columns","gap-2","alert","alert-warning","mt-0","mb-3"],[1,"w-25"],["type","text","placeholder","userID",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-control",3,"ngModel","ngModelChange"],["value","user","translate",""],t,["value","admin","translate",""],_,["value","read"],["value","write"],["value","readwrite"],["type","button","translate","",1,"btn","btn-indigo",3,"click"],o,[1,"my-2","d-flex","flex-columns","gap-2"],["type","button","matRipple","","translate","",1,"btn","btn-indigo",3,"click"],["type","text","list","tempTags","matRipple","",1,"form-control",3,"ngModel","ngModelChange"],["id","tempTags"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","table-responsive mb-0 border-top",4,"ngIf"],[1,"table-responsive","mb-0","border-top"],[1,"table","card-table","table-vcenter","text-nowrap","datatable","border"],i,a,s,l,u,[3,"show","className"],[1,"avatar",3,"src"],["type","button","translate","",1,"btn","btn-outline-danger","btn-sm",3,"click"],A]},template:function(t,_){1&t&&(e.TgZ(0,"h4",0),e.SDv(1,1),e.qZA(),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"input",4),e.NdJ("ngModelChange",function(i){return _.addModel.userID=i}),e.qZA(),e.qZA(),e.TgZ(5,"div",3),e.TgZ(6,"select",5),e.NdJ("ngModelChange",function(i){return _.addModel.role=i}),e.TgZ(7,"option",6),e.SDv(8,7),e.qZA(),e.TgZ(9,"option",8),e.SDv(10,9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",3),e.TgZ(12,"select",5),e.NdJ("ngModelChange",function(i){return _.addModel.permission=i}),e.TgZ(13,"option",10),e._uU(14,"read"),e.qZA(),e.TgZ(15,"option",11),e._uU(16,"write"),e.qZA(),e.TgZ(17,"option",12),e._uU(18,"readwrite"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div"),e.TgZ(20,"button",13),e.NdJ("click",function(){return _.addTeamUser()}),e.SDv(21,14),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"div",15),e.TgZ(23,"div"),e.TgZ(24,"button",16),e.NdJ("click",function(){return _.getData()}),e._uU(25,"\u5237\u65b0"),e.qZA(),e.qZA(),e.TgZ(26,"div"),e.TgZ(27,"input",17),e.NdJ("ngModelChange",function(i){return _.nameFilter=i}),e.qZA(),e.TgZ(28,"datalist",18),e.YNc(29,Re,2,1,"option",19),e.qZA(),e.qZA(),e.qZA(),e.YNc(30,Ne,1,0,"app-skeleton-table",20),e.YNc(31,ve,18,3,"div",21)),2&t&&(e.xp6(4),e.Q6J("ngModel",_.addModel.userID),e.xp6(2),e.Q6J("ngModel",_.addModel.role),e.xp6(6),e.Q6J("ngModel",_.addModel.permission),e.xp6(15),e.Q6J("ngModel",_.nameFilter),e.xp6(2),e.Q6J("ngForOf",_.data),e.xp6(1),e.Q6J("ngIf",_.loading),e.xp6(1),e.Q6J("ngIf",!_.loading))},directives:[m.Pi,g.Fj,g.JJ,g.On,g.EJ,g.YN,g.Kr,S.wG,E.sg,E.O5,y.i,h.H],styles:[""]}),n})(),be=(()=>{class n{constructor(){this.onemit=new e.vpe}ngOnChanges(){}close(){this.onemit.emit("Team")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-app-team"]],inputs:{item:"item"},outputs:{onemit:"onemit"},features:[e.TTD],decls:10,vars:5,consts:[[1,"position-fixed","slidePannel","shadow","border","border-right-0","bg-white"],[1,"app-setting-main"],[1,"modal-header"],[1,"mb-0"],["type","button","matRipple","",1,"btn-close",3,"click"],[3,"pannelName","onemit"],[1,"modal-body","pt-2"],[1,"p-2"],[3,"item","bizCode"]],template:function(t,_){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h2",3),e._uU(4),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return _.close()}),e.qZA(),e.qZA(),e._UZ(6,"app-app-menus",5),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e._UZ(9,"app-team-editor",8),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Oqu(_.item.name),e.xp6(2),e.Q6J("pannelName","Team")("onemit",_.onemit),e.xp6(3),e.Q6J("item",_.item)("bizCode","app"))},directives:[S.wG,N,te],styles:[""]}),n})(),De=(()=>{class n{constructor(t){this.http=t}ReportUsers(t){return this.http.get(`${P.N.apiServer}/api/Report/${t}/Users`)}ReportUserByDays(t,_){let o=new C.LE;return o=o.set("take",_),this.http.get(`${P.N.apiServer}/api/Report/${t}/UserByDays?${o.toString()}`)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(C.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Le(n,r){if(1&n&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.qZA()),2&n){const t=r.$implicit;e.xp6(2),e.Oqu(t.lastUpdate.substr(0,10)),e.xp6(2),e.Oqu(t.total)}}let $e=(()=>{class n{constructor(t){this.serv=t,this.onemit=new e.vpe,this.data=[],this.total=0}ngOnChanges(t){this.serv.ReportUserByDays(this.item.id,30).subscribe(_=>{this.data=_.data,_.data.length>0&&(this.total=_.data.map(o=>o.total).reduce((o,i)=>o+i))})}close(){this.onemit.emit("Report")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(De))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-app-report"]],inputs:{item:"item"},outputs:{onemit:"onemit"},features:[e.TTD],decls:29,vars:5,consts:[[1,"position-fixed","slidePannel","shadow","border","border-right-0","bg-white"],[1,"app-setting-main"],[1,"modal-header"],[1,"mb-0"],["type","button","matRipple","",1,"btn-close",3,"click"],[1,"modal-body","pt-2"],[1,"col-12"],[1,"row","row-cards"],[1,"col-6"],[1,"card","card-sm"],[1,"card-body"],[1,"row","align-items-center"],[1,"col"],[1,"font-weight-medium"],["translate",""],[1,"table-responsive","my-2","border"],[1,"table","card-table","table-vcenter","table-hover","text-nowrap","datatable"],["width","50px","translate",""],[4,"ngFor","ngForOf"],[3,"show","className"]],template:function(t,_){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h2",3),e._uU(4),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return _.close()}),e.qZA(),e.qZA(),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"div",8),e.TgZ(10,"div",9),e.TgZ(11,"div",10),e.TgZ(12,"div",11),e.TgZ(13,"div",12),e.TgZ(14,"div",13),e._uU(15),e.TgZ(16,"span",14),e._uU(17,"\u4e2a\u7528\u6237"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"div",15),e.TgZ(19,"table",16),e.TgZ(20,"thead"),e.TgZ(21,"tr"),e.TgZ(22,"th",17),e._uU(23,"\u65e5\u671f"),e.qZA(),e.TgZ(24,"th",14),e._uU(25,"\u65b0\u589e\u7528\u6237\u6570"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"tbody"),e.YNc(27,Le,5,2,"tr",18),e.qZA(),e.qZA(),e.qZA(),e._UZ(28,"app-nodata",19),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Oqu(_.item.name),e.xp6(11),e.hij(" ",_.total," "),e.xp6(12),e.Q6J("ngForOf",_.data),e.xp6(1),e.Q6J("show",_.data.length<1)("className","mt-5 pt-5"))},directives:[S.wG,m.Pi,E.sg,h.H],styles:[""]}),n})();const J=function(n){return{"text-decoration-underline":n}};let x=(()=>{class n{constructor(){}ngOnInit(){}togglePannel(t){this.onemit.emit("toggle:"+t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-project-menus"]],inputs:{onemit:"onemit",pannelName:"pannelName"},decls:9,vars:12,consts:function(){let r,t,_,o;return r=$localize`:@@基本信息:基本信息`,t=$localize`:@@项目配置:项目配置`,_=$localize`:@@文件管理:文件管理`,o=$localize`:@@成员列表:成员列表`,[[1,"nav","nav-pills","nav-fill","flex-column","flex-sm-row","border-bottom"],["matRipple","","href","javascript:void(0)","translate","",1,"btn","btn-link","flex-fill","text-dark",3,"ngClass","click"],r,t,_,o]},template:function(t,_){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"a",1),e.NdJ("click",function(){return _.togglePannel("ProjectSetting")}),e.SDv(2,2),e.qZA(),e.TgZ(3,"a",1),e.NdJ("click",function(){return _.togglePannel("ProjectProperty")}),e.SDv(4,3),e.qZA(),e.TgZ(5,"a",1),e.NdJ("click",function(){return _.togglePannel("ProjectBlobs")}),e.SDv(6,4),e.qZA(),e.TgZ(7,"a",1),e.NdJ("click",function(){return _.togglePannel("ProjectTeam")}),e.SDv(8,5),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngClass",e.VKq(4,J,"ProjectSetting"==_.pannelName)),e.xp6(2),e.Q6J("ngClass",e.VKq(6,J,"ProjectProperty"==_.pannelName)),e.xp6(2),e.Q6J("ngClass",e.VKq(8,J,"ProjectBlobs"==_.pannelName)),e.xp6(2),e.Q6J("ngClass",e.VKq(10,J,"ProjectTeam"==_.pannelName)))},directives:[S.wG,m.Pi,E.mk],styles:[""]}),n})(),Ie=(()=>{class n{constructor(t,_){this.http=t,this.serv=_,this.onemit=new e.vpe}ngOnChanges(){console.log(this.item)}UploadAppLogo(t){}updateProject(t){this.serv.ProjectPut(this.item.id,this.item).subscribe(_=>{c.F.fire({icon:"success",titleText:"\u66f4\u65b0\u6210\u529f"})})}close(){this.onemit.emit("Setting"),this.onemit.emit("ProjectSetting")}UploadProjectLogo(t){var _=new FormData;_.append("file",t.currentTarget.files[0]),this.http.post(`${P.N.apiServer}/api/Projects/${this.item.id}/UploadBlob`,_).subscribe(o=>{200==o.code?this.item.logo=o.data:c.F.fire({icon:"error",titleText:o.err})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(C.eN),e.Y36(w.m))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-projects-setting"]],inputs:{item:"item"},outputs:{onemit:"onemit"},features:[e.TTD],decls:27,vars:6,consts:function(){let r,t,_;return r=$localize`:@@名称:名称`,t=$localize`:@@描述:描述`,_=$localize`:@@更新:更新`,[[1,"position-fixed","slidePannel","shadow","border","border-right-0","bg-white"],[1,"app-setting-main"],[1,"modal-header"],[1,"mb-0"],["type","button","matRipple","",1,"btn-close",3,"click"],[3,"pannelName","onemit"],[1,"modal-body","pt-2"],[1,"p-2"],[1,"mb-3"],[1,"form-label"],["translate","",1,"form-label"],r,["type","text",1,"form-control",3,"ngModel","ngModelChange"],t,["rows","5",1,"form-control",3,"ngModel","ngModelChange"],["type","button","translate","",1,"btn","btn-indigo",3,"click"],_,["type","button","matRipple","","translate","",1,"btn","btn-white","mx-2",3,"click"]]},template:function(t,_){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h2",3),e._uU(4),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return _.close()}),e.qZA(),e.qZA(),e._UZ(6,"app-project-menus",5),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"div",8),e.TgZ(10,"label",9),e._uU(11,"\u9879\u76eeID"),e.qZA(),e.TgZ(12,"code"),e._uU(13),e.qZA(),e.qZA(),e.TgZ(14,"div",8),e.TgZ(15,"label",10),e.SDv(16,11),e.qZA(),e.TgZ(17,"input",12),e.NdJ("ngModelChange",function(i){return _.item.name=i}),e.qZA(),e.qZA(),e.TgZ(18,"div",8),e.TgZ(19,"label",10),e.SDv(20,13),e.qZA(),e.TgZ(21,"textarea",14),e.NdJ("ngModelChange",function(i){return _.item.description=i}),e.qZA(),e.qZA(),e.TgZ(22,"div"),e.TgZ(23,"button",15),e.NdJ("click",function(i){return _.updateProject(i)}),e.SDv(24,16),e.qZA(),e.TgZ(25,"button",17),e.NdJ("click",function(){return _.close()}),e._uU(26," \u5173\u95ed "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Oqu(_.item.name),e.xp6(2),e.Q6J("pannelName","ProjectSetting")("onemit",_.onemit),e.xp6(7),e.Oqu(_.item.id),e.xp6(4),e.Q6J("ngModel",_.item.name),e.xp6(4),e.Q6J("ngModel",_.item.description))},directives:[S.wG,x,m.Pi,g.Fj,g.JJ,g.On],styles:[""]}),n})(),qe=(()=>{class n{constructor(t){this.serv=t,this.onemit=new e.vpe}close(){this.onemit.emit("ProjectProperty")}onEditorEmit(t){t.input.id?this.serv.PropertySettingPut(t.input.id,t.input).subscribe(_=>{c.F.fire({icon:"success",titleText:"\u8bbe\u7f6e\u6210\u529f\uff01"})}):this.serv.PropertySettingPost({channelCode:"project",channelAppId:this.item.id,name:t.value,value:t.input.value}).subscribe(_=>{c.F.fire({icon:"success",titleText:"\u8bbe\u7f6e\u6210\u529f\uff01"})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(G.I))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-project-property"]],inputs:{item:"item"},outputs:{onemit:"onemit"},decls:9,vars:6,consts:[[1,"position-fixed","slidePannel","shadow","border","border-right-0","bg-white"],[1,"app-setting-main"],[1,"modal-header"],[1,"mb-0"],["type","button","matRipple","",1,"btn-close",3,"click"],[3,"isProjectMenu","pannelName","onemit"],[1,"modal-body","pt-2"],[3,"item","bizCode","onemit"]],template:function(t,_){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h2",3),e._uU(4),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return _.close()}),e.qZA(),e.qZA(),e._UZ(6,"app-project-menus",5),e.TgZ(7,"div",6),e.TgZ(8,"app-property-editor",7),e.NdJ("onemit",function(i){return _.onEditorEmit(i)}),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Oqu(_.item.name),e.xp6(2),e.Q6J("isProjectMenu",!0)("pannelName","ProjectProperty")("onemit",_.onemit),e.xp6(2),e.Q6J("item",_.item)("bizCode","project"))},directives:[S.wG,x,Y.X],styles:[""]}),n})(),Ue=(()=>{class n{constructor(){this.onemit=new e.vpe}close(){this.onemit.emit("ProjectBlobs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-project-blobs"]],inputs:{item:"item"},outputs:{onemit:"onemit"},decls:9,vars:5,consts:[[1,"position-fixed","slidePannel","shadow","border","border-right-0","bg-white"],[1,"app-setting-main"],[1,"modal-header"],[1,"mb-0"],["type","button","matRipple","",1,"btn-close",3,"click"],[3,"pannelName","onemit"],[1,"modal-body","pt-2"],[3,"item","bizCode"]],template:function(t,_){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h2",3),e._uU(4),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return _.close()}),e.qZA(),e.qZA(),e._UZ(6,"app-project-menus",5),e.TgZ(7,"div",6),e._UZ(8,"app-blob-editor",7),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Oqu(_.item.name),e.xp6(2),e.Q6J("pannelName","ProjectBlobs")("onemit",_.onemit),e.xp6(2),e.Q6J("item",_.item)("bizCode","project"))},directives:[S.wG,x,H.B],styles:[""]}),n})(),ye=(()=>{class n{constructor(){this.onemit=new e.vpe}close(){this.onemit.emit("ProjectTeam")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-project-team"]],inputs:{item:"item"},outputs:{onemit:"onemit"},decls:10,vars:6,consts:[[1,"position-fixed","slidePannel","shadow","border","border-right-0","bg-white"],[1,"app-setting-main"],[1,"modal-header"],[1,"mb-0"],["type","button","matRipple","",1,"btn-close",3,"click"],[3,"isProjectMenu","pannelName","onemit"],[1,"modal-body","pt-2"],[1,"p-2"],[3,"item","bizCode"]],template:function(t,_){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h2",3),e._uU(4),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return _.close()}),e.qZA(),e.qZA(),e._UZ(6,"app-project-menus",5),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e._UZ(9,"app-team-editor",8),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Oqu(_.item.name),e.xp6(2),e.Q6J("isProjectMenu",!0)("pannelName","ProjectTeam")("onemit",_.onemit),e.xp6(3),e.Q6J("item",_.item)("bizCode","project"))},directives:[S.wG,x,te],styles:[""]}),n})();var Je=d(8789),xe=d(9286);function we(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"app-app-blobs",29),e.NdJ("onemit",function(o){return e.CHM(t),e.oxw().onPannelEmit(o)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("item",t.selectedApp)}}function Ge(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"app-app-property",29),e.NdJ("onemit",function(o){return e.CHM(t),e.oxw().onPannelEmit(o)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("item",t.selectedApp)}}function ke(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"app-app-qrcode",29),e.NdJ("onemit",function(o){return e.CHM(t),e.oxw().onPannelEmit(o)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("item",t.selectedApp)}}function Fe(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"app-app-publish",29),e.NdJ("onemit",function(o){return e.CHM(t),e.oxw().onPannelEmit(o)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("item",t.selectedApp)}}function je(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"app-app-setting",29),e.NdJ("onemit",function(o){return e.CHM(t),e.oxw().onPannelEmit(o)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("item",t.selectedApp)}}function Xe(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"app-app-team",29),e.NdJ("onemit",function(o){return e.CHM(t),e.oxw().onPannelEmit(o)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("item",t.selectedApp)}}function Qe(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"app-app-report",29),e.NdJ("onemit",function(o){return e.CHM(t),e.oxw().onPannelEmit(o)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("item",t.selectedApp)}}function Be(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"app-projects-setting",29),e.NdJ("onemit",function(o){return e.CHM(t),e.oxw().onPannelEmit(o)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("item",t.project.data)}}function ze(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"app-project-property",29),e.NdJ("onemit",function(o){return e.CHM(t),e.oxw().onPannelEmit(o)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("item",t.project.data)}}function He(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"app-project-blobs",29),e.NdJ("onemit",function(o){return e.CHM(t),e.oxw().onPannelEmit(o)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("item",t.project.data)}}function Ye(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"app-project-team",29),e.NdJ("onemit",function(o){return e.CHM(t),e.oxw().onPannelEmit(o)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("item",t.project.data)}}function Ke(n,r){1&n&&e._UZ(0,"option",30),2&n&&e.s9C("value",r.$implicit.name)}function Ve(n,r){1&n&&e._UZ(0,"app-skeleton-cards3")}function We(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",64),e.TgZ(1,"button",65),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.oxw(2).openByVsCode(o)}),e.SDv(2,66),e.qZA(),e.qZA()}}const et=function(n){return[n,"users"]},tt=function(n){return[n,"storage"]},_t=function(n){return[n,"ranks"]};function nt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",3),e.TgZ(1,"div",34),e.TgZ(2,"div",35),e.TgZ(3,"span",36),e._uU(4),e.qZA(),e.TgZ(5,"div",37),e.TgZ(6,"button",38),e._UZ(7,"i",39),e.TgZ(8,"font",5),e.SDv(9,40),e.qZA(),e.qZA(),e.TgZ(10,"div",20),e.TgZ(11,"a",41),e.SDv(12,42),e.qZA(),e.TgZ(13,"a",41),e.SDv(14,43),e.qZA(),e.TgZ(15,"a",41),e.SDv(16,44),e.qZA(),e._UZ(17,"div",45),e.TgZ(18,"a",46),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw(2).transApp(i.id)}),e.SDv(19,47),e.qZA(),e.TgZ(20,"a",48),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw(2).delApp(i.id)}),e.SDv(21,49),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"div",50),e.TgZ(23,"div",51),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw(2).showPannel("Setting",i)}),e.TgZ(24,"a",52),e._UZ(25,"img",53),e.qZA(),e.qZA(),e.TgZ(26,"div",54),e.TgZ(27,"a",55),e._uU(28),e.qZA(),e.qZA(),e.TgZ(29,"div",56),e.TgZ(30,"div",57),e.TgZ(31,"div",58),e.TgZ(32,"button",59),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw(2).showPannel("Publish",i)}),e.SDv(33,60),e.qZA(),e.qZA(),e.qZA(),e.TgZ(34,"div",57),e.TgZ(35,"div",58),e.TgZ(36,"button",59),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw(2).showPannel("Report",i)}),e.SDv(37,61),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"div",62),e.YNc(39,We,3,0,"div",63),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=r.$implicit,_=e.oxw(2);e.xp6(4),e.Oqu(t.name),e.xp6(7),e.Q6J("routerLink",e.VKq(8,et,t.id)),e.xp6(2),e.Q6J("routerLink",e.VKq(10,tt,t.id)),e.xp6(2),e.Q6J("routerLink",e.VKq(12,_t,t.id)),e.xp6(10),e.Q6J("src",t.logo,e.LSH),e.xp6(2),e.s9C("href",t.website,e.LSH),e.xp6(1),e.hij(" ",t.website," "),e.xp6(11),e.Q6J("ngIf",_.projectRootPath)}}const ot=function(n){return{name:n}};function it(n,r){if(1&n&&(e.TgZ(0,"div",31),e.YNc(1,nt,40,14,"div",32),e.ALo(2,"propertyFilter"),e.qZA(),e._UZ(3,"app-nodata",33)),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.xi3(2,3,t.apps.data,e.VKq(6,ot,t.appNameFilter))),e.xp6(2),e.Q6J("show",t.apps.data.length<1)("className","pt-5")}}function rt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",67),e.TgZ(1,"div",68),e.TgZ(2,"button",59),e.NdJ("click",function(){return e.CHM(t),e.oxw().loadMore()}),e.SDv(3,69),e.qZA(),e.qZA(),e.qZA()}}const at=function(n){return["/projects",n,"add"]};let st=(()=>{class n{constructor(t,_,o,i,a,s,l){this.router=t,this.projServ=_,this.propServ=o,this.serv=i,this.route=a,this.spinner=s,this.translate=l,this.Pannels={Blobs:!1,Program:!1,Property:!1,Qrcode:!1,Publish:!1,Setting:!1,Team:!1,Report:!1,ProjectSetting:!1,ProjectProperty:!1,ProjectBlobs:!1,ProjectTeam:!1},this.apps={skip:0,take:20,data:[],total:0},this.project={skip:0,take:20,data:[],total:0},this.loading=!1}ngOnInit(){this.route.params.subscribe(t=>{this.apps.skip=0,this.apps.data=[],this.projectId=t.id,this.getData(),this.getProjectSettings()})}getProjectSettings(){this.propServ.PropertySettings("project",this.projectId).subscribe(t=>{if(200==t.code&&t.data.length>0){var _=t.data.filter(o=>"ProjectRoot"==o.name)[0].value;this.projectRootPath=_}})}getData(){this.loading=!0,(0,B.D)([this.serv.Apps(this.projectId,this.apps.skip,this.apps.take),this.projServ.Project(this.projectId)]).subscribe(t=>{this.apps.total=t[0].data.total,this.apps.data=this.apps.data.concat(t[0].data.data),this.project.data=t[1].data,this.loading=!1})}showPannel(t,_){Object.keys(this.Pannels).forEach(o=>{this.Pannels[o]=!1}),this.Pannels[t]=!0,this.selectedApp=_}onPannelEmit(t){"getData"==t?this.getData():t.indexOf("toggle:")>-1?(Object.keys(this.Pannels).forEach(_=>{this.Pannels[_]=!1}),this.Pannels[t.split(":")[1]]=!0):this.Pannels[t]=!1}openByVsCode(t){window.open(`vscode://file/${this.projectRootPath}\\${t.serverPath}`)}showProjectPannel(t){Object.keys(this.Pannels).forEach(_=>{this.Pannels[_]=!1}),this.Pannels[t]=!0}delProject(){var t=this;return(0,Z.Z)(function*(){!(yield c.R.fire({icon:"question",titleText:t.translate.instant("\u662f\u5426\u786e\u8ba4\u63d0\u4ea4?"),showCancelButton:!0})).isConfirmed||(t.spinner.show(),t.projServ.ProjectDelete(t.projectId).subscribe(o=>{t.spinner.hide(),c.F.fire({icon:"success",titleText:t.translate.instant("\u5220\u9664\u6210\u529f")}),t.router.navigateByUrl("/",{state:{reload:!0}})}))})()}delApp(t){var _=this;return(0,Z.Z)(function*(){var o=yield c.R.fire({icon:"question",titleText:_.translate.instant("\u662f\u5426\u786e\u8ba4\u5220\u9664\uff1f"),showCancelButton:!0}),{isConfirmed:i}=o;(0,Q._T)(o,["isConfirmed"]),!i||(_.spinner.show(),_.serv.AppDelete(t).subscribe(s=>{_.spinner.hide(),200==s.code&&_.getData()}))})()}loadMore(){this.apps.skip+=this.apps.take,this.getData()}transApp(t){var _=this;return(0,Z.Z)(function*(){var o=yield c.R.fire({title:"\u5e94\u7528\u8f6c\u79fb",showCancelButton:!0,inputLabel:"\u8bf7\u8f93\u5165\u9879\u76eeID...",input:"text"});if(o.isConfirmed){if(isNaN(o.value))return void c.F.fire({icon:"error",titleText:"\u5fc5\u987b\u662f\u6570\u5b57"});_.serv.AppTransfer(t,o.value).subscribe(i=>{200==i.code?(c.F.fire({icon:"success",titleText:"\u8f6c\u79fb\u6210\u529f\uff01"}),_.apps.data=[],_.apps.skip=0,_.getData()):c.F.fire({icon:"error",titleText:i.err})})}})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(O.F0),e.Y36(w.m),e.Y36(G.I),e.Y36(f.b),e.Y36(O.gz),e.Y36(z.t2),e.Y36(m.sK))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-app-list"]],decls:43,vars:21,consts:function(){let r,t,_,o,i,a,s,l,u,A,p,M,v,b,D,L;return r=$localize`:@@应用:应用`,t=$localize`:@@条数据:条数据`,_=$localize`:@@新建应用:新建应用`,o=$localize`:@@操作:操作`,i=$localize`:@@项目设置:项目设置`,a=$localize`:@@删除项目:删除项目`,s=$localize`:@@管理:管理`,l=$localize`:@@用户池:用户池`,u=$localize`:@@数据库:数据库`,A=$localize`:@@排行榜:排行榜`,p=$localize`:@@转移到项目:转移到项目`,M=$localize`:@@删除应用:删除应用`,v=$localize`:@@发布站点: 发布站点 `,b=$localize`:@@统计:统计`,D=$localize`:@@打开项目（VS Code）: 打开项目（VS Code） `,L=$localize`:@@加载更多...:加载更多...`,[[3,"item","onemit",4,"ngIf"],[1,"page-header","mt-0","mb-3"],[1,"row","align-items-center"],[1,"col"],[1,"page-title"],["translate",""],r,[1,"text-muted"],t,[1,"col-auto","ms-auto","d-print-none"],[1,"d-flex"],[1,"me-3","d-none","d-md-block"],["list","datalistOptions",1,"form-control",3,"ngModel","ngModelChange"],["id","datalistOptions"],[3,"value",4,"ngFor","ngForOf"],["matRipple","","translate","",1,"btn","btn-indigo",3,"routerLink"],_,[1,"btn-group","text-secondary","mx-2"],["type","button","data-bs-toggle","dropdown","aria-haspopup","true","matRipple","","translate","",1,"btn","btn-white","dropdown-toggle"],o,[1,"dropdown-menu","dropdown-menu-right","dropdown-menu-lg-left"],["href","javascript:void(0)","matRipple","","translate","",1,"dropdown-item",3,"click"],i,["href","javascript:void(0)","matRipple","","translate","",1,"dropdown-item","text-danger",3,"click"],a,[4,"ngIf","ngIfElse"],["templateName",""],["class","d-grid",4,"ngIf"],["size","default","color","#fff","type","ball-beat"],[3,"item","onemit"],[3,"value"],[1,"row","row-cols-1","row-cols-lg-3","row-cols-md-2","row-cols-sm-1","g-4"],["class","col",4,"ngFor","ngForOf"],[3,"show","className"],[1,"card","shadow"],[1,"card-header","d-flex"],[1,"w-100"],[1,"btn-group"],["type","button","data-bs-toggle","dropdown","aria-haspopup","true","aria-expanded","false","matRipple","",1,"btn","btn-white","dropdown-toggle"],[1,"fa","fa-mixcloud"],s,["translate","",1,"dropdown-item",3,"routerLink"],l,u,A,[1,"dropdown-divider"],["href","javascript:void(0)","translate","","matRipple","",1,"dropdown-item",3,"click"],p,["href","javascript:void(0)","translate","","matRipple","",1,"dropdown-item","text-danger",3,"click"],M,[1,"card-body","text-center"],["matRipple","",3,"click"],["href","javascript:void(0);"],["width","128px",3,"src"],[1,"my-3","d-grid","overflow-hidden"],["target","_blank",1,"btn","btn-white",3,"href"],[1,"d-flex","flex-row","align-items-center","align-self-center","align-content-center","flex-wrap"],[1,"flex-fill","w-50"],[1,"d-grid","mx-1"],["type","button","matRipple","","translate","",1,"btn","btn-white",3,"click"],v,b,[1,"d-flex","flex-row","align-items-center","align-self-center","align-content-center","flex-wrap","mt-3"],["class","ms-auto",4,"ngIf"],[1,"ms-auto"],["type","button","translate","",1,"btn","btn-white","btn-sm",3,"click"],D,[1,"d-grid"],[1,"text-center","mt-5"],L]},template:function(t,_){if(1&t&&(e.YNc(0,we,1,1,"app-app-blobs",0),e.YNc(1,Ge,1,1,"app-app-property",0),e.YNc(2,ke,1,1,"app-app-qrcode",0),e.YNc(3,Fe,1,1,"app-app-publish",0),e.YNc(4,je,1,1,"app-app-setting",0),e.YNc(5,Xe,1,1,"app-app-team",0),e.YNc(6,Qe,1,1,"app-app-report",0),e.YNc(7,Be,1,1,"app-projects-setting",0),e.YNc(8,ze,1,1,"app-project-property",0),e.YNc(9,He,1,1,"app-project-blobs",0),e.YNc(10,Ye,1,1,"app-project-team",0),e.TgZ(11,"div",1),e.TgZ(12,"div",2),e.TgZ(13,"div",3),e.TgZ(14,"h2",4),e._uU(15),e.TgZ(16,"span",5),e.SDv(17,6),e.qZA(),e.qZA(),e.TgZ(18,"p",7),e._uU(19),e.TgZ(20,"span",5),e.SDv(21,8),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"div",9),e.TgZ(23,"div",10),e.TgZ(24,"div",11),e.TgZ(25,"input",12),e.NdJ("ngModelChange",function(i){return _.appNameFilter=i}),e.qZA(),e.TgZ(26,"datalist",13),e.YNc(27,Ke,1,1,"option",14),e.qZA(),e.qZA(),e.TgZ(28,"a",15),e.SDv(29,16),e.qZA(),e.TgZ(30,"div",17),e.TgZ(31,"button",18),e.SDv(32,19),e.qZA(),e.TgZ(33,"div",20),e.TgZ(34,"a",21),e.NdJ("click",function(){return _.showProjectPannel("ProjectSetting")}),e.SDv(35,22),e.qZA(),e.TgZ(36,"a",23),e.NdJ("click",function(){return _.delProject()}),e.SDv(37,24),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(38,Ve,1,0,"app-skeleton-cards3",25),e.YNc(39,it,4,8,"ng-template",null,26,e.W1O),e.YNc(41,rt,4,0,"div",27),e._UZ(42,"ngx-spinner",28)),2&t){const o=e.MAs(40);e.Q6J("ngIf",_.Pannels.Blobs),e.xp6(1),e.Q6J("ngIf",_.Pannels.Property),e.xp6(1),e.Q6J("ngIf",_.Pannels.Qrcode),e.xp6(1),e.Q6J("ngIf",_.Pannels.Publish),e.xp6(1),e.Q6J("ngIf",_.Pannels.Setting),e.xp6(1),e.Q6J("ngIf",_.Pannels.Team),e.xp6(1),e.Q6J("ngIf",_.Pannels.Report),e.xp6(1),e.Q6J("ngIf",_.Pannels.ProjectSetting),e.xp6(1),e.Q6J("ngIf",_.Pannels.ProjectProperty),e.xp6(1),e.Q6J("ngIf",_.Pannels.ProjectBlobs),e.xp6(1),e.Q6J("ngIf",_.Pannels.ProjectTeam),e.xp6(5),e.hij("",_.project.data.name," - "),e.xp6(4),e.Oqu(_.apps.total),e.xp6(6),e.Q6J("ngModel",_.appNameFilter),e.xp6(2),e.Q6J("ngForOf",_.apps.data),e.xp6(1),e.Q6J("routerLink",e.VKq(19,at,_.projectId)),e.xp6(10),e.Q6J("ngIf",_.loading)("ngIfElse",o),e.xp6(3),e.Q6J("ngIf",_.apps.data.length<_.apps.total)}},directives:[E.O5,m.Pi,g.Fj,g.JJ,g.On,E.sg,O.yS,S.wG,z.Ro,re,ae,se,W,Ze,be,$e,Ie,qe,Ue,ye,g.YN,g.Kr,Je.O,h.H],pipes:[xe.K],styles:[""]}),n})(),lt=(()=>{class n{constructor(t){this.http=t}AppStorageCreate(t){return this.http.post(`${P.N.apiServer}/api/AppStorage/${t}`,{})}AppStorageTables(t){return this.http.get(`${P.N.apiServer}/api/AppStorage/${t}/Tables`)}AppStorageQuery(t,_,o,i,a,s){let l=new C.LE;return l=l.set("tName",_),l=l.set("filter",o),l=l.set("sort",i),l=l.set("take",a),l=l.set("skip",s),this.http.get(`${P.N.apiServer}/api/AppStorage/${t}/Query?${l.toString()}`)}AppStorageDetail(t,_){let o=new C.LE;return o=o.set("id",_),this.http.get(`${P.N.apiServer}/api/AppStorage/${t}/Detail?${o.toString()}`)}AppStoragePost(t,_,o){let i=new C.LE;return i=i.set("tName",_),this.http.post(`${P.N.apiServer}/api/AppStorage/${t}/Post?${i.toString()}`,o)}AppStorageDelete(t,_){let o=new C.LE;return o=o.set("id",_),this.http.delete(`${P.N.apiServer}/api/AppStorage/${t}/Delete?${o.toString()}`)}AppStoragePut(t,_,o){let i=new C.LE;return i=i.set("id",_),this.http.put(`${P.N.apiServer}/api/AppStorage/${t}/Put?${i.toString()}`,o)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(C.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var j=d(8736);const pt=function(n){return{active:n}};function dt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"a",46),e.NdJ("click",function(){const o=e.CHM(t),i=o.index,a=o.$implicit,s=e.oxw();return s.colIndex=i,s.getDocuments(a.name,i)}),e._uU(1),e.qZA()}if(2&n){const t=r.$implicit,_=r.index,o=e.oxw();e.Q6J("ngClass",e.VKq(2,pt,_==o.colIndex)),e.xp6(1),e.Oqu(t.name)}}function ct(n,r){1&n&&e._UZ(0,"app-skeleton-table")}function ut(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td",53),e.TgZ(2,"a",54),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw(2).showObjectView(i)}),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"td"),e.TgZ(5,"a",55),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw(2).showObjectView(i)}),e.SDv(6,56),e.qZA(),e.TgZ(7,"a",57),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw(2).deleteData(i.id)}),e.SDv(8,58),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=r.$implicit;e.xp6(3),e.hij(" ",t.id," ")}}function gt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",47),e.TgZ(2,"table",48),e.TgZ(3,"thead"),e.TgZ(4,"tr",49),e.TgZ(5,"th"),e._uU(6,"ID"),e.qZA(),e.TgZ(7,"th",50),e._uU(8,"\u64cd\u4f5c"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"tbody"),e.YNc(10,ut,9,1,"tr",51),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"app-pager",52),e.NdJ("onemit",function(o){return e.CHM(t),e.oxw().onemit(o)}),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(10),e.Q6J("ngForOf",t.data.data),e.xp6(1),e.Q6J("data",t.data)}}function Tt(n,r){1&n&&(e.TgZ(0,"div",59),e._UZ(1,"img",60),e.qZA())}const Pt=function(){return{standalone:!0}};let At=(()=>{class n{constructor(t,_,o){this.appServ=t,this.serv=_,this.route=o,this.data={skip:0,take:10,data:[],total:0},this.item={},this.filterInput="",this.selectedTableName="",this.selectedTableIndex=0,this.colIndex=0,this.selectedRowItem={},this.isAddMode=!1}ngOnInit(){this.route.params.subscribe(t=>{this.appId=t.appid,this.getStorageAndApp(),this.serv.AppStorageCreate(this.appId).subscribe(_=>{this.getTables()})})}onemit(t){this.data.skip=t,this.getData()}getStorageAndApp(){this.appServ.App(this.appId).subscribe(t=>{this.item=t.data})}getData(){this.serv.AppStorageQuery(this.appId,this.selectedTableName,this.filterInput,"",this.data.take,this.data.skip).subscribe(t=>{this.data=t.data})}getTables(){this.serv.AppStorageTables(this.appId).subscribe(t=>{this.tables=t.data,t.data.length>0&&(this.getDocuments(t.data[0].name,0),this.colIndex=0)})}getDocuments(t,_){this.selectedTableName=t,this.data.skip=0,this.selectedTableIndex=_,this.getData()}showAddObjectView(){$("#ObjectViewModal").modal("show"),this.isAddMode=!0,this.selectedRowItem={content:{}},this.setEditorValue(this.selectedRowItem.content)}showObjectView(t){$("#ObjectViewModal").modal("show"),this.isAddMode=!1,this.selectedRowItem=t,this.setEditorValue(this.selectedRowItem.content)}setEditorValue(t){let _=this;null==_.CodeMirrorEditor&&(_.CodeMirrorEditor=CodeMirror.fromTextArea(document.getElementById("code"),{mode:"javascript",lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,continueComments:"Enter",extraKeys:{},foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]}),_.CodeMirrorEditor.on("change",function(i,a){try{_.selectedRowItem.content=JSON.parse(_.CodeMirrorEditor.getValue())}catch(s){}_.CodeMirrorEditor.setSize("auto","595px")}));try{var o=JSON.stringify(t,null," ");_.CodeMirrorEditor.setValue(o)}catch(i){_.CodeMirrorEditor.setValue(t)}}deleteData(t){c.R.fire({titleText:"\u662f\u5426\u786e\u8ba4\u5220\u9664\u8be5\u6587\u6863",icon:"warning",showCancelButton:!0}).then(_=>{!_.isConfirmed||this.serv.AppStorageDelete(this.appId,t).subscribe(o=>{this.getTables()})})}submitData(){c.R.fire({title:"\u662f\u5426\u786e\u8ba4\u63d0\u4ea4\uff1f",icon:"warning",showCancelButton:!0}).then(t=>{if(t.isConfirmed){var _;try{_=JSON.parse(this.CodeMirrorEditor.getValue())}catch(o){_=null,c.F.fire({icon:"error",titleText:o})}null!=_&&(this.isAddMode?this.serv.AppStoragePost(this.appId,this.selectedTableName,_).subscribe(o=>{this.getData(),c.F.fire({icon:"success",titleText:"\u6dfb\u52a0\u6210\u529f\uff01"})}):this.serv.AppStoragePut(this.appId,this.selectedRowItem.id,_).subscribe(o=>{this.getData(),c.F.fire({icon:"success",titleText:"\u66f4\u65b0\u6210\u529f\uff01"})}))}})}addNewTable(){c.R.fire({title:"\u8bf7\u8f93\u5165\u6570\u636e\u8868\u540d\u79f0",input:"text"}).then(t=>{t.value&&this.serv.AppStoragePost(this.appId,t.value,{}).subscribe(_=>{200==_.code?this.getTables():c.F.fire({icon:"error",titleText:_.data})})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(f.b),e.Y36(lt),e.Y36(O.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-app-storage"]],decls:52,vars:13,consts:function(){let r,t,_,o,i,a,s,l,u,A;return r=$localize`:@@参考:参考`,t=$localize`:@@数据库工具:数据库工具`,_=$localize`:@@H5新闻管理 示例项目:H5新闻管理 示例项目`,o=$localize`:@@返回:返回`,i=$localize`:@@新建数据表:新建数据表`,a=$localize`:@@查询:查询`,s=$localize`:@@新增:新增`,l=$localize`:@@保存:保存`,u=$localize`:@@查看:查看`,A=$localize`:@@删除:删除`,[[1,"page-header","my-3"],[1,"row","align-items-center","mw-100"],[1,"col-auto"],[1,"avatar"],[1,"col"],[1,"page-title","mb-0"],[1,"col","col-md-auto","ms-auto","d-print-none","d-flex"],[1,"dropdown"],["type","button","data-bs-toggle","dropdown","aria-expanded","false","translate","",1,"btn","btn-white","dropdown-toggle"],r,[1,"dropdown-menu"],["href","https://web.oauthapp.com/examples/storage_tool.html","target","_blank","translate","",1,"dropdown-item"],t,["href","https://web.oauthapp.com/examples/h5wiki.html","target","_blank","translate","",1,"dropdown-item"],_,["onclick","history.back(-1)","matRipple","","translate","",1,"btn","btn-white","mx-2"],o,[1,"row"],[1,"col-2","p-0","overflow-scroll",2,"height","100vh"],["href","javascript:void(0)","matRipple","","translate","",1,"dropdown-item","bg-white","fs-4",3,"click"],i,["href","javascript:void(0)","class","dropdown-item","matRipple","",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"col","p-0","border-left"],[1,"card"],[1,"card-body",2,"min-height","80vh"],[1,"row","mb-3"],[1,"col-12","d-md-flex","flex-md-row","flex-sm-column","gap-2"],["type","text","placeholder","\u5982\uff1a{name:'\u5f20\u4e09'}",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],["type","button","translate","",1,"btn","btn-indigo","mx-1",3,"click"],a,["type","button","translate","",1,"btn","btn-white",3,"click"],s,[4,"ngIf"],["class","mt-5 pt-5 text-center",4,"ngIf"],["tabindex","-1","role","dialog","id","ObjectViewModal",1,"modal"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","gamedataHighlightTitle",1,"modal-title","mb-0"],["type","button","onclick","$('#ObjectViewModal').modal('hide')",1,"btn-close"],[1,"modal-body","p-1",2,"font-size","14px","height","600px","overflow","hidden"],["id","code","name","code",2,"min-height","100%"],[1,"modal-footer","border-top","py-2"],["type","button","data-bs-dismiss","modal","translate","",1,"btn","btn-secondary"],["type","button","data-bs-dismiss","modal","translate","",1,"btn","btn-indigo",3,"click"],l,["href","javascript:void(0)","matRipple","",1,"dropdown-item",3,"ngClass","click"],[1,"table-responsive","mb-0","border-top"],[1,"table","card-table","table-vcenter","text-nowrap","datatable"],[1,"py-4"],["width","150px","translate",""],[4,"ngFor","ngForOf"],[3,"data","onemit"],["matRipple",""],["href","javascript:void(0)",1,"nav-link",3,"click"],["href","javascript:void(0)","matRipple","","translate","",1,"btn","btn-white","mx-2",3,"click"],u,["href","javascript:void(0)","matRipple","","translate","",1,"btn","btn-white",3,"click"],A,[1,"mt-5","pt-5","text-center"],["src","./assets/nodata.png"]]},template:function(t,_){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e._UZ(3,"span",3),e.qZA(),e.TgZ(4,"div",4),e.TgZ(5,"h2",5),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"button",8),e.SDv(10,9),e.qZA(),e.TgZ(11,"ul",10),e.TgZ(12,"li"),e.TgZ(13,"a",11),e.SDv(14,12),e.qZA(),e.qZA(),e.TgZ(15,"li"),e.TgZ(16,"a",13),e.SDv(17,14),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"a",15),e.SDv(19,16),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",17),e.TgZ(21,"div",18),e.TgZ(22,"a",19),e.NdJ("click",function(){return _.addNewTable()}),e.SDv(23,20),e.qZA(),e.YNc(24,dt,2,4,"a",21),e.qZA(),e.TgZ(25,"div",22),e.TgZ(26,"div",23),e.TgZ(27,"div",24),e.TgZ(28,"div",25),e.TgZ(29,"div",26),e.TgZ(30,"input",27),e.NdJ("ngModelChange",function(i){return _.filterInput=i}),e.qZA(),e.TgZ(31,"button",28),e.NdJ("click",function(){return _.getData()}),e.SDv(32,29),e.qZA(),e.TgZ(33,"button",30),e.NdJ("click",function(){return _.showAddObjectView()}),e.SDv(34,31),e.qZA(),e.qZA(),e.qZA(),e.YNc(35,ct,1,0,"app-skeleton-table",32),e.YNc(36,gt,12,2,"div",32),e.YNc(37,Tt,2,0,"div",33),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"div",34),e.TgZ(39,"div",35),e.TgZ(40,"div",36),e.TgZ(41,"div",37),e.TgZ(42,"h3",38),e._uU(43),e.qZA(),e._UZ(44,"button",39),e.qZA(),e.TgZ(45,"div",40),e._UZ(46,"textarea",41),e.qZA(),e.TgZ(47,"div",42),e.TgZ(48,"button",43),e._uU(49,"\u5173\u95ed"),e.qZA(),e.TgZ(50,"button",44),e.NdJ("click",function(){return _.submitData()}),e.SDv(51,45),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Jzz("background-image: url(",_.item.logo,")"),e.xp6(3),e.Oqu(_.item.name),e.xp6(18),e.Q6J("ngForOf",_.tables),e.xp6(6),e.Q6J("ngModel",_.filterInput)("ngModelOptions",e.DdM(12,Pt)),e.xp6(5),e.Q6J("ngIf",_.loading),e.xp6(1),e.Q6J("ngIf",!_.loading&&_.data.data.length>0),e.xp6(1),e.Q6J("ngIf",_.data.data.length<1),e.xp6(6),e.AsE("",_.item.name," - ",_.selectedTableName,""))},directives:[m.Pi,S.wG,E.sg,g.Fj,g.JJ,g.On,E.O5,E.mk,y.i,j.P],styles:["[_nghost-%COMP%]{display:block!important}"],data:{animation:[I.q]}}),n})(),Et=(()=>{class n{constructor(t){this.http=t}AppRankReport(t){return this.http.get(`${P.N.apiServer}/api/AppRank/${t}/Report`)}AppRankList(t,_,o,i){let a=new C.LE;return a=a.set("pltform",o),a=a.set("take",i),this.http.get(`${P.N.apiServer}/api/AppRank/${t}/${_}?${a.toString()}`)}AppRankPut(t,_,o){return this.http.put(`${P.N.apiServer}/api/AppRank/${t}/${_}`,o)}AppRankMe(t,_,o,i){let a=new C.LE;return a=a.set("platform",o),a=a.set("unionID",i),this.http.get(`${P.N.apiServer}/api/AppRank/${t}/${_}/Me?${a.toString()}`)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(C.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const St=function(n){return{active:n}};function mt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"a",31),e.NdJ("click",function(){const o=e.CHM(t),i=o.index,a=o.$implicit,s=e.oxw();return s.colIndex=i,s.getUserData(a.id)}),e._uU(1),e.qZA()}if(2&n){const t=r.$implicit,_=r.index,o=e.oxw();e.Q6J("ngClass",e.VKq(2,St,_==o.colIndex)),e.xp6(1),e.hij(" ",t.id," ")}}function Ct(n,r){1&n&&e._UZ(0,"app-skeleton-table")}function Mt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e.TgZ(2,"div",42),e.TgZ(3,"div"),e._UZ(4,"img",43),e.qZA(),e.TgZ(5,"div",44),e.TgZ(6,"b"),e._uU(7),e.qZA(),e._UZ(8,"br"),e._uU(9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td"),e._uU(15),e._UZ(16,"br"),e._uU(17),e.qZA(),e.TgZ(18,"td"),e.TgZ(19,"a",45),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw(2).showObjectViewModal(i)}),e.SDv(20,46),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=r.$implicit;e.xp6(4),e.s9C("src",t.avatar,e.LSH),e.xp6(3),e.Oqu(t.nickName),e.xp6(2),e.hij(" ",t.openID," "),e.xp6(2),e.hij(" ",t.platform," "),e.xp6(2),e.AsE(" ",t.score," / ",t.maximumScore," "),e.xp6(2),e.hij(" ",t.createDate," "),e.xp6(2),e.hij(" ",t.lastUpdate," ")}}function Ot(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",32),e.TgZ(2,"table",33),e.TgZ(3,"thead"),e.TgZ(4,"tr"),e.TgZ(5,"th",8),e.SDv(6,34),e.qZA(),e.TgZ(7,"th",8),e.SDv(8,35),e.qZA(),e.TgZ(9,"th",8),e.SDv(10,36),e.qZA(),e.TgZ(11,"th",8),e.SDv(12,37),e.qZA(),e.TgZ(13,"th",38),e.SDv(14,39),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"tbody"),e.YNc(16,Mt,21,8,"tr",40),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"app-pager",41),e.NdJ("onemit",function(o){return e.CHM(t),e.oxw().onemit(o)}),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(16),e.Q6J("ngForOf",t.userData.data),e.xp6(1),e.Q6J("data",t.userData)}}function Zt(n,r){1&n&&(e.TgZ(0,"div",47),e._UZ(1,"img",48),e.qZA())}let ft=(()=>{class n{constructor(t,_,o){this.appServ=t,this.serv=_,this.route=o,this.item={},this.data=[],this.userData={skip:0,take:10,data:[],total:0},this.currentResourceItem={value:"",nickName:""},this.colIndex=0}ngOnInit(){this.route.params.subscribe(t=>{this.appId=t.appid,this.getAppData(),this.getData()})}getAppData(){this.appServ.App(this.appId).subscribe(t=>{this.item=t.data})}getData(){this.serv.AppRankReport(this.appId).subscribe(t=>{200==t.code&&(this.data=t.data,t.data.length>0&&this.getUserData(t.data[0].id))})}getUserData(t){this.serv.AppRankList(this.appId,t,"",30).subscribe(_=>{this.userData.data=_.data})}onemit(t){this.getUserData(t)}showObjectViewModal(t){$("#ObjectViewModal").modal("show"),this.currentResourceItem=t;let _=this;null==_.CodeMirrorEditor&&(_.CodeMirrorEditor=CodeMirror.fromTextArea(document.getElementById("code"),{mode:"javascript",lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,continueComments:"Enter",extraKeys:{},foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]}),_.CodeMirrorEditor.on("change",function(i,a){_.currentResourceItem.value=_.CodeMirrorEditor.getValue(),_.CodeMirrorEditor.setSize("auto","595px")}));try{var o=JSON.stringify(t.data,null," ");_.CodeMirrorEditor.setValue(o)}catch(i){_.CodeMirrorEditor.setValue(t.data)}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(f.b),e.Y36(Et),e.Y36(O.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-app-ranks"]],decls:46,vars:13,consts:function(){let r,t,_,o,i,a,s,l,u,A,p;return r=$localize`条数据`,t=$localize`:@@总分:总分`,_=$localize`:@@最高分:最高分`,o=$localize`:@@创建于:创建于`,i=$localize`:@@返回:返回`,a=$localize`:@@用户:用户`,s=$localize`:@@平台:平台`,l=$localize`:@@得分/最高分:得分/最高分`,u=$localize`:@@时间:时间`,A=$localize`:@@数据:数据`,p=$localize`:@@查看:查看`,[[1,"page-header","my-3"],[1,"row","align-items-center"],[1,"col-auto"],[1,"avatar"],[1,"col"],[1,"page-title","mb-0"],[1,"page-subtitle"],[1,"row"],["translate",""],r,t,_,o,[1,"col","col-md-auto","ms-auto","d-print-none"],["onclick","history.back(-1)","matRipple","","translate","",1,"btn","btn-white"],i,[1,"col-2","p-0","overflow-scroll",2,"height","100vh"],["href","javascript:void(0)","class","dropdown-item","matRipple","",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"col","p-0","border-left"],[1,"card"],[1,"card-body",2,"min-height","80vh"],[4,"ngIf"],["class","mt-5 pt-5 text-center",4,"ngIf"],["tabindex","-1","role","dialog","id","ObjectViewModal",1,"modal"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","gamedataHighlightTitle",1,"modal-title","mb-0"],["type","button","onclick","$('#ObjectViewModal').modal('hide')",1,"btn-close"],[1,"modal-body","p-1",2,"font-size","14px","height","600px","overflow","hidden"],["id","code","name","code",2,"min-height","100%"],["href","javascript:void(0)","matRipple","",1,"dropdown-item",3,"ngClass","click"],[1,"table-responsive","mb-0","mt-3","border-top"],[1,"table","card-table","table-vcenter","text-nowrap","datatable"],a,s,l,u,["width","80px","translate",""],A,[4,"ngFor","ngForOf"],[3,"data","onemit"],[1,"d-flex","flex-row"],["width","48px",1,"img-fluid","border","p-2",3,"src"],[1,"p-2"],["href","javascript:void(0)","translate","",1,"btn","btn-white",3,"click"],p,[1,"mt-5","pt-5","text-center"],["src","./assets/nodata.png"]]},template:function(t,_){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e._UZ(3,"span",3),e.qZA(),e.TgZ(4,"div",4),e.TgZ(5,"h2",5),e._uU(6),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"div",2),e._uU(10),e.TgZ(11,"font",8),e.SDv(12,9),e.qZA(),e.qZA(),e.TgZ(13,"div",2),e.TgZ(14,"span",8),e.SDv(15,10),e.qZA(),e._uU(16),e.qZA(),e.TgZ(17,"div",2),e.TgZ(18,"span",8),e.SDv(19,11),e.qZA(),e._uU(20),e.qZA(),e.TgZ(21,"div",2),e.TgZ(22,"span",8),e.SDv(23,12),e.qZA(),e._uU(24),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"div",13),e.TgZ(26,"a",14),e.SDv(27,15),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"div",7),e.TgZ(29,"div",16),e.YNc(30,mt,2,4,"a",17),e.qZA(),e.TgZ(31,"div",18),e.TgZ(32,"div",19),e.TgZ(33,"div",20),e.YNc(34,Ct,1,0,"app-skeleton-table",21),e.YNc(35,Ot,18,2,"div",21),e.YNc(36,Zt,2,0,"div",22),e.qZA(),e.qZA(),e.qZA(),e.TgZ(37,"div",23),e.TgZ(38,"div",24),e.TgZ(39,"div",25),e.TgZ(40,"div",26),e.TgZ(41,"h3",27),e._uU(42),e.qZA(),e._UZ(43,"button",28),e.qZA(),e.TgZ(44,"div",29),e._UZ(45,"textarea",30),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Jzz("background-image: url(",_.item.logo,")"),e.xp6(3),e.Oqu(_.item.name),e.xp6(4),e.hij(" ",null==_.data[_.colIndex]?null:_.data[_.colIndex].count,""),e.xp6(6),e.hij(": ",null==_.data[_.colIndex]?null:_.data[_.colIndex].totalScore," "),e.xp6(4),e.hij(":",null==_.data[_.colIndex]?null:_.data[_.colIndex].topScore," "),e.xp6(4),e.hij("\uff1a",null==_.data[_.colIndex]?null:_.data[_.colIndex].createDate," "),e.xp6(6),e.Q6J("ngForOf",_.data),e.xp6(4),e.Q6J("ngIf",_.loading),e.xp6(1),e.Q6J("ngIf",!_.loading&&_.userData.data.length>0),e.xp6(1),e.Q6J("ngIf",_.userData.data.length<1),e.xp6(6),e.Oqu(_.currentResourceItem.nickName))},directives:[m.Pi,S.wG,E.sg,E.O5,E.mk,y.i,j.P],styles:["[_nghost-%COMP%]{display:block!important}"],data:{animation:[I.q]}}),n})();var Rt=d(4555);function Nt(n,r){1&n&&e._UZ(0,"app-skeleton-table")}function ht(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e.TgZ(6,"div",42),e.TgZ(7,"div"),e._UZ(8,"img",43),e._UZ(9,"br"),e.TgZ(10,"small"),e._uU(11),e.qZA(),e.qZA(),e.TgZ(12,"div",44),e._uU(13),e._UZ(14,"br"),e._uU(15),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.qZA(),e.TgZ(18,"td"),e.TgZ(19,"small"),e._uU(20),e.qZA(),e._UZ(21,"br"),e.TgZ(22,"small"),e._uU(23),e.qZA(),e.qZA(),e.TgZ(24,"td"),e.TgZ(25,"a",45),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw(2).showGameDataModal(i)}),e.SDv(26,46),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=r.$implicit;e.xp6(2),e.hij(" ",t.id," "),e.xp6(2),e.hij(" ",t.platform," "),e.xp6(4),e.s9C("src",t.avatar,e.LSH),e.xp6(3),e.Oqu(t.nickName),e.xp6(2),e.hij(" ",t.phone,""),e.xp6(2),e.hij(" ",t.email," "),e.xp6(2),e.AsE(" ",t.userID," / ",t.unionID," "),e.xp6(3),e.Oqu(t.createDate),e.xp6(3),e.Oqu(t.lastUpdate)}}function vt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",30),e.TgZ(2,"table",31),e.TgZ(3,"thead"),e.TgZ(4,"tr"),e.TgZ(5,"th",32),e._uU(6,"ID"),e.qZA(),e.TgZ(7,"th",33),e.SDv(8,34),e.qZA(),e.TgZ(9,"th",8),e.SDv(10,35),e.qZA(),e.TgZ(11,"th",8),e.SDv(12,36),e.qZA(),e.TgZ(13,"th",37),e.SDv(14,38),e.qZA(),e.TgZ(15,"th",33),e.SDv(16,39),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"tbody"),e.YNc(18,ht,27,10,"tr",40),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"app-pager",41),e.NdJ("onemit",function(o){return e.CHM(t),e.oxw().onemit(o)}),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(18),e.Q6J("ngForOf",t.data.data),e.xp6(1),e.Q6J("data",t.data)}}let bt=(()=>{class n{constructor(t,_,o){this.route=t,this.serv=_,this.appUserServ=o,this.data={skip:0,take:10,data:[],total:0},this.apiUrl=`${P.N.apiServer}/api`,this.currentResourceItem={value:"",nickName:""},this.onexporting=!1}ngOnInit(){this.route.params.subscribe(t=>{this.appId=t.appid,this.getAppDetail(),this.getData()})}getAppDetail(){this.serv.App(this.appId).subscribe(t=>{this.item=t.data})}getData(t=0){this.appUserServ.AppUsers(this.appId,"","","","","",t,10).subscribe(_=>{this.data.data=_.data.data,this.data.total=_.data.total,this.data.skip=t,this.data.take=10})}onemit(t){this.getData(t)}showGameDataModal(t){$("#ObjectViewModal").modal("show"),this.currentResourceItem=t;let _=this;null==_.CodeMirrorEditor&&(_.CodeMirrorEditor=CodeMirror.fromTextArea(document.getElementById("code"),{mode:"javascript",lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,continueComments:"Enter",extraKeys:{},foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]}),_.CodeMirrorEditor.on("change",function(i,a){_.currentResourceItem.value=_.CodeMirrorEditor.getValue(),_.CodeMirrorEditor.setSize("auto","595px")}));try{var o=JSON.stringify(t.data,null," ");_.CodeMirrorEditor.setValue(o)}catch(i){_.CodeMirrorEditor.setValue(t.data)}}exportExcel(){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(O.gz),e.Y36(f.b),e.Y36(Rt.s))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-app-users"]],decls:43,vars:19,consts:function(){let r,t,_,o,i,a,s,l,u;return r=$localize`:@@条数据:条数据`,t=$localize`:@@查询:查询`,_=$localize`:@@返回:返回`,o=$localize`:@@平台:平台`,i=$localize`:@@用户:用户`,a=$localize`:@@用户ID / UID:用户ID / UID`,s=$localize`:@@时间:时间`,l=$localize`:@@数据:数据`,u=$localize`:@@查看:查看`,[[1,"page-header","my-2"],[1,"row","align-items-center"],[1,"col-auto"],[1,"avatar"],[1,"col"],[1,"page-title","mb-0"],[1,"page-subtitle"],[1,"row"],["translate",""],r,[1,"col-auto","d-md-flex","flex-md-row","flex-sm-column","gap-2"],[1,"d-flex","mb-3","gap-2"],["type","text",1,"form-control",3,"ngModel","placeholder","ngModelChange"],["type","text","placeholder","openId",1,"form-control",3,"ngModel","ngModelChange"],["type","button","translate","",1,"btn","btn-indigo",3,"click"],t,["onclick","history.back(-1)","matRipple","","translate","",1,"btn","btn-white"],_,[1,"card"],[1,"card-body"],[4,"ngIf"],[3,"show","className"],["id","ObjectViewModal",1,"modal"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","gamedataHighlightTitle",1,"modal-title","mb-0"],["type","button","data-bs-dismiss","alert","aria-label","Close","onclick","$('#ObjectViewModal').modal('hide')",1,"btn-close"],[1,"modal-body","p-1",2,"font-size","14px","height","600px","overflow","hidden"],["id","code","name","code",2,"min-height","100%"],[1,"table-responsive","mb-0","border-top"],[1,"table","card-table","table-vcenter","text-nowrap","datatable"],["width","50px"],["width","80px","translate",""],o,i,a,["width","120px","translate",""],s,l,[4,"ngFor","ngForOf"],[3,"data","onemit"],[1,"d-flex"],[1,"avatar","border",3,"src"],[1,"mx-2"],["href","javascript:void(0)","translate","",1,"btn","btn-white",3,"click"],u]},template:function(t,_){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e._UZ(3,"span",3),e.qZA(),e.TgZ(4,"div",4),e.TgZ(5,"h2",5),e._uU(6),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"div",2),e._uU(10),e.TgZ(11,"font",8),e.SDv(12,9),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",10),e.TgZ(14,"div",11),e.TgZ(15,"div"),e.TgZ(16,"input",12),e.NdJ("ngModelChange",function(i){return _.filter_platform=i}),e.ALo(17,"translate"),e.qZA(),e.qZA(),e.TgZ(18,"div"),e.TgZ(19,"input",12),e.NdJ("ngModelChange",function(i){return _.filter_nickname=i}),e.ALo(20,"translate"),e.qZA(),e.qZA(),e.TgZ(21,"div"),e.TgZ(22,"input",13),e.NdJ("ngModelChange",function(i){return _.filter_openid=i}),e.qZA(),e.qZA(),e.TgZ(23,"div"),e.TgZ(24,"button",14),e.NdJ("click",function(){return _.getData(0)}),e.SDv(25,15),e.qZA(),e.qZA(),e.TgZ(26,"div"),e.TgZ(27,"a",16),e.SDv(28,17),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"div",18),e.TgZ(30,"div",19),e.YNc(31,Nt,1,0,"app-skeleton-table",20),e.YNc(32,vt,20,2,"div",20),e._UZ(33,"app-nodata",21),e.qZA(),e.qZA(),e.TgZ(34,"div",22),e.TgZ(35,"div",23),e.TgZ(36,"div",24),e.TgZ(37,"div",25),e.TgZ(38,"h3",26),e._uU(39),e.qZA(),e._UZ(40,"button",27),e.qZA(),e.TgZ(41,"div",28),e._UZ(42,"textarea",29),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Jzz("background-image: url(",null==_.item?null:_.item.logo,")"),e.xp6(3),e.Oqu(null==_.item?null:_.item.name),e.xp6(4),e.hij(" ",null==_.data||null==_.data.data?null:_.data.data.length,""),e.xp6(6),e.Q6J("ngModel",_.filter_platform)("placeholder",e.lcZ(17,15,"\u5e73\u53f0")),e.xp6(3),e.Q6J("ngModel",_.filter_nickname)("placeholder",e.lcZ(20,17,"\u6635\u79f0")),e.xp6(3),e.Q6J("ngModel",_.filter_openid),e.xp6(9),e.Q6J("ngIf",_.loading),e.xp6(1),e.Q6J("ngIf",!_.loading&&_.data.data.length>0),e.xp6(1),e.Q6J("show",_.data.data.length<1)("className","mt-5 pt-5"),e.xp6(6),e.Oqu(_.currentResourceItem.nickName))},directives:[m.Pi,g.Fj,g.JJ,g.On,S.wG,E.O5,h.H,y.i,E.sg,j.P],pipes:[m.X$],styles:[""]}),n})();var Dt=d(3687);const _e=function(){return["/"]};let Lt=(()=>{class n{constructor(t,_,o){this.serv=t,this.route=_,this.globalServ=o,this.item={}}ngOnInit(){}addProject(t){var _=this;return(0,Z.Z)(function*(){!(yield c.R.fire({icon:"question",titleText:"\u662f\u5426\u786e\u8ba4\u63d0\u4ea4?",showCancelButton:!0})).isConfirmed||_.serv.ProjectPost(_.item).subscribe(i=>{c.F.fire({icon:"success",titleText:"\u6dfb\u52a0\u6210\u529f"}),_.route.navigateByUrl(`/projects/${i.data.id}`),_.globalServ.getData()})})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(w.m),e.Y36(O.F0),e.Y36(Dt.U))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-projects-add"]],decls:25,vars:6,consts:function(){let r,t,_,o,i;return r=$localize`:@@新建项目:新建项目`,t=$localize`:@@返回:返回`,_=$localize`:@@名称:名称`,o=$localize`:@@描述:描述`,i=$localize`:@@返回:返回`,[[1,"page-header","mt-0","mb-3"],[1,"row","align-items-center"],[1,"col"],["translate","",1,"page-title"],r,[1,"col-auto","ms-auto","d-print-none"],["matRipple","","translate","",1,"btn","btn-white",3,"routerLink"],t,[1,"row"],[1,"col-md-6","col-12"],[1,"card"],[1,"card-body"],[1,"mb-3"],["translate","",1,"form-label"],_,["type","text",1,"form-control",3,"ngModel","ngModelChange"],o,["rows","5",1,"form-control",3,"ngModel","ngModelChange"],["type","button","translate","",1,"btn","btn-indigo",3,"click"],["matRipple","","translate","",1,"btn","btn-white","mx-2",3,"routerLink"],i]},template:function(t,_){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h2",3),e.SDv(4,4),e.qZA(),e.qZA(),e.TgZ(5,"div",5),e.TgZ(6,"a",6),e.SDv(7,7),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",8),e.TgZ(9,"div",9),e.TgZ(10,"div",10),e.TgZ(11,"div",11),e.TgZ(12,"div",12),e.TgZ(13,"label",13),e.SDv(14,14),e.qZA(),e.TgZ(15,"input",15),e.NdJ("ngModelChange",function(i){return _.item.name=i}),e.qZA(),e.qZA(),e.TgZ(16,"div",12),e.TgZ(17,"label",13),e.SDv(18,16),e.qZA(),e.TgZ(19,"textarea",17),e.NdJ("ngModelChange",function(i){return _.item.description=i}),e.qZA(),e.qZA(),e.TgZ(20,"div"),e.TgZ(21,"button",18),e.NdJ("click",function(i){return _.addProject(i)}),e._uU(22,"\u521b\u5efa"),e.qZA(),e.TgZ(23,"a",19),e.SDv(24,20),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(6),e.Q6J("routerLink",e.DdM(4,_e)),e.xp6(9),e.Q6J("ngModel",_.item.name),e.xp6(4),e.Q6J("ngModel",_.item.description),e.xp6(4),e.Q6J("routerLink",e.DdM(5,_e)))},directives:[m.Pi,O.yS,S.wG,g.Fj,g.JJ,g.On],styles:["[_nghost-%COMP%]{display:block!important}"],data:{animation:[I.q]}}),n})();var $t=d(3278);function It(n,r){1&n&&e._UZ(0,"app-skeleton-card")}const ne=function(n){return["/projects",n]};function qt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",12),e.TgZ(1,"div",13),e.TgZ(2,"div",14),e.TgZ(3,"label",15),e.SDv(4,16),e.qZA(),e._UZ(5,"img",17),e.TgZ(6,"input",18),e.NdJ("change",function(o){return e.CHM(t),e.oxw().UploadAppLogo(o)}),e.qZA(),e.qZA(),e.TgZ(7,"div",14),e.TgZ(8,"label",15),e.SDv(9,19),e.qZA(),e.TgZ(10,"input",20),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().item.name=o}),e.qZA(),e.qZA(),e.TgZ(11,"div",14),e.TgZ(12,"label",15),e.SDv(13,21),e.qZA(),e.TgZ(14,"input",20),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().item.serverPath=o}),e.qZA(),e.qZA(),e.TgZ(15,"div",14),e.TgZ(16,"label",15),e.SDv(17,22),e.qZA(),e.TgZ(18,"input",23),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().item.website=o}),e.qZA(),e.qZA(),e.TgZ(19,"div",14),e.TgZ(20,"label",15),e.SDv(21,24),e.qZA(),e.TgZ(22,"textarea",25),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().item.description=o}),e.qZA(),e.qZA(),e.TgZ(23,"div"),e.TgZ(24,"button",26),e.NdJ("click",function(o){return e.CHM(t),e.oxw().updateApp(o)}),e._uU(25,"\u521b\u5efa"),e.qZA(),e.TgZ(26,"a",27),e.SDv(27,28),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(5),e.s9C("src",t.item.logo,e.LSH),e.xp6(5),e.Q6J("ngModel",t.item.name),e.xp6(4),e.Q6J("ngModel",t.item.serverPath),e.xp6(4),e.Q6J("ngModel",t.item.website),e.xp6(4),e.Q6J("ngModel",t.item.description),e.xp6(4),e.Q6J("routerLink",e.VKq(6,ne,t.projectId))}}const Ut=[{path:"",component:ie,data:{title:"projects",state:"projects"}},{path:"add",component:Lt,data:{title:"projects-add",state:"projects-add"}},{path:":id",component:st,data:{title:"apps",state:"apps"}},{path:":id/add",component:(()=>{class n{constructor(t,_,o,i){this.route=t,this.router=_,this.serv=o,this.tenantBlob=i,this.item={name:window.crypto.randomUUID().replace(/-/g,""),logo:P.N.defaultAppLogo,website:"about:blank"},this.loading=!0,this.route.params.subscribe(a=>{this.projectId=a.id,this.item.ProjectID=this.projectId})}ngOnInit(){this.loading=!0,this.serv.AppPost(this.item).subscribe(t=>{this.item.id=t.data.id,this.item.serverPath=t.data.serverPath,this.loading=!1})}updateApp(t){this.serv.AppPut(this.item.id,this.item).subscribe(_=>{200==_.code?this.router.navigateByUrl(`/projects/${this.projectId}`):c.F.fire({icon:"error",titleText:_.err})})}UploadAppLogo(t){var _=new FormData;_.append("file",t.currentTarget.files[0]),this.tenantBlob.TenantBlobUpload("app",this.item.id,_).subscribe(o=>{200==o.code?this.item.logo=o.data:c.F.fire({icon:"error",titleText:o.err})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(O.gz),e.Y36(O.F0),e.Y36(f.b),e.Y36(ee.R))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-app-add"]],decls:12,vars:5,consts:function(){let r,t,_,o,i,a,s,l;return r=$localize`:@@新建应用:新建应用`,t=$localize`:@@返回:返回`,_=$localize`:@@应用图标:应用图标`,o=$localize`:@@名称:名称`,i=$localize`:@@站点路径:站点路径`,a=$localize`:@@网站:网站`,s=$localize`:@@描述:描述`,l=$localize`:@@返回:返回`,[[1,"page-header","mt-0","mb-3"],[1,"row","align-items-center"],[1,"col"],["translate","",1,"page-title"],r,[1,"col-auto","ms-auto","d-print-none"],["matRipple","","translate","",1,"btn","btn-white",3,"routerLink"],t,[1,"row"],[1,"col-md-6","col-12"],[4,"ngIf"],["class","card",4,"ngIf"],[1,"card"],[1,"card-body"],[1,"mb-3"],["translate","",1,"form-label"],_,["onclick","document.getElementById('uploadAppLogo').click()",1,"avatar","shadow-sm","border",3,"src"],["type","file","id","uploadAppLogo",1,"d-none",3,"change"],o,["type","text",1,"form-control",3,"ngModel","ngModelChange"],i,a,["type","url",1,"form-control",3,"ngModel","ngModelChange"],s,["rows","5",1,"form-control",3,"ngModel","ngModelChange"],["type","button","translate","",1,"btn","btn-indigo",3,"click"],["matRipple","","translate","",1,"btn","btn-white","mx-2",3,"routerLink"],l]},template:function(t,_){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h2",3),e.SDv(4,4),e.qZA(),e.qZA(),e.TgZ(5,"div",5),e.TgZ(6,"a",6),e.SDv(7,7),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",8),e.TgZ(9,"div",9),e.YNc(10,It,1,0,"app-skeleton-card",10),e.YNc(11,qt,28,8,"div",11),e.qZA(),e.qZA()),2&t&&(e.xp6(6),e.Q6J("routerLink",e.VKq(3,ne,_.projectId)),e.xp6(4),e.Q6J("ngIf",_.loading),e.xp6(1),e.Q6J("ngIf",!_.loading))},directives:[m.Pi,O.yS,S.wG,E.O5,$t.g,g.Fj,g.JJ,g.On],styles:[""]}),n})(),data:{title:"apps-add",state:"apps-add"}},{path:":id/:appid/publish",component:W,data:{title:"app-publish",state:"app-publish"}},{path:":id/:appid/storage",component:At,data:{title:"app-storage",state:"app-storage"}},{path:":id/:appid/ranks",component:ft,data:{title:"app-rank",state:"app-rank"}},{path:":id/:appid/users",component:bt,data:{title:"app-user",state:"app-user"}}];let yt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[O.Bz.forChild(Ut)],O.Bz]}),n})();var Jt=d(1382),xt=d(7623);function oe(n){return new xt.w(n,P.N.i18n_asset_prefix)}let wt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[Jt.m,E.ez,g.u5,yt,m.aw.forChild({loader:{provide:m.Zw,useFactory:oe,deps:[C.eN]},isolate:!1,extend:!0})]]}),n})()}}]);